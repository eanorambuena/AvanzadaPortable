/* Bundled with ESBuild v0.14.38 */
var Ih=Object.create;var Zn=Object.defineProperty;var Fh=Object.getOwnPropertyDescriptor;var Lh=Object.getOwnPropertyNames;var Ah=Object.getPrototypeOf,Mh=Object.prototype.hasOwnProperty;var jh=(t,e)=>()=>(t&&(e=t(t=0)),e);var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ou=(t,e)=>{for(var r in e)Zn(t,r,{get:e[r],enumerable:!0})},au=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Lh(e))!Mh.call(t,i)&&i!==r&&Zn(t,i,{get:()=>e[i],enumerable:!(n=Fh(e,i))||n.enumerable});return t};var $h=(t,e,r)=>(r=t!=null?Ih(Ah(t)):{},au(e||!t||!t.__esModule?Zn(r,"default",{value:t,enumerable:!0}):r,t)),cu=t=>au(Zn({},"__esModule",{value:!0}),t);var pn=w((s_,uu)=>{var Wh="2.0.0",Hh=Number.MAX_SAFE_INTEGER||9007199254740991,zh=16;uu.exports={SEMVER_SPEC_VERSION:Wh,MAX_LENGTH:256,MAX_SAFE_INTEGER:Hh,MAX_SAFE_COMPONENT_LENGTH:zh}});var gn=w((o_,lu)=>{var Kh=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};lu.exports=Kh});var lr=w((Xt,du)=>{var{MAX_SAFE_COMPONENT_LENGTH:as}=pn(),Uh=gn();Xt=du.exports={};var Gh=Xt.re=[],L=Xt.src=[],A=Xt.t={},Bh=0,X=(t,e,r)=>{let n=Bh++;Uh(t,n,e),A[t]=n,L[n]=e,Gh[n]=new RegExp(e,r?"g":void 0)};X("NUMERICIDENTIFIER","0|[1-9]\\d*");X("NUMERICIDENTIFIERLOOSE","[0-9]+");X("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");X("MAINVERSION",`(${L[A.NUMERICIDENTIFIER]})\\.(${L[A.NUMERICIDENTIFIER]})\\.(${L[A.NUMERICIDENTIFIER]})`);X("MAINVERSIONLOOSE",`(${L[A.NUMERICIDENTIFIERLOOSE]})\\.(${L[A.NUMERICIDENTIFIERLOOSE]})\\.(${L[A.NUMERICIDENTIFIERLOOSE]})`);X("PRERELEASEIDENTIFIER",`(?:${L[A.NUMERICIDENTIFIER]}|${L[A.NONNUMERICIDENTIFIER]})`);X("PRERELEASEIDENTIFIERLOOSE",`(?:${L[A.NUMERICIDENTIFIERLOOSE]}|${L[A.NONNUMERICIDENTIFIER]})`);X("PRERELEASE",`(?:-(${L[A.PRERELEASEIDENTIFIER]}(?:\\.${L[A.PRERELEASEIDENTIFIER]})*))`);X("PRERELEASELOOSE",`(?:-?(${L[A.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${L[A.PRERELEASEIDENTIFIERLOOSE]})*))`);X("BUILDIDENTIFIER","[0-9A-Za-z-]+");X("BUILD",`(?:\\+(${L[A.BUILDIDENTIFIER]}(?:\\.${L[A.BUILDIDENTIFIER]})*))`);X("FULLPLAIN",`v?${L[A.MAINVERSION]}${L[A.PRERELEASE]}?${L[A.BUILD]}?`);X("FULL",`^${L[A.FULLPLAIN]}$`);X("LOOSEPLAIN",`[v=\\s]*${L[A.MAINVERSIONLOOSE]}${L[A.PRERELEASELOOSE]}?${L[A.BUILD]}?`);X("LOOSE",`^${L[A.LOOSEPLAIN]}$`);X("GTLT","((?:<|>)?=?)");X("XRANGEIDENTIFIERLOOSE",`${L[A.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);X("XRANGEIDENTIFIER",`${L[A.NUMERICIDENTIFIER]}|x|X|\\*`);X("XRANGEPLAIN",`[v=\\s]*(${L[A.XRANGEIDENTIFIER]})(?:\\.(${L[A.XRANGEIDENTIFIER]})(?:\\.(${L[A.XRANGEIDENTIFIER]})(?:${L[A.PRERELEASE]})?${L[A.BUILD]}?)?)?`);X("XRANGEPLAINLOOSE",`[v=\\s]*(${L[A.XRANGEIDENTIFIERLOOSE]})(?:\\.(${L[A.XRANGEIDENTIFIERLOOSE]})(?:\\.(${L[A.XRANGEIDENTIFIERLOOSE]})(?:${L[A.PRERELEASELOOSE]})?${L[A.BUILD]}?)?)?`);X("XRANGE",`^${L[A.GTLT]}\\s*${L[A.XRANGEPLAIN]}$`);X("XRANGELOOSE",`^${L[A.GTLT]}\\s*${L[A.XRANGEPLAINLOOSE]}$`);X("COERCE",`(^|[^\\d])(\\d{1,${as}})(?:\\.(\\d{1,${as}}))?(?:\\.(\\d{1,${as}}))?(?:$|[^\\d])`);X("COERCERTL",L[A.COERCE],!0);X("LONETILDE","(?:~>?)");X("TILDETRIM",`(\\s*)${L[A.LONETILDE]}\\s+`,!0);Xt.tildeTrimReplace="$1~";X("TILDE",`^${L[A.LONETILDE]}${L[A.XRANGEPLAIN]}$`);X("TILDELOOSE",`^${L[A.LONETILDE]}${L[A.XRANGEPLAINLOOSE]}$`);X("LONECARET","(?:\\^)");X("CARETTRIM",`(\\s*)${L[A.LONECARET]}\\s+`,!0);Xt.caretTrimReplace="$1^";X("CARET",`^${L[A.LONECARET]}${L[A.XRANGEPLAIN]}$`);X("CARETLOOSE",`^${L[A.LONECARET]}${L[A.XRANGEPLAINLOOSE]}$`);X("COMPARATORLOOSE",`^${L[A.GTLT]}\\s*(${L[A.LOOSEPLAIN]})$|^$`);X("COMPARATOR",`^${L[A.GTLT]}\\s*(${L[A.FULLPLAIN]})$|^$`);X("COMPARATORTRIM",`(\\s*)${L[A.GTLT]}\\s*(${L[A.LOOSEPLAIN]}|${L[A.XRANGEPLAIN]})`,!0);Xt.comparatorTrimReplace="$1$2$3";X("HYPHENRANGE",`^\\s*(${L[A.XRANGEPLAIN]})\\s+-\\s+(${L[A.XRANGEPLAIN]})\\s*$`);X("HYPHENRANGELOOSE",`^\\s*(${L[A.XRANGEPLAINLOOSE]})\\s+-\\s+(${L[A.XRANGEPLAINLOOSE]})\\s*$`);X("STAR","(<|>)?=?\\s*\\*");X("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");X("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var mn=w((a_,fu)=>{var Xh=["includePrerelease","loose","rtl"],Jh=t=>t?typeof t!="object"?{loose:!0}:Xh.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};fu.exports=Jh});var ei=w((c_,gu)=>{var hu=/^[0-9]+$/,pu=(t,e)=>{let r=hu.test(t),n=hu.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Vh=(t,e)=>pu(e,t);gu.exports={compareIdentifiers:pu,rcompareIdentifiers:Vh}});var Le=w((u_,Ru)=>{var ti=gn(),{MAX_LENGTH:mu,MAX_SAFE_INTEGER:ri}=pn(),{re:vu,t:yu}=lr(),Yh=mn(),{compareIdentifiers:Mr}=ei(),Qe=class{constructor(e,r){if(r=Yh(r),e instanceof Qe){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>mu)throw new TypeError(`version is longer than ${mu} characters`);ti("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?vu[yu.LOOSE]:vu[yu.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ri||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ri||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ri||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<ri)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ti("SemVer.compare",this.version,this.options,e),!(e instanceof Qe)){if(typeof e=="string"&&e===this.version)return 0;e=new Qe(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Qe||(e=new Qe(e,this.options)),Mr(this.major,e.major)||Mr(this.minor,e.minor)||Mr(this.patch,e.patch)}comparePre(e){if(e instanceof Qe||(e=new Qe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(ti("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Mr(n,i)}while(++r)}compareBuild(e){e instanceof Qe||(e=new Qe(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(ti("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Mr(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(Mr(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};Ru.exports=Qe});var dr=w((l_,Su)=>{var{MAX_LENGTH:Qh}=pn(),{re:Cu,t:_u}=lr(),wu=Le(),Zh=mn(),ep=(t,e)=>{if(e=Zh(e),t instanceof wu)return t;if(typeof t!="string"||t.length>Qh||!(e.loose?Cu[_u.LOOSE]:Cu[_u.FULL]).test(t))return null;try{return new wu(t,e)}catch{return null}};Su.exports=ep});var Tu=w((d_,bu)=>{var tp=dr(),rp=(t,e)=>{let r=tp(t,e);return r?r.version:null};bu.exports=rp});var Eu=w((f_,Pu)=>{var np=dr(),ip=(t,e)=>{let r=np(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Pu.exports=ip});var qu=w((h_,xu)=>{var Du=Le(),sp=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new Du(t instanceof Du?t.version:t,r).inc(e,n).version}catch{return null}};xu.exports=sp});var st=w((p_,ku)=>{var Ou=Le(),op=(t,e,r)=>new Ou(t,r).compare(new Ou(e,r));ku.exports=op});var ni=w((g_,Nu)=>{var ap=st(),cp=(t,e,r)=>ap(t,e,r)===0;Nu.exports=cp});var Lu=w((m_,Fu)=>{var Iu=dr(),up=ni(),lp=(t,e)=>{if(up(t,e))return null;{let r=Iu(t),n=Iu(e),i=r.prerelease.length||n.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let u in r)if((u==="major"||u==="minor"||u==="patch")&&r[u]!==n[u])return s+u;return o}};Fu.exports=lp});var Mu=w((v_,Au)=>{var dp=Le(),fp=(t,e)=>new dp(t,e).major;Au.exports=fp});var $u=w((y_,ju)=>{var hp=Le(),pp=(t,e)=>new hp(t,e).minor;ju.exports=pp});var Hu=w((R_,Wu)=>{var gp=Le(),mp=(t,e)=>new gp(t,e).patch;Wu.exports=mp});var Ku=w((C_,zu)=>{var vp=dr(),yp=(t,e)=>{let r=vp(t,e);return r&&r.prerelease.length?r.prerelease:null};zu.exports=yp});var Gu=w((__,Uu)=>{var Rp=st(),Cp=(t,e,r)=>Rp(e,t,r);Uu.exports=Cp});var Xu=w((w_,Bu)=>{var _p=st(),wp=(t,e)=>_p(t,e,!0);Bu.exports=wp});var ii=w((S_,Vu)=>{var Ju=Le(),Sp=(t,e,r)=>{let n=new Ju(t,r),i=new Ju(e,r);return n.compare(i)||n.compareBuild(i)};Vu.exports=Sp});var Qu=w((b_,Yu)=>{var bp=ii(),Tp=(t,e)=>t.sort((r,n)=>bp(r,n,e));Yu.exports=Tp});var el=w((T_,Zu)=>{var Pp=ii(),Ep=(t,e)=>t.sort((r,n)=>Pp(n,r,e));Zu.exports=Ep});var vn=w((P_,tl)=>{var Dp=st(),xp=(t,e,r)=>Dp(t,e,r)>0;tl.exports=xp});var si=w((E_,rl)=>{var qp=st(),Op=(t,e,r)=>qp(t,e,r)<0;rl.exports=Op});var cs=w((D_,nl)=>{var kp=st(),Np=(t,e,r)=>kp(t,e,r)!==0;nl.exports=Np});var oi=w((x_,il)=>{var Ip=st(),Fp=(t,e,r)=>Ip(t,e,r)>=0;il.exports=Fp});var ai=w((q_,sl)=>{var Lp=st(),Ap=(t,e,r)=>Lp(t,e,r)<=0;sl.exports=Ap});var us=w((O_,ol)=>{var Mp=ni(),jp=cs(),$p=vn(),Wp=oi(),Hp=si(),zp=ai(),Kp=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Mp(t,r,n);case"!=":return jp(t,r,n);case">":return $p(t,r,n);case">=":return Wp(t,r,n);case"<":return Hp(t,r,n);case"<=":return zp(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};ol.exports=Kp});var cl=w((k_,al)=>{var Up=Le(),Gp=dr(),{re:ci,t:ui}=lr(),Bp=(t,e)=>{if(t instanceof Up)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(ci[ui.COERCE]);else{let n;for(;(n=ci[ui.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),ci[ui.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ci[ui.COERCERTL].lastIndex=-1}return r===null?null:Gp(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};al.exports=Bp});var ll=w((N_,ul)=>{"use strict";ul.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var fl=w((I_,dl)=>{"use strict";dl.exports=te;te.Node=fr;te.create=te;function te(t){var e=this;if(e instanceof te||(e=new te),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}te.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};te.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};te.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};te.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Jp(this,arguments[t]);return this.length};te.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Vp(this,arguments[t]);return this.length};te.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};te.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};te.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};te.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};te.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};te.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};te.prototype.map=function(t,e){e=e||this;for(var r=new te,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};te.prototype.mapReverse=function(t,e){e=e||this;for(var r=new te,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};te.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};te.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};te.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};te.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};te.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new te;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};te.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new te;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};te.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=Xp(this,i,r[n]);return s};te.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function Xp(t,e,r){var n=e===t.head?new fr(r,null,e,t):new fr(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function Jp(t,e){t.tail=new fr(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Vp(t,e){t.head=new fr(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function fr(t,e,r,n){if(!(this instanceof fr))return new fr(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{ll()(te)}catch{}});var vl=w((F_,ml)=>{"use strict";var Yp=fl(),hr=Symbol("max"),At=Symbol("length"),jr=Symbol("lengthCalculator"),Rn=Symbol("allowStale"),pr=Symbol("maxAge"),Lt=Symbol("dispose"),hl=Symbol("noDisposeOnSet"),be=Symbol("lruList"),lt=Symbol("cache"),gl=Symbol("updateAgeOnGet"),ls=()=>1,fs=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[hr]=e.max||1/0,n=e.length||ls;if(this[jr]=typeof n!="function"?ls:n,this[Rn]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[pr]=e.maxAge||0,this[Lt]=e.dispose,this[hl]=e.noDisposeOnSet||!1,this[gl]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[hr]=e||1/0,yn(this)}get max(){return this[hr]}set allowStale(e){this[Rn]=!!e}get allowStale(){return this[Rn]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[pr]=e,yn(this)}get maxAge(){return this[pr]}set lengthCalculator(e){typeof e!="function"&&(e=ls),e!==this[jr]&&(this[jr]=e,this[At]=0,this[be].forEach(r=>{r.length=this[jr](r.value,r.key),this[At]+=r.length})),yn(this)}get lengthCalculator(){return this[jr]}get length(){return this[At]}get itemCount(){return this[be].length}rforEach(e,r){r=r||this;for(let n=this[be].tail;n!==null;){let i=n.prev;pl(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[be].head;n!==null;){let i=n.next;pl(this,e,n,r),n=i}}keys(){return this[be].toArray().map(e=>e.key)}values(){return this[be].toArray().map(e=>e.value)}reset(){this[Lt]&&this[be]&&this[be].length&&this[be].forEach(e=>this[Lt](e.key,e.value)),this[lt]=new Map,this[be]=new Yp,this[At]=0}dump(){return this[be].map(e=>li(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[be]}set(e,r,n){if(n=n||this[pr],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[jr](r,e);if(this[lt].has(e)){if(s>this[hr])return $r(this,this[lt].get(e)),!1;let c=this[lt].get(e).value;return this[Lt]&&(this[hl]||this[Lt](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[At]+=s-c.length,c.length=s,this.get(e),yn(this),!0}let o=new hs(e,r,s,i,n);return o.length>this[hr]?(this[Lt]&&this[Lt](e,r),!1):(this[At]+=o.length,this[be].unshift(o),this[lt].set(e,this[be].head),yn(this),!0)}has(e){if(!this[lt].has(e))return!1;let r=this[lt].get(e).value;return!li(this,r)}get(e){return ds(this,e,!0)}peek(e){return ds(this,e,!1)}pop(){let e=this[be].tail;return e?($r(this,e),e.value):null}del(e){$r(this,this[lt].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[lt].forEach((e,r)=>ds(this,r,!1))}},ds=(t,e,r)=>{let n=t[lt].get(e);if(n){let i=n.value;if(li(t,i)){if($r(t,n),!t[Rn])return}else r&&(t[gl]&&(n.value.now=Date.now()),t[be].unshiftNode(n));return i.value}},li=(t,e)=>{if(!e||!e.maxAge&&!t[pr])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[pr]&&r>t[pr]},yn=t=>{if(t[At]>t[hr])for(let e=t[be].tail;t[At]>t[hr]&&e!==null;){let r=e.prev;$r(t,e),e=r}},$r=(t,e)=>{if(e){let r=e.value;t[Lt]&&t[Lt](r.key,r.value),t[At]-=r.length,t[lt].delete(r.key),t[be].removeNode(e)}},hs=class{constructor(e,r,n,i,s){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}},pl=(t,e,r,n)=>{let i=r.value;li(t,i)&&($r(t,r),t[Rn]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};ml.exports=fs});var ot=w((L_,_l)=>{var gr=class{constructor(e,r){if(r=Zp(r),e instanceof gr)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new gr(e.raw,r);if(e instanceof ps)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Rl(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&ig(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=yl.get(n);if(i)return i;let s=this.options.loose,o=s?Be[We.HYPHENRANGELOOSE]:Be[We.HYPHENRANGE];e=e.replace(o,pg(this.options.includePrerelease)),fe("hyphen replace",e),e=e.replace(Be[We.COMPARATORTRIM],tg),fe("comparator trim",e),e=e.replace(Be[We.TILDETRIM],rg),e=e.replace(Be[We.CARETTRIM],ng),e=e.split(/\s+/).join(" ");let u=e.split(" ").map(m=>sg(m,this.options)).join(" ").split(/\s+/).map(m=>hg(m,this.options));s&&(u=u.filter(m=>(fe("loose invalid filter",m,this.options),!!m.match(Be[We.COMPARATORLOOSE])))),fe("range list",u);let c=new Map,f=u.map(m=>new ps(m,this.options));for(let m of f){if(Rl(m))return[m];c.set(m.value,m)}c.size>1&&c.has("")&&c.delete("");let g=[...c.values()];return yl.set(n,g),g}intersects(e,r){if(!(e instanceof gr))throw new TypeError("a Range is required");return this.set.some(n=>Cl(n,r)&&e.set.some(i=>Cl(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new eg(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(gg(this.set[r],e,this.options))return!0;return!1}};_l.exports=gr;var Qp=vl(),yl=new Qp({max:1e3}),Zp=mn(),ps=Cn(),fe=gn(),eg=Le(),{re:Be,t:We,comparatorTrimReplace:tg,tildeTrimReplace:rg,caretTrimReplace:ng}=lr(),Rl=t=>t.value==="<0.0.0-0",ig=t=>t.value==="",Cl=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},sg=(t,e)=>(fe("comp",t,e),t=cg(t,e),fe("caret",t),t=og(t,e),fe("tildes",t),t=lg(t,e),fe("xrange",t),t=fg(t,e),fe("stars",t),t),He=t=>!t||t.toLowerCase()==="x"||t==="*",og=(t,e)=>t.trim().split(/\s+/).map(r=>ag(r,e)).join(" "),ag=(t,e)=>{let r=e.loose?Be[We.TILDELOOSE]:Be[We.TILDE];return t.replace(r,(n,i,s,o,u)=>{fe("tilde",t,n,i,s,o,u);let c;return He(i)?c="":He(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:He(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:u?(fe("replaceTilde pr",u),c=`>=${i}.${s}.${o}-${u} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,fe("tilde return",c),c})},cg=(t,e)=>t.trim().split(/\s+/).map(r=>ug(r,e)).join(" "),ug=(t,e)=>{fe("caret",t,e);let r=e.loose?Be[We.CARETLOOSE]:Be[We.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,u,c)=>{fe("caret",t,i,s,o,u,c);let f;return He(s)?f="":He(o)?f=`>=${s}.0.0${n} <${+s+1}.0.0-0`:He(u)?s==="0"?f=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:f=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(fe("replaceCaret pr",c),s==="0"?o==="0"?f=`>=${s}.${o}.${u}-${c} <${s}.${o}.${+u+1}-0`:f=`>=${s}.${o}.${u}-${c} <${s}.${+o+1}.0-0`:f=`>=${s}.${o}.${u}-${c} <${+s+1}.0.0-0`):(fe("no pr"),s==="0"?o==="0"?f=`>=${s}.${o}.${u}${n} <${s}.${o}.${+u+1}-0`:f=`>=${s}.${o}.${u}${n} <${s}.${+o+1}.0-0`:f=`>=${s}.${o}.${u} <${+s+1}.0.0-0`),fe("caret return",f),f})},lg=(t,e)=>(fe("replaceXRanges",t,e),t.split(/\s+/).map(r=>dg(r,e)).join(" ")),dg=(t,e)=>{t=t.trim();let r=e.loose?Be[We.XRANGELOOSE]:Be[We.XRANGE];return t.replace(r,(n,i,s,o,u,c)=>{fe("xRange",t,n,i,s,o,u,c);let f=He(s),g=f||He(o),m=g||He(u),y=m;return i==="="&&y&&(i=""),c=e.includePrerelease?"-0":"",f?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&y?(g&&(o=0),u=0,i===">"?(i=">=",g?(s=+s+1,o=0,u=0):(o=+o+1,u=0)):i==="<="&&(i="<",g?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${u}${c}`):g?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:m&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),fe("xRange return",n),n})},fg=(t,e)=>(fe("replaceStars",t,e),t.trim().replace(Be[We.STAR],"")),hg=(t,e)=>(fe("replaceGTE0",t,e),t.trim().replace(Be[e.includePrerelease?We.GTE0PRE:We.GTE0],"")),pg=t=>(e,r,n,i,s,o,u,c,f,g,m,y,v)=>(He(n)?r="":He(i)?r=`>=${n}.0.0${t?"-0":""}`:He(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,He(f)?c="":He(g)?c=`<${+f+1}.0.0-0`:He(m)?c=`<${f}.${+g+1}.0-0`:y?c=`<=${f}.${g}.${m}-${y}`:t?c=`<${f}.${g}.${+m+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),gg=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(fe(t[n].semver),t[n].semver!==ps.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Cn=w((A_,Pl)=>{var _n=Symbol("SemVer ANY"),Wr=class{static get ANY(){return _n}constructor(e,r){if(r=mg(r),e instanceof Wr){if(e.loose===!!r.loose)return e;e=e.value}ms("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===_n?this.value="":this.value=this.operator+this.semver.version,ms("comp",this)}parse(e){let r=this.options.loose?wl[Sl.COMPARATORLOOSE]:wl[Sl.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new bl(n[2],this.options.loose):this.semver=_n}toString(){return this.value}test(e){if(ms("Comparator.test",e,this.options.loose),this.semver===_n||e===_n)return!0;if(typeof e=="string")try{e=new bl(e,this.options)}catch{return!1}return gs(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Wr))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Tl(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new Tl(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),u=gs(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=gs(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||s&&o||u||c}};Pl.exports=Wr;var mg=mn(),{re:wl,t:Sl}=lr(),gs=us(),ms=gn(),bl=Le(),Tl=ot()});var wn=w((M_,El)=>{var vg=ot(),yg=(t,e,r)=>{try{e=new vg(e,r)}catch{return!1}return e.test(t)};El.exports=yg});var xl=w((j_,Dl)=>{var Rg=ot(),Cg=(t,e)=>new Rg(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Dl.exports=Cg});var Ol=w(($_,ql)=>{var _g=Le(),wg=ot(),Sg=(t,e,r)=>{let n=null,i=null,s=null;try{s=new wg(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new _g(n,r))}),n};ql.exports=Sg});var Nl=w((W_,kl)=>{var bg=Le(),Tg=ot(),Pg=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Tg(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new bg(n,r))}),n};kl.exports=Pg});var Ll=w((H_,Fl)=>{var vs=Le(),Eg=ot(),Il=vn(),Dg=(t,e)=>{t=new Eg(t,e);let r=new vs("0.0.0");if(t.test(r)||(r=new vs("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let u=new vs(o.semver.version);switch(o.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!s||Il(u,s))&&(s=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Il(r,s))&&(r=s)}return r&&t.test(r)?r:null};Fl.exports=Dg});var Ml=w((z_,Al)=>{var xg=ot(),qg=(t,e)=>{try{return new xg(t,e).range||"*"}catch{return null}};Al.exports=qg});var di=w((K_,Hl)=>{var Og=Le(),Wl=Cn(),{ANY:kg}=Wl,Ng=ot(),Ig=wn(),jl=vn(),$l=si(),Fg=ai(),Lg=oi(),Ag=(t,e,r,n)=>{t=new Og(t,n),e=new Ng(e,n);let i,s,o,u,c;switch(r){case">":i=jl,s=Fg,o=$l,u=">",c=">=";break;case"<":i=$l,s=Lg,o=jl,u="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ig(t,e,n))return!1;for(let f=0;f<e.set.length;++f){let g=e.set[f],m=null,y=null;if(g.forEach(v=>{v.semver===kg&&(v=new Wl(">=0.0.0")),m=m||v,y=y||v,i(v.semver,m.semver,n)?m=v:o(v.semver,y.semver,n)&&(y=v)}),m.operator===u||m.operator===c||(!y.operator||y.operator===u)&&s(t,y.semver))return!1;if(y.operator===c&&o(t,y.semver))return!1}return!0};Hl.exports=Ag});var Kl=w((U_,zl)=>{var Mg=di(),jg=(t,e,r)=>Mg(t,e,">",r);zl.exports=jg});var Gl=w((G_,Ul)=>{var $g=di(),Wg=(t,e,r)=>$g(t,e,"<",r);Ul.exports=Wg});var Jl=w((B_,Xl)=>{var Bl=ot(),Hg=(t,e,r)=>(t=new Bl(t,r),e=new Bl(e,r),t.intersects(e));Xl.exports=Hg});var Yl=w((X_,Vl)=>{var zg=wn(),Kg=st();Vl.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((g,m)=>Kg(g,m,r));for(let g of o)zg(g,e,r)?(s=g,i||(i=g)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let u=[];for(let[g,m]of n)g===m?u.push(g):!m&&g===o[0]?u.push("*"):m?g===o[0]?u.push(`<=${m}`):u.push(`${g} - ${m}`):u.push(`>=${g}`);let c=u.join(" || "),f=typeof e.raw=="string"?e.raw:String(e);return c.length<f.length?c:e}});var rd=w((J_,td)=>{var Ql=ot(),fi=Cn(),{ANY:ys}=fi,Sn=wn(),Rs=st(),Ug=(t,e,r={})=>{if(t===e)return!0;t=new Ql(t,r),e=new Ql(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=Gg(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Gg=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===ys){if(e.length===1&&e[0].semver===ys)return!0;r.includePrerelease?t=[new fi(">=0.0.0-0")]:t=[new fi(">=0.0.0")]}if(e.length===1&&e[0].semver===ys){if(r.includePrerelease)return!0;e=[new fi(">=0.0.0")]}let n=new Set,i,s;for(let v of t)v.operator===">"||v.operator===">="?i=Zl(i,v,r):v.operator==="<"||v.operator==="<="?s=ed(s,v,r):n.add(v.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Rs(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let v of n){if(i&&!Sn(v,String(i),r)||s&&!Sn(v,String(s),r))return null;for(let D of e)if(!Sn(v,String(D),r))return!1;return!0}let u,c,f,g,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,y=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&s.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let v of e){if(g=g||v.operator===">"||v.operator===">=",f=f||v.operator==="<"||v.operator==="<=",i){if(y&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===y.major&&v.semver.minor===y.minor&&v.semver.patch===y.patch&&(y=!1),v.operator===">"||v.operator===">="){if(u=Zl(i,v,r),u===v&&u!==i)return!1}else if(i.operator===">="&&!Sn(i.semver,String(v),r))return!1}if(s){if(m&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===m.major&&v.semver.minor===m.minor&&v.semver.patch===m.patch&&(m=!1),v.operator==="<"||v.operator==="<="){if(c=ed(s,v,r),c===v&&c!==s)return!1}else if(s.operator==="<="&&!Sn(s.semver,String(v),r))return!1}if(!v.operator&&(s||i)&&o!==0)return!1}return!(i&&f&&!s&&o!==0||s&&g&&!i&&o!==0||y||m)},Zl=(t,e,r)=>{if(!t)return e;let n=Rs(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},ed=(t,e,r)=>{if(!t)return e;let n=Rs(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};td.exports=Ug});var id=w((V_,nd)=>{var Cs=lr();nd.exports={re:Cs.re,src:Cs.src,tokens:Cs.t,SEMVER_SPEC_VERSION:pn().SEMVER_SPEC_VERSION,SemVer:Le(),compareIdentifiers:ei().compareIdentifiers,rcompareIdentifiers:ei().rcompareIdentifiers,parse:dr(),valid:Tu(),clean:Eu(),inc:qu(),diff:Lu(),major:Mu(),minor:$u(),patch:Hu(),prerelease:Ku(),compare:st(),rcompare:Gu(),compareLoose:Xu(),compareBuild:ii(),sort:Qu(),rsort:el(),gt:vn(),lt:si(),eq:ni(),neq:cs(),gte:oi(),lte:ai(),cmp:us(),coerce:cl(),Comparator:Cn(),Range:ot(),satisfies:wn(),toComparators:xl(),maxSatisfying:Ol(),minSatisfying:Nl(),minVersion:Ll(),validRange:Ml(),outside:di(),gtr:Kl(),ltr:Gl(),intersects:Jl(),simplifyRange:Yl(),subset:rd()}});var Jt=w(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.asPromise=me.thenable=me.typedArray=me.stringArray=me.array=me.func=me.error=me.number=me.string=me.boolean=void 0;function Bg(t){return t===!0||t===!1}me.boolean=Bg;function sd(t){return typeof t=="string"||t instanceof String}me.string=sd;function Xg(t){return typeof t=="number"||t instanceof Number}me.number=Xg;function Jg(t){return t instanceof Error}me.error=Jg;function od(t){return typeof t=="function"}me.func=od;function ad(t){return Array.isArray(t)}me.array=ad;function Vg(t){return ad(t)&&t.every(e=>sd(e))}me.stringArray=Vg;function Yg(t,e){return Array.isArray(t)&&t.every(e)}me.typedArray=Yg;function cd(t){return t&&od(t.then)}me.thenable=cd;function Qg(t){return t instanceof Promise?t:cd(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}me.asPromise=Qg});var Mt=w(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});var _s;function ws(){if(_s===void 0)throw new Error("No runtime abstraction layer installed");return _s}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");_s=r}t.install=e})(ws||(ws={}));Ss.default=ws});var bs=w(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.Disposable=void 0;var Zg;(function(t){function e(r){return{dispose:r}}t.create=e})(Zg=bn.Disposable||(bn.Disposable={}))});var ud=w(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.AbstractMessageBuffer=void 0;var em=13,tm=10,rm=`\r
`,Ts=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){let c=this._chunks[r];n=0;t:for(;n<c.length;){switch(c[n]){case em:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case tm:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=c.byteLength,r++}if(e!==4)return;let s=this._read(i+n),o=new Map,u=this.toString(s,"ascii").split(rm);if(u.length<2)return o;for(let c=0;c<u.length-2;c++){let f=u[c],g=f.indexOf(":");if(g===-1)throw new Error("Message header must separate key and value using :");let m=f.substr(0,g),y=f.substr(g+1).trim();o.set(m,y)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);r.set(o,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};hi.AbstractMessageBuffer=Ts});var fd=w(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var nm=Mt(),ld=require("util"),mr=bs(),im=ud(),Hr=class extends im.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Hr.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new ld.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};Hr.emptyBuffer=Buffer.allocUnsafe(0);var Ps=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),mr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),mr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),mr.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),mr.Disposable.create(()=>this.stream.off("data",e))}},Es=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),mr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),mr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),mr.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let s=o=>{o==null?n():i(o)};typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},dd=Object.freeze({messageBuffer:Object.freeze({create:t=>new Hr(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new ld.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new Ps(t),asWritableStream:t=>new Es(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){return setTimeout(t,e,...r)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function Ds(){return dd}(function(t){function e(){nm.default.install(dd)}t.install=e})(Ds||(Ds={}));xs.default=Ds});var zr=w(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.stringArray=Ae.array=Ae.func=Ae.error=Ae.number=Ae.string=Ae.boolean=void 0;function sm(t){return t===!0||t===!1}Ae.boolean=sm;function hd(t){return typeof t=="string"||t instanceof String}Ae.string=hd;function om(t){return typeof t=="number"||t instanceof Number}Ae.number=om;function am(t){return t instanceof Error}Ae.error=am;function cm(t){return typeof t=="function"}Ae.func=cm;function pd(t){return Array.isArray(t)}Ae.array=pd;function um(t){return pd(t)&&t.every(e=>hd(e))}Ae.stringArray=um});var Qs=w(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.isResponseMessage=M.isNotificationMessage=M.isRequestMessage=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var vr=zr(),gd;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(gd=M.ErrorCodes||(M.ErrorCodes={}));var Tn=class extends Error{constructor(e,r,n){super(r),this.code=vr.number(e)?e:gd.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,Tn.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};M.ResponseError=Tn;var Te=class{constructor(e){this.kind=e}static is(e){return e===Te.auto||e===Te.byName||e===Te.byPosition}toString(){return this.kind}};M.ParameterStructures=Te;Te.auto=new Te("auto");Te.byPosition=new Te("byPosition");Te.byName=new Te("byName");var ue=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Te.auto}};M.AbstractMessageSignature=ue;var qs=class extends ue{constructor(e){super(e,0)}};M.RequestType0=qs;var Os=class extends ue{constructor(e,r=Te.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};M.RequestType=Os;var ks=class extends ue{constructor(e,r=Te.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};M.RequestType1=ks;var Ns=class extends ue{constructor(e){super(e,2)}};M.RequestType2=Ns;var Is=class extends ue{constructor(e){super(e,3)}};M.RequestType3=Is;var Fs=class extends ue{constructor(e){super(e,4)}};M.RequestType4=Fs;var Ls=class extends ue{constructor(e){super(e,5)}};M.RequestType5=Ls;var As=class extends ue{constructor(e){super(e,6)}};M.RequestType6=As;var Ms=class extends ue{constructor(e){super(e,7)}};M.RequestType7=Ms;var js=class extends ue{constructor(e){super(e,8)}};M.RequestType8=js;var $s=class extends ue{constructor(e){super(e,9)}};M.RequestType9=$s;var Ws=class extends ue{constructor(e,r=Te.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};M.NotificationType=Ws;var Hs=class extends ue{constructor(e){super(e,0)}};M.NotificationType0=Hs;var zs=class extends ue{constructor(e,r=Te.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=zs;var Ks=class extends ue{constructor(e){super(e,2)}};M.NotificationType2=Ks;var Us=class extends ue{constructor(e){super(e,3)}};M.NotificationType3=Us;var Gs=class extends ue{constructor(e){super(e,4)}};M.NotificationType4=Gs;var Bs=class extends ue{constructor(e){super(e,5)}};M.NotificationType5=Bs;var Xs=class extends ue{constructor(e){super(e,6)}};M.NotificationType6=Xs;var Js=class extends ue{constructor(e){super(e,7)}};M.NotificationType7=Js;var Vs=class extends ue{constructor(e){super(e,8)}};M.NotificationType8=Vs;var Ys=class extends ue{constructor(e){super(e,9)}};M.NotificationType9=Ys;function lm(t){let e=t;return e&&vr.string(e.method)&&(vr.string(e.id)||vr.number(e.id))}M.isRequestMessage=lm;function dm(t){let e=t;return e&&vr.string(e.method)&&t.id===void 0}M.isNotificationMessage=dm;function fm(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(vr.string(e.id)||vr.number(e.id)||e.id===null)}M.isResponseMessage=fm});var Ur=w(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.Emitter=yr.Event=void 0;var hm=Mt(),pm;(function(t){let e={dispose(){}};t.None=function(){return e}})(pm=yr.Event||(yr.Event={}));var Zs=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{r.push(n[s].apply(i[s],e))}catch(u){hm.default().console.error(u)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Kr=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Zs),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,r),i.dispose=Kr._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};yr.Emitter=Kr;Kr._noop=function(){}});var no=w(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.CancellationTokenSource=Rr.CancellationToken=void 0;var md=Mt(),gm=zr(),eo=Ur(),to;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:eo.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:eo.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||gm.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(to=Rr.CancellationToken||(Rr.CancellationToken={}));var mm=Object.freeze(function(t,e){let r=md.default().timer.setTimeout(t.bind(e),0);return{dispose(){md.default().timer.clearTimeout(r)}}}),pi=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?mm:(this._emitter||(this._emitter=new eo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ro=class{get token(){return this._token||(this._token=new pi),this._token}cancel(){this._token?this._token.cancel():this._token=to.Cancelled}dispose(){this._token?this._token instanceof pi&&this._token.dispose():this._token=to.None}};Rr.CancellationTokenSource=ro});var vd=w(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.ReadableStreamMessageReader=jt.AbstractMessageReader=jt.MessageReader=void 0;var gi=Mt(),Gr=zr(),io=Ur(),vm;(function(t){function e(r){let n=r;return n&&Gr.func(n.listen)&&Gr.func(n.dispose)&&Gr.func(n.onError)&&Gr.func(n.onClose)&&Gr.func(n.onPartialMessage)}t.is=e})(vm=jt.MessageReader||(jt.MessageReader={}));var mi=class{constructor(){this.errorEmitter=new io.Emitter,this.closeEmitter=new io.Emitter,this.partialMessageEmitter=new io.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Gr.string(e.message)?e.message:"unknown"}`)}};jt.AbstractMessageReader=mi;var so;(function(t){function e(r){var n;let i,s,o,u=new Map,c,f=new Map;if(r===void 0||typeof r=="string")i=r??"utf-8";else{if(i=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,u.set(o.name,o)),r.contentDecoders!==void 0)for(let g of r.contentDecoders)u.set(g.name,g);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,f.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let g of r.contentTypeDecoders)f.set(g.name,g)}return c===void 0&&(c=gi.default().applicationJson.decoder,f.set(c.name,c)),{charset:i,contentDecoder:o,contentDecoders:u,contentTypeDecoder:c,contentTypeDecoders:f}}t.fromOptions=e})(so||(so={}));var oo=class extends mi{constructor(e,r){super(),this.readable=e,this.options=so.fromOptions(r),this.buffer=gi.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(gi.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=gi.default().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};jt.ReadableStreamMessageReader=oo});var yd=w(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.Semaphore=void 0;var ym=Mt(),ao=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||ym.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};vi.Semaphore=ao});var wd=w($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.WriteableStreamMessageWriter=$t.AbstractMessageWriter=$t.MessageWriter=void 0;var Rd=Mt(),Pn=zr(),Rm=yd(),Cd=Ur(),Cm="Content-Length: ",_d=`\r
`,_m;(function(t){function e(r){let n=r;return n&&Pn.func(n.dispose)&&Pn.func(n.onClose)&&Pn.func(n.onError)&&Pn.func(n.write)}t.is=e})(_m=$t.MessageWriter||($t.MessageWriter={}));var yi=class{constructor(){this.errorEmitter=new Cd.Emitter,this.closeEmitter=new Cd.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Pn.string(e.message)?e.message:"unknown"}`)}};$t.AbstractMessageWriter=yi;var co;(function(t){function e(r){var n,i;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:Rd.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(i=r.contentTypeEncoder)!==null&&i!==void 0?i:Rd.default().applicationJson.encoder}}t.fromOptions=e})(co||(co={}));var uo=class extends yi{constructor(e,r){super(),this.writable=e,this.options=co.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Rm.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(Cm,n.byteLength.toString(),_d),i.push(_d),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};$t.WriteableStreamMessageWriter=uo});var Sd=w(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.LRUCache=Wt.LinkedMap=Wt.Touch=void 0;var ze;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(ze=Wt.Touch||(Wt.Touch={}));var Ri=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,r=ze.None){let n=this._map.get(e);if(!!n)return r!==ze.None&&this.touch(n,r),n.value}set(e,r,n=ze.None){let i=this._map.get(e);if(i)i.value=r,n!==ze.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case ze.None:this.addItemLast(i);break;case ze.First:this.addItemFirst(i);break;case ze.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==ze.First&&r!==ze.Last)){if(r===ze.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===ze.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Wt.LinkedMap=Ri;var lo=class extends Ri{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=ze.AsNew){return super.get(e,r)}peek(e){return super.get(e,ze.None)}set(e,r){return super.set(e,r,ze.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Wt.LRUCache=lo});var Dd=w(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.createMessageConnection=U.ConnectionOptions=U.CancellationStrategy=U.CancellationSenderStrategy=U.CancellationReceiverStrategy=U.ConnectionStrategy=U.ConnectionError=U.ConnectionErrors=U.LogTraceNotification=U.SetTraceNotification=U.TraceFormat=U.Trace=U.NullLogger=U.ProgressType=void 0;var bd=Mt(),Pe=zr(),K=Qs(),Td=Sd(),En=Ur(),fo=no(),Dn;(function(t){t.type=new K.NotificationType("$/cancelRequest")})(Dn||(Dn={}));var _i;(function(t){t.type=new K.NotificationType("$/progress")})(_i||(_i={}));var ho=class{constructor(){}};U.ProgressType=ho;var po;(function(t){function e(r){return Pe.func(r)}t.is=e})(po||(po={}));U.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Re;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(Re=U.Trace||(U.Trace={}));(function(t){function e(n){if(!Pe.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(Re=U.Trace||(U.Trace={}));var dt;(function(t){t.Text="text",t.JSON="json"})(dt=U.TraceFormat||(U.TraceFormat={}));(function(t){function e(r){return r=r.toLowerCase(),r==="json"?t.JSON:t.Text}t.fromString=e})(dt=U.TraceFormat||(U.TraceFormat={}));var Pd;(function(t){t.type=new K.NotificationType("$/setTrace")})(Pd=U.SetTraceNotification||(U.SetTraceNotification={}));var go;(function(t){t.type=new K.NotificationType("$/logTrace")})(go=U.LogTraceNotification||(U.LogTraceNotification={}));var Ci;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Ci=U.ConnectionErrors||(U.ConnectionErrors={}));var Vt=class extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,Vt.prototype)}};U.ConnectionError=Vt;var Ed;(function(t){function e(r){let n=r;return n&&Pe.func(n.cancelUndispatched)}t.is=e})(Ed=U.ConnectionStrategy||(U.ConnectionStrategy={}));var mo;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new fo.CancellationTokenSource}});function e(r){let n=r;return n&&Pe.func(n.createCancellationTokenSource)}t.is=e})(mo=U.CancellationReceiverStrategy||(U.CancellationReceiverStrategy={}));var vo;(function(t){t.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(Dn.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Pe.func(n.sendCancellation)&&Pe.func(n.cleanup)}t.is=e})(vo=U.CancellationSenderStrategy||(U.CancellationSenderStrategy={}));var yo;(function(t){t.Message=Object.freeze({receiver:mo.Message,sender:vo.Message});function e(r){let n=r;return n&&mo.is(n.receiver)&&vo.is(n.sender)}t.is=e})(yo=U.CancellationStrategy||(U.CancellationStrategy={}));var wm;(function(t){function e(r){let n=r;return n&&(yo.is(n.cancellationStrategy)||Ed.is(n.connectionStrategy))}t.is=e})(wm=U.ConnectionOptions||(U.ConnectionOptions={}));var ft;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(ft||(ft={}));function Sm(t,e,r,n){let i=r!==void 0?r:U.NullLogger,s=0,o=0,u=0,c="2.0",f,g=Object.create(null),m,y=Object.create(null),v=new Map,D,q=new Td.LinkedMap,z=Object.create(null),I=Object.create(null),E=Re.Off,O=dt.Text,T,re=ft.New,tt=new En.Emitter,Me=new En.Emitter,Ge=new En.Emitter,qe=new En.Emitter,Ve=new En.Emitter,je=n&&n.cancellationStrategy?n.cancellationStrategy:yo.Message;function Ot(p){if(p===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+p.toString()}function rt(p){return p===null?"res-unknown-"+(++u).toString():"res-"+p.toString()}function nt(){return"not-"+(++o).toString()}function Ye(p,S){K.isRequestMessage(S)?p.set(Ot(S.id),S):K.isResponseMessage(S)?p.set(rt(S.id),S):p.set(nt(),S)}function kt(p){}function ge(){return re===ft.Listening}function Nt(){return re===ft.Closed}function $e(){return re===ft.Disposed}function Rt(){(re===ft.New||re===ft.Listening)&&(re=ft.Closed,Me.fire(void 0))}function Ct(p){tt.fire([p,void 0,void 0])}function It(p){tt.fire(p)}t.onClose(Rt),t.onError(Ct),e.onClose(Rt),e.onError(It);function qr(){D||q.size===0||(D=bd.default().timer.setImmediate(()=>{D=void 0,Or()}))}function Or(){if(q.size===0)return;let p=q.shift();try{K.isRequestMessage(p)?sr(p):K.isNotificationMessage(p)?kr(p):K.isResponseMessage(p)?Bt(p):or(p)}finally{qr()}}let ir=p=>{try{if(K.isNotificationMessage(p)&&p.method===Dn.type.method){let S=Ot(p.params.id),P=q.get(S);if(K.isRequestMessage(P)){let W=n?.connectionStrategy,Q=W&&W.cancelUndispatched?W.cancelUndispatched(P,kt):void 0;if(Q&&(Q.error!==void 0||Q.result!==void 0)){q.delete(S),Q.id=P.id,_t(Q,p.method,Date.now()),e.write(Q);return}}}Ye(q,p)}finally{qr()}};function sr(p){if($e())return;function S(N,Y,Z){let ve={jsonrpc:c,id:p.id};N instanceof K.ResponseError?ve.error=N.toJson():ve.result=N===void 0?null:N,_t(ve,Y,Z),e.write(ve)}function P(N,Y,Z){let ve={jsonrpc:c,id:p.id,error:N.toJson()};_t(ve,Y,Z),e.write(ve)}function W(N,Y,Z){N===void 0&&(N=null);let ve={jsonrpc:c,id:p.id,result:N};_t(ve,Y,Z),e.write(ve)}Ir(p);let Q=g[p.method],l,R;Q&&(l=Q.type,R=Q.handler);let x=Date.now();if(R||f){let N=String(p.id),Y=je.receiver.createCancellationTokenSource(N);I[N]=Y;try{let Z;if(R)if(p.params===void 0){if(l!==void 0&&l.numberOfParams!==0){P(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${p.method} defines ${l.numberOfParams} params but recevied none.`),p.method,x);return}Z=R(Y.token)}else if(Array.isArray(p.params)){if(l!==void 0&&l.parameterStructures===K.ParameterStructures.byName){P(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${p.method} defines parameters by name but received parameters by position`),p.method,x);return}Z=R(...p.params,Y.token)}else{if(l!==void 0&&l.parameterStructures===K.ParameterStructures.byPosition){P(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${p.method} defines parameters by position but received parameters by name`),p.method,x);return}Z=R(p.params,Y.token)}else f&&(Z=f(p.method,p.params,Y.token));let ve=Z;Z?ve.then?ve.then(Oe=>{delete I[N],S(Oe,p.method,x)},Oe=>{delete I[N],Oe instanceof K.ResponseError?P(Oe,p.method,x):Oe&&Pe.string(Oe.message)?P(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${p.method} failed with message: ${Oe.message}`),p.method,x):P(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${p.method} failed unexpectedly without providing any details.`),p.method,x)}):(delete I[N],S(Z,p.method,x)):(delete I[N],W(Z,p.method,x))}catch(Z){delete I[N],Z instanceof K.ResponseError?S(Z,p.method,x):Z&&Pe.string(Z.message)?P(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${p.method} failed with message: ${Z.message}`),p.method,x):P(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${p.method} failed unexpectedly without providing any details.`),p.method,x)}}else P(new K.ResponseError(K.ErrorCodes.MethodNotFound,`Unhandled method ${p.method}`),p.method,x)}function Bt(p){if(!$e())if(p.id===null)p.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(p.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let S=String(p.id),P=z[S];if(fn(p,P),P){delete z[S];try{if(p.error){let W=p.error;P.reject(new K.ResponseError(W.code,W.message,W.data))}else if(p.result!==void 0)P.resolve(p.result);else throw new Error("Should never happen.")}catch(W){W.message?i.error(`Response handler '${P.method}' failed with message: ${W.message}`):i.error(`Response handler '${P.method}' failed unexpectedly.`)}}}}function kr(p){if($e())return;let S,P;if(p.method===Dn.type.method)P=W=>{let Q=W.id,l=I[String(Q)];l&&l.cancel()};else{let W=y[p.method];W&&(P=W.handler,S=W.type)}if(P||m)try{wt(p),P?p.params===void 0?(S!==void 0&&S.numberOfParams!==0&&S.parameterStructures!==K.ParameterStructures.byName&&i.error(`Notification ${p.method} defines ${S.numberOfParams} params but recevied none.`),P()):Array.isArray(p.params)?(S!==void 0&&(S.parameterStructures===K.ParameterStructures.byName&&i.error(`Notification ${p.method} defines parameters by name but received parameters by position`),S.numberOfParams!==p.params.length&&i.error(`Notification ${p.method} defines ${S.numberOfParams} params but received ${p.params.length} argumennts`)),P(...p.params)):(S!==void 0&&S.parameterStructures===K.ParameterStructures.byPosition&&i.error(`Notification ${p.method} defines parameters by position but received parameters by name`),P(p.params)):m&&m(p.method,p.params)}catch(W){W.message?i.error(`Notification handler '${p.method}' failed with message: ${W.message}`):i.error(`Notification handler '${p.method}' failed unexpectedly.`)}else Ge.fire(p)}function or(p){if(!p){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(p,null,4)}`);let S=p;if(Pe.string(S.id)||Pe.number(S.id)){let P=String(S.id),W=z[P];W&&W.reject(new Error("The received response has neither a result nor an error property."))}}function Nr(p){if(!(E===Re.Off||!T))if(O===dt.Text){let S;E===Re.Verbose&&p.params&&(S=`Params: ${JSON.stringify(p.params,null,4)}

`),T.log(`Sending request '${p.method} - (${p.id})'.`,S)}else Se("send-request",p)}function dn(p){if(!(E===Re.Off||!T))if(O===dt.Text){let S;E===Re.Verbose&&(p.params?S=`Params: ${JSON.stringify(p.params,null,4)}

`:S=`No parameters provided.

`),T.log(`Sending notification '${p.method}'.`,S)}else Se("send-notification",p)}function _t(p,S,P){if(!(E===Re.Off||!T))if(O===dt.Text){let W;E===Re.Verbose&&(p.error&&p.error.data?W=`Error data: ${JSON.stringify(p.error.data,null,4)}

`:p.result?W=`Result: ${JSON.stringify(p.result,null,4)}

`:p.error===void 0&&(W=`No result returned.

`)),T.log(`Sending response '${S} - (${p.id})'. Processing request took ${Date.now()-P}ms`,W)}else Se("send-response",p)}function Ir(p){if(!(E===Re.Off||!T))if(O===dt.Text){let S;E===Re.Verbose&&p.params&&(S=`Params: ${JSON.stringify(p.params,null,4)}

`),T.log(`Received request '${p.method} - (${p.id})'.`,S)}else Se("receive-request",p)}function wt(p){if(!(E===Re.Off||!T||p.method===go.type.method))if(O===dt.Text){let S;E===Re.Verbose&&(p.params?S=`Params: ${JSON.stringify(p.params,null,4)}

`:S=`No parameters provided.

`),T.log(`Received notification '${p.method}'.`,S)}else Se("receive-notification",p)}function fn(p,S){if(!(E===Re.Off||!T))if(O===dt.Text){let P;if(E===Re.Verbose&&(p.error&&p.error.data?P=`Error data: ${JSON.stringify(p.error.data,null,4)}

`:p.result?P=`Result: ${JSON.stringify(p.result,null,4)}

`:p.error===void 0&&(P=`No result returned.

`)),S){let W=p.error?` Request failed: ${p.error.message} (${p.error.code}).`:"";T.log(`Received response '${S.method} - (${p.id})' in ${Date.now()-S.timerStart}ms.${W}`,P)}else T.log(`Received response ${p.id} without active response promise.`,P)}else Se("receive-response",p)}function Se(p,S){if(!T||E===Re.Off)return;let P={isLSPMessage:!0,type:p,message:S,timestamp:Date.now()};T.log(P)}function it(){if(Nt())throw new Vt(Ci.Closed,"Connection is closed.");if($e())throw new Vt(Ci.Disposed,"Connection is disposed.")}function Fr(){if(ge())throw new Vt(Ci.AlreadyListening,"Connection is already listening")}function hn(){if(!ge())throw new Error("Call listen() first.")}function St(p){return p===void 0?null:p}function Lr(p){if(p!==null)return p}function ar(p){return p!=null&&!Array.isArray(p)&&typeof p=="object"}function bt(p,S){switch(p){case K.ParameterStructures.auto:return ar(S)?Lr(S):[St(S)];case K.ParameterStructures.byName:if(!ar(S))throw new Error("Recevied parameters by name but param is not an object literal.");return Lr(S);case K.ParameterStructures.byPosition:return[St(S)];default:throw new Error(`Unknown parameter structure ${p.toString()}`)}}function cr(p,S){let P,W=p.numberOfParams;switch(W){case 0:P=void 0;break;case 1:P=bt(p.parameterStructures,S[0]);break;default:P=[];for(let Q=0;Q<S.length&&Q<W;Q++)P.push(St(S[Q]));if(S.length<W)for(let Q=S.length;Q<W;Q++)P.push(null);break}return P}let Tt={sendNotification:(p,...S)=>{it();let P,W;if(Pe.string(p)){P=p;let l=S[0],R=0,x=K.ParameterStructures.auto;K.ParameterStructures.is(l)&&(R=1,x=l);let N=S.length,Y=N-R;switch(Y){case 0:W=void 0;break;case 1:W=bt(x,S[R]);break;default:if(x===K.ParameterStructures.byName)throw new Error(`Recevied ${Y} parameters for 'by Name' notification parameter structure.`);W=S.slice(R,N).map(Z=>St(Z));break}}else{let l=S;P=p.method,W=cr(p,l)}let Q={jsonrpc:c,method:P,params:W};dn(Q),e.write(Q)},onNotification:(p,S)=>{it();let P;return Pe.func(p)?m=p:S&&(Pe.string(p)?(P=p,y[p]={type:void 0,handler:S}):(P=p.method,y[p.method]={type:p,handler:S})),{dispose:()=>{P!==void 0?delete y[P]:m=void 0}}},onProgress:(p,S,P)=>{if(v.has(S))throw new Error(`Progress handler for token ${S} already registered`);return v.set(S,P),{dispose:()=>{v.delete(S)}}},sendProgress:(p,S,P)=>{Tt.sendNotification(_i.type,{token:S,value:P})},onUnhandledProgress:qe.event,sendRequest:(p,...S)=>{it(),hn();let P,W,Q;if(Pe.string(p)){P=p;let N=S[0],Y=S[S.length-1],Z=0,ve=K.ParameterStructures.auto;K.ParameterStructures.is(N)&&(Z=1,ve=N);let Oe=S.length;fo.CancellationToken.is(Y)&&(Oe=Oe-1,Q=Y);let Ft=Oe-Z;switch(Ft){case 0:W=void 0;break;case 1:W=bt(ve,S[Z]);break;default:if(ve===K.ParameterStructures.byName)throw new Error(`Recevied ${Ft} parameters for 'by Name' request parameter structure.`);W=S.slice(Z,Oe).map(ut=>St(ut));break}}else{let N=S;P=p.method,W=cr(p,N);let Y=p.numberOfParams;Q=fo.CancellationToken.is(N[Y])?N[Y]:void 0}let l=s++,R;return Q&&(R=Q.onCancellationRequested(()=>{je.sender.sendCancellation(Tt,l)})),new Promise((N,Y)=>{let Z={jsonrpc:c,id:l,method:P,params:W},ve=ut=>{N(ut),je.sender.cleanup(l),R?.dispose()},Oe=ut=>{Y(ut),je.sender.cleanup(l),R?.dispose()},Ft={method:P,timerStart:Date.now(),resolve:ve,reject:Oe};Nr(Z);try{e.write(Z)}catch(ut){Ft.reject(new K.ResponseError(K.ErrorCodes.MessageWriteError,ut.message?ut.message:"Unknown reason")),Ft=null}Ft&&(z[String(l)]=Ft)})},onRequest:(p,S)=>{it();let P=null;return po.is(p)?(P=void 0,f=p):Pe.string(p)?(P=null,S!==void 0&&(P=p,g[p]={handler:S,type:void 0})):S!==void 0&&(P=p.method,g[p.method]={type:p,handler:S}),{dispose:()=>{P!==null&&(P!==void 0?delete g[P]:f=void 0)}}},trace:(p,S,P)=>{let W=!1,Q=dt.Text;P!==void 0&&(Pe.boolean(P)?W=P:(W=P.sendNotification||!1,Q=P.traceFormat||dt.Text)),E=p,O=Q,E===Re.Off?T=void 0:T=S,W&&!Nt()&&!$e()&&Tt.sendNotification(Pd.type,{value:Re.toString(p)})},onError:tt.event,onClose:Me.event,onUnhandledNotification:Ge.event,onDispose:Ve.event,end:()=>{e.end()},dispose:()=>{if($e())return;re=ft.Disposed,Ve.fire(void 0);let p=new Error("Connection got disposed.");Object.keys(z).forEach(S=>{z[S].reject(p)}),z=Object.create(null),I=Object.create(null),q=new Td.LinkedMap,Pe.func(e.dispose)&&e.dispose(),Pe.func(t.dispose)&&t.dispose()},listen:()=>{it(),Fr(),re=ft.Listening,t.listen(ir)},inspect:()=>{bd.default().console.log("inspect")}};return Tt.onNotification(go.type,p=>{E===Re.Off||!T||T.log(p.message,E===Re.Verbose?p.verbose:void 0)}),Tt.onNotification(_i.type,p=>{let S=v.get(p.token);S?S(p.value):qe.fire(p)}),Tt}U.createMessageConnection=Sm});var _o=w(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.CancellationSenderStrategy=b.CancellationReceiverStrategy=b.ConnectionError=b.ConnectionErrors=b.LogTraceNotification=b.SetTraceNotification=b.TraceFormat=b.Trace=b.ProgressType=b.createMessageConnection=b.NullLogger=b.ConnectionOptions=b.ConnectionStrategy=b.WriteableStreamMessageWriter=b.AbstractMessageWriter=b.MessageWriter=b.ReadableStreamMessageReader=b.AbstractMessageReader=b.MessageReader=b.CancellationToken=b.CancellationTokenSource=b.Emitter=b.Event=b.Disposable=b.ParameterStructures=b.NotificationType9=b.NotificationType8=b.NotificationType7=b.NotificationType6=b.NotificationType5=b.NotificationType4=b.NotificationType3=b.NotificationType2=b.NotificationType1=b.NotificationType0=b.NotificationType=b.ErrorCodes=b.ResponseError=b.RequestType9=b.RequestType8=b.RequestType7=b.RequestType6=b.RequestType5=b.RequestType4=b.RequestType3=b.RequestType2=b.RequestType1=b.RequestType0=b.RequestType=b.RAL=void 0;b.CancellationStrategy=void 0;var le=Qs();Object.defineProperty(b,"RequestType",{enumerable:!0,get:function(){return le.RequestType}});Object.defineProperty(b,"RequestType0",{enumerable:!0,get:function(){return le.RequestType0}});Object.defineProperty(b,"RequestType1",{enumerable:!0,get:function(){return le.RequestType1}});Object.defineProperty(b,"RequestType2",{enumerable:!0,get:function(){return le.RequestType2}});Object.defineProperty(b,"RequestType3",{enumerable:!0,get:function(){return le.RequestType3}});Object.defineProperty(b,"RequestType4",{enumerable:!0,get:function(){return le.RequestType4}});Object.defineProperty(b,"RequestType5",{enumerable:!0,get:function(){return le.RequestType5}});Object.defineProperty(b,"RequestType6",{enumerable:!0,get:function(){return le.RequestType6}});Object.defineProperty(b,"RequestType7",{enumerable:!0,get:function(){return le.RequestType7}});Object.defineProperty(b,"RequestType8",{enumerable:!0,get:function(){return le.RequestType8}});Object.defineProperty(b,"RequestType9",{enumerable:!0,get:function(){return le.RequestType9}});Object.defineProperty(b,"ResponseError",{enumerable:!0,get:function(){return le.ResponseError}});Object.defineProperty(b,"ErrorCodes",{enumerable:!0,get:function(){return le.ErrorCodes}});Object.defineProperty(b,"NotificationType",{enumerable:!0,get:function(){return le.NotificationType}});Object.defineProperty(b,"NotificationType0",{enumerable:!0,get:function(){return le.NotificationType0}});Object.defineProperty(b,"NotificationType1",{enumerable:!0,get:function(){return le.NotificationType1}});Object.defineProperty(b,"NotificationType2",{enumerable:!0,get:function(){return le.NotificationType2}});Object.defineProperty(b,"NotificationType3",{enumerable:!0,get:function(){return le.NotificationType3}});Object.defineProperty(b,"NotificationType4",{enumerable:!0,get:function(){return le.NotificationType4}});Object.defineProperty(b,"NotificationType5",{enumerable:!0,get:function(){return le.NotificationType5}});Object.defineProperty(b,"NotificationType6",{enumerable:!0,get:function(){return le.NotificationType6}});Object.defineProperty(b,"NotificationType7",{enumerable:!0,get:function(){return le.NotificationType7}});Object.defineProperty(b,"NotificationType8",{enumerable:!0,get:function(){return le.NotificationType8}});Object.defineProperty(b,"NotificationType9",{enumerable:!0,get:function(){return le.NotificationType9}});Object.defineProperty(b,"ParameterStructures",{enumerable:!0,get:function(){return le.ParameterStructures}});var bm=bs();Object.defineProperty(b,"Disposable",{enumerable:!0,get:function(){return bm.Disposable}});var xd=Ur();Object.defineProperty(b,"Event",{enumerable:!0,get:function(){return xd.Event}});Object.defineProperty(b,"Emitter",{enumerable:!0,get:function(){return xd.Emitter}});var qd=no();Object.defineProperty(b,"CancellationTokenSource",{enumerable:!0,get:function(){return qd.CancellationTokenSource}});Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return qd.CancellationToken}});var Ro=vd();Object.defineProperty(b,"MessageReader",{enumerable:!0,get:function(){return Ro.MessageReader}});Object.defineProperty(b,"AbstractMessageReader",{enumerable:!0,get:function(){return Ro.AbstractMessageReader}});Object.defineProperty(b,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Ro.ReadableStreamMessageReader}});var Co=wd();Object.defineProperty(b,"MessageWriter",{enumerable:!0,get:function(){return Co.MessageWriter}});Object.defineProperty(b,"AbstractMessageWriter",{enumerable:!0,get:function(){return Co.AbstractMessageWriter}});Object.defineProperty(b,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Co.WriteableStreamMessageWriter}});var Xe=Dd();Object.defineProperty(b,"ConnectionStrategy",{enumerable:!0,get:function(){return Xe.ConnectionStrategy}});Object.defineProperty(b,"ConnectionOptions",{enumerable:!0,get:function(){return Xe.ConnectionOptions}});Object.defineProperty(b,"NullLogger",{enumerable:!0,get:function(){return Xe.NullLogger}});Object.defineProperty(b,"createMessageConnection",{enumerable:!0,get:function(){return Xe.createMessageConnection}});Object.defineProperty(b,"ProgressType",{enumerable:!0,get:function(){return Xe.ProgressType}});Object.defineProperty(b,"Trace",{enumerable:!0,get:function(){return Xe.Trace}});Object.defineProperty(b,"TraceFormat",{enumerable:!0,get:function(){return Xe.TraceFormat}});Object.defineProperty(b,"SetTraceNotification",{enumerable:!0,get:function(){return Xe.SetTraceNotification}});Object.defineProperty(b,"LogTraceNotification",{enumerable:!0,get:function(){return Xe.LogTraceNotification}});Object.defineProperty(b,"ConnectionErrors",{enumerable:!0,get:function(){return Xe.ConnectionErrors}});Object.defineProperty(b,"ConnectionError",{enumerable:!0,get:function(){return Xe.ConnectionError}});Object.defineProperty(b,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Xe.CancellationReceiverStrategy}});Object.defineProperty(b,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Xe.CancellationSenderStrategy}});Object.defineProperty(b,"CancellationStrategy",{enumerable:!0,get:function(){return Xe.CancellationStrategy}});var Tm=Mt();b.RAL=Tm.default});var Xr=w(ne=>{"use strict";var Pm=ne&&ne.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Em=ne&&ne.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Pm(e,t,r)};Object.defineProperty(ne,"__esModule",{value:!0});ne.createMessageConnection=ne.createServerSocketTransport=ne.createClientSocketTransport=ne.createServerPipeTransport=ne.createClientPipeTransport=ne.generateRandomPipeName=ne.StreamMessageWriter=ne.StreamMessageReader=ne.SocketMessageWriter=ne.SocketMessageReader=ne.IPCMessageWriter=ne.IPCMessageReader=void 0;var Br=fd();Br.default.install();var Pt=_o(),Od=require("path"),Dm=require("os"),xm=require("crypto"),bi=require("net");Em(_o(),ne);var wo=class extends Pt.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Pt.Disposable.create(()=>this.process.off("message",e))}};ne.IPCMessageReader=wo;var So=class extends Pt.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};ne.IPCMessageWriter=So;var Cr=class extends Pt.ReadableStreamMessageReader{constructor(e,r="utf-8"){super(Br.default().stream.asReadableStream(e),r)}};ne.SocketMessageReader=Cr;var _r=class extends Pt.WriteableStreamMessageWriter{constructor(e,r){super(Br.default().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ne.SocketMessageWriter=_r;var wi=class extends Pt.ReadableStreamMessageReader{constructor(e,r){super(Br.default().stream.asReadableStream(e),r)}};ne.StreamMessageReader=wi;var Si=class extends Pt.WriteableStreamMessageWriter{constructor(e,r){super(Br.default().stream.asWritableStream(e),r)}};ne.StreamMessageWriter=Si;var kd=process.env.XDG_RUNTIME_DIR,qm=new Map([["linux",107],["darwin",103]]);function Om(){let t=xm.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;kd?e=Od.join(kd,`vscode-ipc-${t}.sock`):e=Od.join(Dm.tmpdir(),`vscode-${t}.sock`);let r=qm.get(process.platform);return r!==void 0&&e.length>=r&&Br.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}ne.generateRandomPipeName=Om;function km(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=bi.createServer(u=>{o.close(),r([new Cr(u,e),new _r(u,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}ne.createClientPipeTransport=km;function Nm(t,e="utf-8"){let r=bi.createConnection(t);return[new Cr(r,e),new _r(r,e)]}ne.createServerPipeTransport=Nm;function Im(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=bi.createServer(u=>{o.close(),r([new Cr(u,e),new _r(u,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}ne.createClientSocketTransport=Im;function Fm(t,e="utf-8"){let r=bi.createConnection(t,"127.0.0.1");return[new Cr(r,e),new _r(r,e)]}ne.createServerSocketTransport=Fm;function Lm(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function Am(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function Mm(t,e,r,n){r||(r=Pt.NullLogger);let i=Lm(t)?new wi(t):t,s=Am(e)?new Si(e):e;return Pt.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),Pt.createMessageConnection(i,s,r,n)}ne.createMessageConnection=Mm});var bo=w((hw,Nd)=>{"use strict";Nd.exports=Xr()});var Fd={};ou(Fd,{AnnotatedTextEdit:()=>Ht,ChangeAnnotation:()=>wr,ChangeAnnotationIdentifier:()=>ke,CodeAction:()=>ta,CodeActionContext:()=>ea,CodeActionKind:()=>Zo,CodeDescription:()=>No,CodeLens:()=>ra,Color:()=>Ei,ColorInformation:()=>Eo,ColorPresentation:()=>Do,Command:()=>Jr,CompletionItem:()=>Ho,CompletionItemKind:()=>Ao,CompletionItemTag:()=>jo,CompletionList:()=>zo,CreateFile:()=>Vr,DeleteFile:()=>Qr,Diagnostic:()=>qn,DiagnosticRelatedInformation:()=>Di,DiagnosticSeverity:()=>Oo,DiagnosticTag:()=>ko,DocumentHighlight:()=>Xo,DocumentHighlightKind:()=>Bo,DocumentLink:()=>ia,DocumentSymbol:()=>Qo,EOL:()=>$m,FoldingRange:()=>qo,FoldingRangeKind:()=>xo,FormattingOptions:()=>na,Hover:()=>Ko,InsertReplaceEdit:()=>$o,InsertTextFormat:()=>Mo,InsertTextMode:()=>Wo,Location:()=>Pi,LocationLink:()=>Po,MarkedString:()=>Nn,MarkupContent:()=>qi,MarkupKind:()=>Zr,OptionalVersionedTextDocumentIdentifier:()=>kn,ParameterInformation:()=>Uo,Position:()=>ht,Range:()=>Ee,RenameFile:()=>Yr,SelectionRange:()=>sa,SignatureInformation:()=>Go,SymbolInformation:()=>Yo,SymbolKind:()=>Jo,SymbolTag:()=>Vo,TextDocument:()=>oa,TextDocumentEdit:()=>On,TextDocumentIdentifier:()=>Io,TextDocumentItem:()=>Lo,TextEdit:()=>zt,VersionedTextDocumentIdentifier:()=>Fo,WorkspaceChange:()=>jm,WorkspaceEdit:()=>xi,integer:()=>To,uinteger:()=>xn});var To,xn,ht,Ee,Pi,Po,Ei,Eo,Do,xo,qo,Di,Oo,ko,No,qn,Jr,zt,wr,ke,Ht,On,Vr,Yr,Qr,xi,Ti,Id,jm,Io,Fo,kn,Lo,Zr,qi,Ao,Mo,jo,$o,Wo,Ho,zo,Nn,Ko,Uo,Go,Bo,Xo,Jo,Vo,Yo,Qo,Zo,ea,ta,ra,na,ia,sa,$m,oa,Wm,C,Ld=jh(()=>{"use strict";(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(To||(To={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(xn||(xn={}));(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=xn.MAX_VALUE),i===Number.MAX_VALUE&&(i=xn.MAX_VALUE),{line:n,character:i}}t.create=e;function r(n){var i=n;return C.objectLiteral(i)&&C.uinteger(i.line)&&C.uinteger(i.character)}t.is=r})(ht||(ht={}));(function(t){function e(n,i,s,o){if(C.uinteger(n)&&C.uinteger(i)&&C.uinteger(s)&&C.uinteger(o))return{start:ht.create(n,i),end:ht.create(s,o)};if(ht.is(n)&&ht.is(i))return{start:n,end:i};throw new Error("Range#create called with invalid arguments["+n+", "+i+", "+s+", "+o+"]")}t.create=e;function r(n){var i=n;return C.objectLiteral(i)&&ht.is(i.start)&&ht.is(i.end)}t.is=r})(Ee||(Ee={}));(function(t){function e(n,i){return{uri:n,range:i}}t.create=e;function r(n){var i=n;return C.defined(i)&&Ee.is(i.range)&&(C.string(i.uri)||C.undefined(i.uri))}t.is=r})(Pi||(Pi={}));(function(t){function e(n,i,s,o){return{targetUri:n,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}t.create=e;function r(n){var i=n;return C.defined(i)&&Ee.is(i.targetRange)&&C.string(i.targetUri)&&(Ee.is(i.targetSelectionRange)||C.undefined(i.targetSelectionRange))&&(Ee.is(i.originSelectionRange)||C.undefined(i.originSelectionRange))}t.is=r})(Po||(Po={}));(function(t){function e(n,i,s,o){return{red:n,green:i,blue:s,alpha:o}}t.create=e;function r(n){var i=n;return C.numberRange(i.red,0,1)&&C.numberRange(i.green,0,1)&&C.numberRange(i.blue,0,1)&&C.numberRange(i.alpha,0,1)}t.is=r})(Ei||(Ei={}));(function(t){function e(n,i){return{range:n,color:i}}t.create=e;function r(n){var i=n;return Ee.is(i.range)&&Ei.is(i.color)}t.is=r})(Eo||(Eo={}));(function(t){function e(n,i,s){return{label:n,textEdit:i,additionalTextEdits:s}}t.create=e;function r(n){var i=n;return C.string(i.label)&&(C.undefined(i.textEdit)||zt.is(i))&&(C.undefined(i.additionalTextEdits)||C.typedArray(i.additionalTextEdits,zt.is))}t.is=r})(Do||(Do={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(xo||(xo={}));(function(t){function e(n,i,s,o,u){var c={startLine:n,endLine:i};return C.defined(s)&&(c.startCharacter=s),C.defined(o)&&(c.endCharacter=o),C.defined(u)&&(c.kind=u),c}t.create=e;function r(n){var i=n;return C.uinteger(i.startLine)&&C.uinteger(i.startLine)&&(C.undefined(i.startCharacter)||C.uinteger(i.startCharacter))&&(C.undefined(i.endCharacter)||C.uinteger(i.endCharacter))&&(C.undefined(i.kind)||C.string(i.kind))}t.is=r})(qo||(qo={}));(function(t){function e(n,i){return{location:n,message:i}}t.create=e;function r(n){var i=n;return C.defined(i)&&Pi.is(i.location)&&C.string(i.message)}t.is=r})(Di||(Di={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Oo||(Oo={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(ko||(ko={}));(function(t){function e(r){var n=r;return n!=null&&C.string(n.href)}t.is=e})(No||(No={}));(function(t){function e(n,i,s,o,u,c){var f={range:n,message:i};return C.defined(s)&&(f.severity=s),C.defined(o)&&(f.code=o),C.defined(u)&&(f.source=u),C.defined(c)&&(f.relatedInformation=c),f}t.create=e;function r(n){var i,s=n;return C.defined(s)&&Ee.is(s.range)&&C.string(s.message)&&(C.number(s.severity)||C.undefined(s.severity))&&(C.integer(s.code)||C.string(s.code)||C.undefined(s.code))&&(C.undefined(s.codeDescription)||C.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(C.string(s.source)||C.undefined(s.source))&&(C.undefined(s.relatedInformation)||C.typedArray(s.relatedInformation,Di.is))}t.is=r})(qn||(qn={}));(function(t){function e(n,i){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var u={title:n,command:i};return C.defined(s)&&s.length>0&&(u.arguments=s),u}t.create=e;function r(n){var i=n;return C.defined(i)&&C.string(i.title)&&C.string(i.command)}t.is=r})(Jr||(Jr={}));(function(t){function e(s,o){return{range:s,newText:o}}t.replace=e;function r(s,o){return{range:{start:s,end:s},newText:o}}t.insert=r;function n(s){return{range:s,newText:""}}t.del=n;function i(s){var o=s;return C.objectLiteral(o)&&C.string(o.newText)&&Ee.is(o.range)}t.is=i})(zt||(zt={}));(function(t){function e(n,i,s){var o={label:n};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}t.create=e;function r(n){var i=n;return i!==void 0&&C.objectLiteral(i)&&C.string(i.label)&&(C.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(C.string(i.description)||i.description===void 0)}t.is=r})(wr||(wr={}));(function(t){function e(r){var n=r;return typeof n=="string"}t.is=e})(ke||(ke={}));(function(t){function e(s,o,u){return{range:s,newText:o,annotationId:u}}t.replace=e;function r(s,o,u){return{range:{start:s,end:s},newText:o,annotationId:u}}t.insert=r;function n(s,o){return{range:s,newText:"",annotationId:o}}t.del=n;function i(s){var o=s;return zt.is(o)&&(wr.is(o.annotationId)||ke.is(o.annotationId))}t.is=i})(Ht||(Ht={}));(function(t){function e(n,i){return{textDocument:n,edits:i}}t.create=e;function r(n){var i=n;return C.defined(i)&&kn.is(i.textDocument)&&Array.isArray(i.edits)}t.is=r})(On||(On={}));(function(t){function e(n,i,s){var o={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function r(n){var i=n;return i&&i.kind==="create"&&C.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||C.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||C.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ke.is(i.annotationId))}t.is=r})(Vr||(Vr={}));(function(t){function e(n,i,s,o){var u={kind:"rename",oldUri:n,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(u.options=s),o!==void 0&&(u.annotationId=o),u}t.create=e;function r(n){var i=n;return i&&i.kind==="rename"&&C.string(i.oldUri)&&C.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||C.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||C.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ke.is(i.annotationId))}t.is=r})(Yr||(Yr={}));(function(t){function e(n,i,s){var o={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function r(n){var i=n;return i&&i.kind==="delete"&&C.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||C.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||C.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||ke.is(i.annotationId))}t.is=r})(Qr||(Qr={}));(function(t){function e(r){var n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(i){return C.string(i.kind)?Vr.is(i)||Yr.is(i)||Qr.is(i):On.is(i)}))}t.is=e})(xi||(xi={}));Ti=function(){function t(e,r){this.edits=e,this.changeAnnotations=r}return t.prototype.insert=function(e,r,n){var i,s;if(n===void 0?i=zt.insert(e,r):ke.is(n)?(s=n,i=Ht.insert(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Ht.insert(e,r,s)),this.edits.push(i),s!==void 0)return s},t.prototype.replace=function(e,r,n){var i,s;if(n===void 0?i=zt.replace(e,r):ke.is(n)?(s=n,i=Ht.replace(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Ht.replace(e,r,s)),this.edits.push(i),s!==void 0)return s},t.prototype.delete=function(e,r){var n,i;if(r===void 0?n=zt.del(e):ke.is(r)?(i=r,n=Ht.del(e,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=Ht.del(e,i)),this.edits.push(n),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Id=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,r){var n;if(ke.is(e)?n=e:(n=this.nextId(),r=e),this._annotations[n]!==void 0)throw new Error("Id "+n+" is already in use.");if(r===void 0)throw new Error("No annotation provided for id "+n);return this._annotations[n]=r,this._size++,n},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),jm=function(){function t(e){var r=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Id(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(n){if(On.is(n)){var i=new Ti(n.edits,r._changeAnnotations);r._textEditChanges[n.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(n){var i=new Ti(e.changes[n]);r._textEditChanges[n]=i})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(kn.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r={uri:e.uri,version:e.version},n=this._textEditChanges[r.uri];if(!n){var i=[],s={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(s),n=new Ti(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[e];if(!n){var i=[];this._workspaceEdit.changes[e]=i,n=new Ti(i),this._textEditChanges[e]=n}return n}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Id,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;wr.is(r)||ke.is(r)?i=r:n=r;var s,o;if(i===void 0?s=Vr.create(e,n):(o=ke.is(i)?i:this._changeAnnotations.manage(i),s=Vr.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t.prototype.renameFile=function(e,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;wr.is(n)||ke.is(n)?s=n:i=n;var o,u;if(s===void 0?o=Yr.create(e,r,i):(u=ke.is(s)?s:this._changeAnnotations.manage(s),o=Yr.create(e,r,i,u)),this._workspaceEdit.documentChanges.push(o),u!==void 0)return u},t.prototype.deleteFile=function(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;wr.is(r)||ke.is(r)?i=r:n=r;var s,o;if(i===void 0?s=Qr.create(e,n):(o=ke.is(i)?i:this._changeAnnotations.manage(i),s=Qr.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t}();(function(t){function e(n){return{uri:n}}t.create=e;function r(n){var i=n;return C.defined(i)&&C.string(i.uri)}t.is=r})(Io||(Io={}));(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){var i=n;return C.defined(i)&&C.string(i.uri)&&C.integer(i.version)}t.is=r})(Fo||(Fo={}));(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){var i=n;return C.defined(i)&&C.string(i.uri)&&(i.version===null||C.integer(i.version))}t.is=r})(kn||(kn={}));(function(t){function e(n,i,s,o){return{uri:n,languageId:i,version:s,text:o}}t.create=e;function r(n){var i=n;return C.defined(i)&&C.string(i.uri)&&C.string(i.languageId)&&C.integer(i.version)&&C.string(i.text)}t.is=r})(Lo||(Lo={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(Zr||(Zr={}));(function(t){function e(r){var n=r;return n===t.PlainText||n===t.Markdown}t.is=e})(Zr||(Zr={}));(function(t){function e(r){var n=r;return C.objectLiteral(r)&&Zr.is(n.kind)&&C.string(n.value)}t.is=e})(qi||(qi={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Ao||(Ao={}));(function(t){t.PlainText=1,t.Snippet=2})(Mo||(Mo={}));(function(t){t.Deprecated=1})(jo||(jo={}));(function(t){function e(n,i,s){return{newText:n,insert:i,replace:s}}t.create=e;function r(n){var i=n;return i&&C.string(i.newText)&&Ee.is(i.insert)&&Ee.is(i.replace)}t.is=r})($o||($o={}));(function(t){t.asIs=1,t.adjustIndentation=2})(Wo||(Wo={}));(function(t){function e(r){return{label:r}}t.create=e})(Ho||(Ho={}));(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}t.create=e})(zo||(zo={}));(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function r(n){var i=n;return C.string(i)||C.objectLiteral(i)&&C.string(i.language)&&C.string(i.value)}t.is=r})(Nn||(Nn={}));(function(t){function e(r){var n=r;return!!n&&C.objectLiteral(n)&&(qi.is(n.contents)||Nn.is(n.contents)||C.typedArray(n.contents,Nn.is))&&(r.range===void 0||Ee.is(r.range))}t.is=e})(Ko||(Ko={}));(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}t.create=e})(Uo||(Uo={}));(function(t){function e(r,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o={label:r};return C.defined(n)&&(o.documentation=n),C.defined(i)?o.parameters=i:o.parameters=[],o}t.create=e})(Go||(Go={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(Bo||(Bo={}));(function(t){function e(r,n){var i={range:r};return C.number(n)&&(i.kind=n),i}t.create=e})(Xo||(Xo={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Jo||(Jo={}));(function(t){t.Deprecated=1})(Vo||(Vo={}));(function(t){function e(r,n,i,s,o){var u={name:r,kind:n,location:{uri:s,range:i}};return o&&(u.containerName=o),u}t.create=e})(Yo||(Yo={}));(function(t){function e(n,i,s,o,u,c){var f={name:n,detail:i,kind:s,range:o,selectionRange:u};return c!==void 0&&(f.children=c),f}t.create=e;function r(n){var i=n;return i&&C.string(i.name)&&C.number(i.kind)&&Ee.is(i.range)&&Ee.is(i.selectionRange)&&(i.detail===void 0||C.string(i.detail))&&(i.deprecated===void 0||C.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=r})(Qo||(Qo={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Zo||(Zo={}));(function(t){function e(n,i){var s={diagnostics:n};return i!=null&&(s.only=i),s}t.create=e;function r(n){var i=n;return C.defined(i)&&C.typedArray(i.diagnostics,qn.is)&&(i.only===void 0||C.typedArray(i.only,C.string))}t.is=r})(ea||(ea={}));(function(t){function e(n,i,s){var o={title:n},u=!0;return typeof i=="string"?(u=!1,o.kind=i):Jr.is(i)?o.command=i:o.edit=i,u&&s!==void 0&&(o.kind=s),o}t.create=e;function r(n){var i=n;return i&&C.string(i.title)&&(i.diagnostics===void 0||C.typedArray(i.diagnostics,qn.is))&&(i.kind===void 0||C.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Jr.is(i.command))&&(i.isPreferred===void 0||C.boolean(i.isPreferred))&&(i.edit===void 0||xi.is(i.edit))}t.is=r})(ta||(ta={}));(function(t){function e(n,i){var s={range:n};return C.defined(i)&&(s.data=i),s}t.create=e;function r(n){var i=n;return C.defined(i)&&Ee.is(i.range)&&(C.undefined(i.command)||Jr.is(i.command))}t.is=r})(ra||(ra={}));(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}t.create=e;function r(n){var i=n;return C.defined(i)&&C.uinteger(i.tabSize)&&C.boolean(i.insertSpaces)}t.is=r})(na||(na={}));(function(t){function e(n,i,s){return{range:n,target:i,data:s}}t.create=e;function r(n){var i=n;return C.defined(i)&&Ee.is(i.range)&&(C.undefined(i.target)||C.string(i.target))}t.is=r})(ia||(ia={}));(function(t){function e(n,i){return{range:n,parent:i}}t.create=e;function r(n){var i=n;return i!==void 0&&Ee.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=r})(sa||(sa={}));$m=[`
`,`\r
`,"\r"];(function(t){function e(s,o,u,c){return new Wm(s,o,u,c)}t.create=e;function r(s){var o=s;return!!(C.defined(o)&&C.string(o.uri)&&(C.undefined(o.languageId)||C.string(o.languageId))&&C.uinteger(o.lineCount)&&C.func(o.getText)&&C.func(o.positionAt)&&C.func(o.offsetAt))}t.is=r;function n(s,o){for(var u=s.getText(),c=i(o,function(D,q){var z=D.range.start.line-q.range.start.line;return z===0?D.range.start.character-q.range.start.character:z}),f=u.length,g=c.length-1;g>=0;g--){var m=c[g],y=s.offsetAt(m.range.start),v=s.offsetAt(m.range.end);if(v<=f)u=u.substring(0,y)+m.newText+u.substring(v,u.length);else throw new Error("Overlapping edit");f=y}return u}t.applyEdits=n;function i(s,o){if(s.length<=1)return s;var u=s.length/2|0,c=s.slice(0,u),f=s.slice(u);i(c,o),i(f,o);for(var g=0,m=0,y=0;g<c.length&&m<f.length;){var v=o(c[g],f[m]);v<=0?s[y++]=c[g++]:s[y++]=f[m++]}for(;g<c.length;)s[y++]=c[g++];for(;m<f.length;)s[y++]=f[m++];return s}})(oa||(oa={}));Wm=function(){function t(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content},t.prototype.update=function(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],r=this._content,n=!0,i=0;i<r.length;i++){n&&(e.push(i),n=!1);var s=r.charAt(i);n=s==="\r"||s===`
`,s==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return ht.create(0,e);for(;n<i;){var s=Math.floor((n+i)/2);r[s]>e?i=s:n=s+1}var o=n-1;return ht.create(o,e-r[o])},t.prototype.offsetAt=function(e){var r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;var n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}();(function(t){var e=Object.prototype.toString;function r(v){return typeof v<"u"}t.defined=r;function n(v){return typeof v>"u"}t.undefined=n;function i(v){return v===!0||v===!1}t.boolean=i;function s(v){return e.call(v)==="[object String]"}t.string=s;function o(v){return e.call(v)==="[object Number]"}t.number=o;function u(v,D,q){return e.call(v)==="[object Number]"&&D<=v&&v<=q}t.numberRange=u;function c(v){return e.call(v)==="[object Number]"&&-2147483648<=v&&v<=2147483647}t.integer=c;function f(v){return e.call(v)==="[object Number]"&&0<=v&&v<=2147483647}t.uinteger=f;function g(v){return e.call(v)==="[object Function]"}t.func=g;function m(v){return v!==null&&typeof v=="object"}t.objectLiteral=m;function y(v,D){return Array.isArray(v)&&v.every(D)}t.typedArray=y})(C||(C={}))});var De=w(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.ProtocolNotificationType=at.ProtocolNotificationType0=at.ProtocolRequestType=at.ProtocolRequestType0=at.RegistrationType=void 0;var en=Xr(),aa=class{constructor(e){this.method=e}};at.RegistrationType=aa;var ca=class extends en.RequestType0{constructor(e){super(e)}};at.ProtocolRequestType0=ca;var ua=class extends en.RequestType{constructor(e){super(e,en.ParameterStructures.byName)}};at.ProtocolRequestType=ua;var la=class extends en.NotificationType0{constructor(e){super(e)}};at.ProtocolNotificationType0=la;var da=class extends en.NotificationType{constructor(e){super(e,en.ParameterStructures.byName)}};at.ProtocolNotificationType=da});var jd=w(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.objectLiteral=Ce.typedArray=Ce.stringArray=Ce.array=Ce.func=Ce.error=Ce.number=Ce.string=Ce.boolean=void 0;function Hm(t){return t===!0||t===!1}Ce.boolean=Hm;function Ad(t){return typeof t=="string"||t instanceof String}Ce.string=Ad;function zm(t){return typeof t=="number"||t instanceof Number}Ce.number=zm;function Km(t){return t instanceof Error}Ce.error=Km;function Um(t){return typeof t=="function"}Ce.func=Um;function Md(t){return Array.isArray(t)}Ce.array=Md;function Gm(t){return Md(t)&&t.every(e=>Ad(e))}Ce.stringArray=Gm;function Bm(t,e){return Array.isArray(t)&&t.every(e)}Ce.typedArray=Bm;function Xm(t){return t!==null&&typeof t=="object"}Ce.objectLiteral=Xm});var $d=w(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.ImplementationRequest=void 0;var Jm=De(),Vm;(function(t){t.method="textDocument/implementation",t.type=new Jm.ProtocolRequestType(t.method)})(Vm=In.ImplementationRequest||(In.ImplementationRequest={}))});var Wd=w(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.TypeDefinitionRequest=void 0;var Ym=De(),Qm;(function(t){t.method="textDocument/typeDefinition",t.type=new Ym.ProtocolRequestType(t.method)})(Qm=Fn.TypeDefinitionRequest||(Fn.TypeDefinitionRequest={}))});var zd=w(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.DidChangeWorkspaceFoldersNotification=Yt.WorkspaceFoldersRequest=void 0;var Hd=De(),Zm;(function(t){t.type=new Hd.ProtocolRequestType0("workspace/workspaceFolders")})(Zm=Yt.WorkspaceFoldersRequest||(Yt.WorkspaceFoldersRequest={}));var ev;(function(t){t.type=new Hd.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(ev=Yt.DidChangeWorkspaceFoldersNotification||(Yt.DidChangeWorkspaceFoldersNotification={}))});var Kd=w(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.ConfigurationRequest=void 0;var tv=De(),rv;(function(t){t.type=new tv.ProtocolRequestType("workspace/configuration")})(rv=Ln.ConfigurationRequest||(Ln.ConfigurationRequest={}))});var Gd=w(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ColorPresentationRequest=Qt.DocumentColorRequest=void 0;var Ud=De(),nv;(function(t){t.method="textDocument/documentColor",t.type=new Ud.ProtocolRequestType(t.method)})(nv=Qt.DocumentColorRequest||(Qt.DocumentColorRequest={}));var iv;(function(t){t.type=new Ud.ProtocolRequestType("textDocument/colorPresentation")})(iv=Qt.ColorPresentationRequest||(Qt.ColorPresentationRequest={}))});var Bd=w(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.FoldingRangeRequest=Zt.FoldingRangeKind=void 0;var sv=De(),ov;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(ov=Zt.FoldingRangeKind||(Zt.FoldingRangeKind={}));var av;(function(t){t.method="textDocument/foldingRange",t.type=new sv.ProtocolRequestType(t.method)})(av=Zt.FoldingRangeRequest||(Zt.FoldingRangeRequest={}))});var Xd=w(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.DeclarationRequest=void 0;var cv=De(),uv;(function(t){t.method="textDocument/declaration",t.type=new cv.ProtocolRequestType(t.method)})(uv=An.DeclarationRequest||(An.DeclarationRequest={}))});var Jd=w(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.SelectionRangeRequest=void 0;var lv=De(),dv;(function(t){t.method="textDocument/selectionRange",t.type=new lv.ProtocolRequestType(t.method)})(dv=Mn.SelectionRangeRequest||(Mn.SelectionRangeRequest={}))});var Yd=w(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.WorkDoneProgressCancelNotification=pt.WorkDoneProgressCreateRequest=pt.WorkDoneProgress=void 0;var fv=Xr(),Vd=De(),hv;(function(t){t.type=new fv.ProgressType;function e(r){return r===t.type}t.is=e})(hv=pt.WorkDoneProgress||(pt.WorkDoneProgress={}));var pv;(function(t){t.type=new Vd.ProtocolRequestType("window/workDoneProgress/create")})(pv=pt.WorkDoneProgressCreateRequest||(pt.WorkDoneProgressCreateRequest={}));var gv;(function(t){t.type=new Vd.ProtocolNotificationType("window/workDoneProgress/cancel")})(gv=pt.WorkDoneProgressCancelNotification||(pt.WorkDoneProgressCancelNotification={}))});var Qd=w(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.CallHierarchyOutgoingCallsRequest=gt.CallHierarchyIncomingCallsRequest=gt.CallHierarchyPrepareRequest=void 0;var fa=De(),mv;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new fa.ProtocolRequestType(t.method)})(mv=gt.CallHierarchyPrepareRequest||(gt.CallHierarchyPrepareRequest={}));var vv;(function(t){t.method="callHierarchy/incomingCalls",t.type=new fa.ProtocolRequestType(t.method)})(vv=gt.CallHierarchyIncomingCallsRequest||(gt.CallHierarchyIncomingCallsRequest={}));var yv;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new fa.ProtocolRequestType(t.method)})(yv=gt.CallHierarchyOutgoingCallsRequest||(gt.CallHierarchyOutgoingCallsRequest={}))});var Zd=w(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.SemanticTokensRefreshRequest=se.SemanticTokensRangeRequest=se.SemanticTokensDeltaRequest=se.SemanticTokensRequest=se.SemanticTokensRegistrationType=se.TokenFormat=se.SemanticTokens=se.SemanticTokenModifiers=se.SemanticTokenTypes=void 0;var jn=De(),Rv;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(Rv=se.SemanticTokenTypes||(se.SemanticTokenTypes={}));var Cv;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Cv=se.SemanticTokenModifiers||(se.SemanticTokenModifiers={}));var _v;(function(t){function e(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(_v=se.SemanticTokens||(se.SemanticTokens={}));var wv;(function(t){t.Relative="relative"})(wv=se.TokenFormat||(se.TokenFormat={}));var Sv;(function(t){t.method="textDocument/semanticTokens",t.type=new jn.RegistrationType(t.method)})(Sv=se.SemanticTokensRegistrationType||(se.SemanticTokensRegistrationType={}));var bv;(function(t){t.method="textDocument/semanticTokens/full",t.type=new jn.ProtocolRequestType(t.method)})(bv=se.SemanticTokensRequest||(se.SemanticTokensRequest={}));var Tv;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new jn.ProtocolRequestType(t.method)})(Tv=se.SemanticTokensDeltaRequest||(se.SemanticTokensDeltaRequest={}));var Pv;(function(t){t.method="textDocument/semanticTokens/range",t.type=new jn.ProtocolRequestType(t.method)})(Pv=se.SemanticTokensRangeRequest||(se.SemanticTokensRangeRequest={}));var Ev;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new jn.ProtocolRequestType0(t.method)})(Ev=se.SemanticTokensRefreshRequest||(se.SemanticTokensRefreshRequest={}))});var ef=w($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.ShowDocumentRequest=void 0;var Dv=De(),xv;(function(t){t.method="window/showDocument",t.type=new Dv.ProtocolRequestType(t.method)})(xv=$n.ShowDocumentRequest||($n.ShowDocumentRequest={}))});var tf=w(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.LinkedEditingRangeRequest=void 0;var qv=De(),Ov;(function(t){t.method="textDocument/linkedEditingRange",t.type=new qv.ProtocolRequestType(t.method)})(Ov=Wn.LinkedEditingRangeRequest||(Wn.LinkedEditingRangeRequest={}))});var rf=w(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.WillDeleteFilesRequest=he.DidDeleteFilesNotification=he.DidRenameFilesNotification=he.WillRenameFilesRequest=he.DidCreateFilesNotification=he.WillCreateFilesRequest=he.FileOperationPatternKind=void 0;var tn=De(),kv;(function(t){t.file="file",t.folder="folder"})(kv=he.FileOperationPatternKind||(he.FileOperationPatternKind={}));var Nv;(function(t){t.method="workspace/willCreateFiles",t.type=new tn.ProtocolRequestType(t.method)})(Nv=he.WillCreateFilesRequest||(he.WillCreateFilesRequest={}));var Iv;(function(t){t.method="workspace/didCreateFiles",t.type=new tn.ProtocolNotificationType(t.method)})(Iv=he.DidCreateFilesNotification||(he.DidCreateFilesNotification={}));var Fv;(function(t){t.method="workspace/willRenameFiles",t.type=new tn.ProtocolRequestType(t.method)})(Fv=he.WillRenameFilesRequest||(he.WillRenameFilesRequest={}));var Lv;(function(t){t.method="workspace/didRenameFiles",t.type=new tn.ProtocolNotificationType(t.method)})(Lv=he.DidRenameFilesNotification||(he.DidRenameFilesNotification={}));var Av;(function(t){t.method="workspace/didDeleteFiles",t.type=new tn.ProtocolNotificationType(t.method)})(Av=he.DidDeleteFilesNotification||(he.DidDeleteFilesNotification={}));var Mv;(function(t){t.method="workspace/willDeleteFiles",t.type=new tn.ProtocolRequestType(t.method)})(Mv=he.WillDeleteFilesRequest||(he.WillDeleteFilesRequest={}))});var nf=w(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.MonikerRequest=mt.MonikerKind=mt.UniquenessLevel=void 0;var jv=De(),$v;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})($v=mt.UniquenessLevel||(mt.UniquenessLevel={}));var Wv;(function(t){t.import="import",t.export="export",t.local="local"})(Wv=mt.MonikerKind||(mt.MonikerKind={}));var Hv;(function(t){t.method="textDocument/moniker",t.type=new jv.ProtocolRequestType(t.method)})(Hv=mt.MonikerRequest||(mt.MonikerRequest={}))});var uf=w(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.DocumentLinkRequest=d.CodeLensRefreshRequest=d.CodeLensResolveRequest=d.CodeLensRequest=d.WorkspaceSymbolRequest=d.CodeActionResolveRequest=d.CodeActionRequest=d.DocumentSymbolRequest=d.DocumentHighlightRequest=d.ReferencesRequest=d.DefinitionRequest=d.SignatureHelpRequest=d.SignatureHelpTriggerKind=d.HoverRequest=d.CompletionResolveRequest=d.CompletionRequest=d.CompletionTriggerKind=d.PublishDiagnosticsNotification=d.WatchKind=d.FileChangeType=d.DidChangeWatchedFilesNotification=d.WillSaveTextDocumentWaitUntilRequest=d.WillSaveTextDocumentNotification=d.TextDocumentSaveReason=d.DidSaveTextDocumentNotification=d.DidCloseTextDocumentNotification=d.DidChangeTextDocumentNotification=d.TextDocumentContentChangeEvent=d.DidOpenTextDocumentNotification=d.TextDocumentSyncKind=d.TelemetryEventNotification=d.LogMessageNotification=d.ShowMessageRequest=d.ShowMessageNotification=d.MessageType=d.DidChangeConfigurationNotification=d.ExitNotification=d.ShutdownRequest=d.InitializedNotification=d.InitializeError=d.InitializeRequest=d.WorkDoneProgressOptions=d.TextDocumentRegistrationOptions=d.StaticRegistrationOptions=d.FailureHandlingKind=d.ResourceOperationKind=d.UnregistrationRequest=d.RegistrationRequest=d.DocumentSelector=d.DocumentFilter=void 0;d.MonikerRequest=d.MonikerKind=d.UniquenessLevel=d.WillDeleteFilesRequest=d.DidDeleteFilesNotification=d.WillRenameFilesRequest=d.DidRenameFilesNotification=d.WillCreateFilesRequest=d.DidCreateFilesNotification=d.FileOperationPatternKind=d.LinkedEditingRangeRequest=d.ShowDocumentRequest=d.SemanticTokensRegistrationType=d.SemanticTokensRefreshRequest=d.SemanticTokensRangeRequest=d.SemanticTokensDeltaRequest=d.SemanticTokensRequest=d.TokenFormat=d.SemanticTokens=d.SemanticTokenModifiers=d.SemanticTokenTypes=d.CallHierarchyPrepareRequest=d.CallHierarchyOutgoingCallsRequest=d.CallHierarchyIncomingCallsRequest=d.WorkDoneProgressCancelNotification=d.WorkDoneProgressCreateRequest=d.WorkDoneProgress=d.SelectionRangeRequest=d.DeclarationRequest=d.FoldingRangeRequest=d.ColorPresentationRequest=d.DocumentColorRequest=d.ConfigurationRequest=d.DidChangeWorkspaceFoldersNotification=d.WorkspaceFoldersRequest=d.TypeDefinitionRequest=d.ImplementationRequest=d.ApplyWorkspaceEditRequest=d.ExecuteCommandRequest=d.PrepareRenameRequest=d.RenameRequest=d.PrepareSupportDefaultBehavior=d.DocumentOnTypeFormattingRequest=d.DocumentRangeFormattingRequest=d.DocumentFormattingRequest=d.DocumentLinkResolveRequest=void 0;var er=jd(),G=De(),zv=$d();Object.defineProperty(d,"ImplementationRequest",{enumerable:!0,get:function(){return zv.ImplementationRequest}});var Kv=Wd();Object.defineProperty(d,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Kv.TypeDefinitionRequest}});var sf=zd();Object.defineProperty(d,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return sf.WorkspaceFoldersRequest}});Object.defineProperty(d,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return sf.DidChangeWorkspaceFoldersNotification}});var Uv=Kd();Object.defineProperty(d,"ConfigurationRequest",{enumerable:!0,get:function(){return Uv.ConfigurationRequest}});var of=Gd();Object.defineProperty(d,"DocumentColorRequest",{enumerable:!0,get:function(){return of.DocumentColorRequest}});Object.defineProperty(d,"ColorPresentationRequest",{enumerable:!0,get:function(){return of.ColorPresentationRequest}});var Gv=Bd();Object.defineProperty(d,"FoldingRangeRequest",{enumerable:!0,get:function(){return Gv.FoldingRangeRequest}});var Bv=Xd();Object.defineProperty(d,"DeclarationRequest",{enumerable:!0,get:function(){return Bv.DeclarationRequest}});var Xv=Jd();Object.defineProperty(d,"SelectionRangeRequest",{enumerable:!0,get:function(){return Xv.SelectionRangeRequest}});var ha=Yd();Object.defineProperty(d,"WorkDoneProgress",{enumerable:!0,get:function(){return ha.WorkDoneProgress}});Object.defineProperty(d,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return ha.WorkDoneProgressCreateRequest}});Object.defineProperty(d,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return ha.WorkDoneProgressCancelNotification}});var pa=Qd();Object.defineProperty(d,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return pa.CallHierarchyIncomingCallsRequest}});Object.defineProperty(d,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return pa.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(d,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return pa.CallHierarchyPrepareRequest}});var Kt=Zd();Object.defineProperty(d,"SemanticTokenTypes",{enumerable:!0,get:function(){return Kt.SemanticTokenTypes}});Object.defineProperty(d,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Kt.SemanticTokenModifiers}});Object.defineProperty(d,"SemanticTokens",{enumerable:!0,get:function(){return Kt.SemanticTokens}});Object.defineProperty(d,"TokenFormat",{enumerable:!0,get:function(){return Kt.TokenFormat}});Object.defineProperty(d,"SemanticTokensRequest",{enumerable:!0,get:function(){return Kt.SemanticTokensRequest}});Object.defineProperty(d,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Kt.SemanticTokensDeltaRequest}});Object.defineProperty(d,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Kt.SemanticTokensRangeRequest}});Object.defineProperty(d,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Kt.SemanticTokensRefreshRequest}});Object.defineProperty(d,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Kt.SemanticTokensRegistrationType}});var Jv=ef();Object.defineProperty(d,"ShowDocumentRequest",{enumerable:!0,get:function(){return Jv.ShowDocumentRequest}});var Vv=tf();Object.defineProperty(d,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Vv.LinkedEditingRangeRequest}});var Sr=rf();Object.defineProperty(d,"FileOperationPatternKind",{enumerable:!0,get:function(){return Sr.FileOperationPatternKind}});Object.defineProperty(d,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Sr.DidCreateFilesNotification}});Object.defineProperty(d,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Sr.WillCreateFilesRequest}});Object.defineProperty(d,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Sr.DidRenameFilesNotification}});Object.defineProperty(d,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Sr.WillRenameFilesRequest}});Object.defineProperty(d,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Sr.DidDeleteFilesNotification}});Object.defineProperty(d,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Sr.WillDeleteFilesRequest}});var ga=nf();Object.defineProperty(d,"UniquenessLevel",{enumerable:!0,get:function(){return ga.UniquenessLevel}});Object.defineProperty(d,"MonikerKind",{enumerable:!0,get:function(){return ga.MonikerKind}});Object.defineProperty(d,"MonikerRequest",{enumerable:!0,get:function(){return ga.MonikerRequest}});var af;(function(t){function e(r){let n=r;return er.string(n.language)||er.string(n.scheme)||er.string(n.pattern)}t.is=e})(af=d.DocumentFilter||(d.DocumentFilter={}));var cf;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!er.string(n)&&!af.is(n))return!1;return!0}t.is=e})(cf=d.DocumentSelector||(d.DocumentSelector={}));var Yv;(function(t){t.type=new G.ProtocolRequestType("client/registerCapability")})(Yv=d.RegistrationRequest||(d.RegistrationRequest={}));var Qv;(function(t){t.type=new G.ProtocolRequestType("client/unregisterCapability")})(Qv=d.UnregistrationRequest||(d.UnregistrationRequest={}));var Zv;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Zv=d.ResourceOperationKind||(d.ResourceOperationKind={}));var ey;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(ey=d.FailureHandlingKind||(d.FailureHandlingKind={}));var ty;(function(t){function e(r){let n=r;return n&&er.string(n.id)&&n.id.length>0}t.hasId=e})(ty=d.StaticRegistrationOptions||(d.StaticRegistrationOptions={}));var ry;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||cf.is(n.documentSelector))}t.is=e})(ry=d.TextDocumentRegistrationOptions||(d.TextDocumentRegistrationOptions={}));var ny;(function(t){function e(n){let i=n;return er.objectLiteral(i)&&(i.workDoneProgress===void 0||er.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&er.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})(ny=d.WorkDoneProgressOptions||(d.WorkDoneProgressOptions={}));var iy;(function(t){t.type=new G.ProtocolRequestType("initialize")})(iy=d.InitializeRequest||(d.InitializeRequest={}));var sy;(function(t){t.unknownProtocolVersion=1})(sy=d.InitializeError||(d.InitializeError={}));var oy;(function(t){t.type=new G.ProtocolNotificationType("initialized")})(oy=d.InitializedNotification||(d.InitializedNotification={}));var ay;(function(t){t.type=new G.ProtocolRequestType0("shutdown")})(ay=d.ShutdownRequest||(d.ShutdownRequest={}));var cy;(function(t){t.type=new G.ProtocolNotificationType0("exit")})(cy=d.ExitNotification||(d.ExitNotification={}));var uy;(function(t){t.type=new G.ProtocolNotificationType("workspace/didChangeConfiguration")})(uy=d.DidChangeConfigurationNotification||(d.DidChangeConfigurationNotification={}));var ly;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(ly=d.MessageType||(d.MessageType={}));var dy;(function(t){t.type=new G.ProtocolNotificationType("window/showMessage")})(dy=d.ShowMessageNotification||(d.ShowMessageNotification={}));var fy;(function(t){t.type=new G.ProtocolRequestType("window/showMessageRequest")})(fy=d.ShowMessageRequest||(d.ShowMessageRequest={}));var hy;(function(t){t.type=new G.ProtocolNotificationType("window/logMessage")})(hy=d.LogMessageNotification||(d.LogMessageNotification={}));var py;(function(t){t.type=new G.ProtocolNotificationType("telemetry/event")})(py=d.TelemetryEventNotification||(d.TelemetryEventNotification={}));var gy;(function(t){t.None=0,t.Full=1,t.Incremental=2})(gy=d.TextDocumentSyncKind||(d.TextDocumentSyncKind={}));var my;(function(t){t.method="textDocument/didOpen",t.type=new G.ProtocolNotificationType(t.method)})(my=d.DidOpenTextDocumentNotification||(d.DidOpenTextDocumentNotification={}));var vy;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=r})(vy=d.TextDocumentContentChangeEvent||(d.TextDocumentContentChangeEvent={}));var yy;(function(t){t.method="textDocument/didChange",t.type=new G.ProtocolNotificationType(t.method)})(yy=d.DidChangeTextDocumentNotification||(d.DidChangeTextDocumentNotification={}));var Ry;(function(t){t.method="textDocument/didClose",t.type=new G.ProtocolNotificationType(t.method)})(Ry=d.DidCloseTextDocumentNotification||(d.DidCloseTextDocumentNotification={}));var Cy;(function(t){t.method="textDocument/didSave",t.type=new G.ProtocolNotificationType(t.method)})(Cy=d.DidSaveTextDocumentNotification||(d.DidSaveTextDocumentNotification={}));var _y;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(_y=d.TextDocumentSaveReason||(d.TextDocumentSaveReason={}));var wy;(function(t){t.method="textDocument/willSave",t.type=new G.ProtocolNotificationType(t.method)})(wy=d.WillSaveTextDocumentNotification||(d.WillSaveTextDocumentNotification={}));var Sy;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new G.ProtocolRequestType(t.method)})(Sy=d.WillSaveTextDocumentWaitUntilRequest||(d.WillSaveTextDocumentWaitUntilRequest={}));var by;(function(t){t.type=new G.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(by=d.DidChangeWatchedFilesNotification||(d.DidChangeWatchedFilesNotification={}));var Ty;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Ty=d.FileChangeType||(d.FileChangeType={}));var Py;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Py=d.WatchKind||(d.WatchKind={}));var Ey;(function(t){t.type=new G.ProtocolNotificationType("textDocument/publishDiagnostics")})(Ey=d.PublishDiagnosticsNotification||(d.PublishDiagnosticsNotification={}));var Dy;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Dy=d.CompletionTriggerKind||(d.CompletionTriggerKind={}));var xy;(function(t){t.method="textDocument/completion",t.type=new G.ProtocolRequestType(t.method)})(xy=d.CompletionRequest||(d.CompletionRequest={}));var qy;(function(t){t.method="completionItem/resolve",t.type=new G.ProtocolRequestType(t.method)})(qy=d.CompletionResolveRequest||(d.CompletionResolveRequest={}));var Oy;(function(t){t.method="textDocument/hover",t.type=new G.ProtocolRequestType(t.method)})(Oy=d.HoverRequest||(d.HoverRequest={}));var ky;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(ky=d.SignatureHelpTriggerKind||(d.SignatureHelpTriggerKind={}));var Ny;(function(t){t.method="textDocument/signatureHelp",t.type=new G.ProtocolRequestType(t.method)})(Ny=d.SignatureHelpRequest||(d.SignatureHelpRequest={}));var Iy;(function(t){t.method="textDocument/definition",t.type=new G.ProtocolRequestType(t.method)})(Iy=d.DefinitionRequest||(d.DefinitionRequest={}));var Fy;(function(t){t.method="textDocument/references",t.type=new G.ProtocolRequestType(t.method)})(Fy=d.ReferencesRequest||(d.ReferencesRequest={}));var Ly;(function(t){t.method="textDocument/documentHighlight",t.type=new G.ProtocolRequestType(t.method)})(Ly=d.DocumentHighlightRequest||(d.DocumentHighlightRequest={}));var Ay;(function(t){t.method="textDocument/documentSymbol",t.type=new G.ProtocolRequestType(t.method)})(Ay=d.DocumentSymbolRequest||(d.DocumentSymbolRequest={}));var My;(function(t){t.method="textDocument/codeAction",t.type=new G.ProtocolRequestType(t.method)})(My=d.CodeActionRequest||(d.CodeActionRequest={}));var jy;(function(t){t.method="codeAction/resolve",t.type=new G.ProtocolRequestType(t.method)})(jy=d.CodeActionResolveRequest||(d.CodeActionResolveRequest={}));var $y;(function(t){t.method="workspace/symbol",t.type=new G.ProtocolRequestType(t.method)})($y=d.WorkspaceSymbolRequest||(d.WorkspaceSymbolRequest={}));var Wy;(function(t){t.method="textDocument/codeLens",t.type=new G.ProtocolRequestType(t.method)})(Wy=d.CodeLensRequest||(d.CodeLensRequest={}));var Hy;(function(t){t.method="codeLens/resolve",t.type=new G.ProtocolRequestType(t.method)})(Hy=d.CodeLensResolveRequest||(d.CodeLensResolveRequest={}));var zy;(function(t){t.method="workspace/codeLens/refresh",t.type=new G.ProtocolRequestType0(t.method)})(zy=d.CodeLensRefreshRequest||(d.CodeLensRefreshRequest={}));var Ky;(function(t){t.method="textDocument/documentLink",t.type=new G.ProtocolRequestType(t.method)})(Ky=d.DocumentLinkRequest||(d.DocumentLinkRequest={}));var Uy;(function(t){t.method="documentLink/resolve",t.type=new G.ProtocolRequestType(t.method)})(Uy=d.DocumentLinkResolveRequest||(d.DocumentLinkResolveRequest={}));var Gy;(function(t){t.method="textDocument/formatting",t.type=new G.ProtocolRequestType(t.method)})(Gy=d.DocumentFormattingRequest||(d.DocumentFormattingRequest={}));var By;(function(t){t.method="textDocument/rangeFormatting",t.type=new G.ProtocolRequestType(t.method)})(By=d.DocumentRangeFormattingRequest||(d.DocumentRangeFormattingRequest={}));var Xy;(function(t){t.method="textDocument/onTypeFormatting",t.type=new G.ProtocolRequestType(t.method)})(Xy=d.DocumentOnTypeFormattingRequest||(d.DocumentOnTypeFormattingRequest={}));var Jy;(function(t){t.Identifier=1})(Jy=d.PrepareSupportDefaultBehavior||(d.PrepareSupportDefaultBehavior={}));var Vy;(function(t){t.method="textDocument/rename",t.type=new G.ProtocolRequestType(t.method)})(Vy=d.RenameRequest||(d.RenameRequest={}));var Yy;(function(t){t.method="textDocument/prepareRename",t.type=new G.ProtocolRequestType(t.method)})(Yy=d.PrepareRenameRequest||(d.PrepareRenameRequest={}));var Qy;(function(t){t.type=new G.ProtocolRequestType("workspace/executeCommand")})(Qy=d.ExecuteCommandRequest||(d.ExecuteCommandRequest={}));var Zy;(function(t){t.type=new G.ProtocolRequestType("workspace/applyEdit")})(Zy=d.ApplyWorkspaceEditRequest||(d.ApplyWorkspaceEditRequest={}))});var df=w(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.createProtocolConnection=void 0;var lf=Xr();function eR(t,e,r,n){return lf.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),lf.createMessageConnection(t,e,r,n)}Oi.createProtocolConnection=eR});var ff=w(Ke=>{"use strict";var tR=Ke&&Ke.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ki=Ke&&Ke.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&tR(e,t,r)};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.LSPErrorCodes=Ke.createProtocolConnection=void 0;ki(Xr(),Ke);ki((Ld(),cu(Fd)),Ke);ki(De(),Ke);ki(uf(),Ke);var rR=df();Object.defineProperty(Ke,"createProtocolConnection",{enumerable:!0,get:function(){return rR.createProtocolConnection}});var nR;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(nR=Ke.LSPErrorCodes||(Ke.LSPErrorCodes={}))});var pe=w(Et=>{"use strict";var iR=Et&&Et.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hf=Et&&Et.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&iR(e,t,r)};Object.defineProperty(Et,"__esModule",{value:!0});Et.createProtocolConnection=void 0;var sR=bo();hf(bo(),Et);hf(ff(),Et);function oR(t,e,r,n){return sR.createMessageConnection(t,e,r,n)}Et.createProtocolConnection=oR});var ya=w(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.toJSONObject=nn.ConfigurationFeature=void 0;var ma=require("vscode"),aR=pe(),va=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(aR.ConfigurationRequest.type,(r,n)=>{let i=o=>{let u=[];for(let c of o.items){let f=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;u.push(this.getConfiguration(f,c.section!==null?c.section:void 0))}return u},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(r,n,i):i(r,n)})}getConfiguration(e,r){let n=null;if(r){let i=r.lastIndexOf(".");if(i===-1)n=rn(ma.workspace.getConfiguration(void 0,e).get(r));else{let s=ma.workspace.getConfiguration(r.substr(0,i),e);s&&(n=rn(s.get(r.substr(i+1))))}}else{let i=ma.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=rn(i.get(s)))}return n===void 0&&(n=null),n}dispose(){}};nn.ConfigurationFeature=va;function rn(t){if(t){if(Array.isArray(t))return t.map(rn);if(typeof t=="object"){let e=Object.create(null);for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=rn(t[r]));return e}}return t}nn.toJSONObject=rn});var _a=w(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var cR=require("vscode"),Ra=class extends cR.CompletionItem{constructor(e){super(e)}};Ca.default=Ra});var ba=w(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});var uR=require("vscode"),wa=class extends uR.CodeLens{constructor(e){super(e)}};Sa.default=wa});var Ea=w(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});var lR=require("vscode"),Ta=class extends lR.DocumentLink{constructor(e,r){super(e,r)}};Pa.default=Ta});var qa=w(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});var dR=require("vscode"),Da=class extends dR.CodeAction{constructor(e,r){super(e),this.data=r}};xa.default=Da});var Na=w(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.ProtocolDiagnostic=br.DiagnosticCode=void 0;var fR=require("vscode"),Oa=Jt(),hR;(function(t){function e(r){let n=r;return n!=null&&(Oa.number(n.value)||Oa.string(n.value))&&Oa.string(n.target)}t.is=e})(hR=br.DiagnosticCode||(br.DiagnosticCode={}));var ka=class extends fR.Diagnostic{constructor(e,r,n,i){super(e,r,n),this.data=i,this.hasDiagnosticCode=!1}};br.ProtocolDiagnostic=ka});var La=w(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});var pR=require("vscode"),Ia=class extends pR.CallHierarchyItem{constructor(e,r,n,i,s,o,u){super(e,r,n,i,s,o),u!==void 0&&(this.data=u)}};Fa.default=Ia});var gf=w(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.createConverter=void 0;var xe=require("vscode"),ie=pe(),Hn=Jt(),gR=_a(),mR=ba(),vR=Ea(),yR=qa(),pf=Na(),RR=La(),CR=pe(),Aa;(function(t){function e(r){let n=r;return n&&!!n.inserting&&!!n.replacing}t.is=e})(Aa||(Aa={}));function _R(t){let r=t||(l=>l.toString());function n(l){return r(l)}function i(l){return{uri:r(l.uri)}}function s(l){return{uri:r(l.uri),version:l.version}}function o(l){return{textDocument:{uri:r(l.uri),languageId:l.languageId,version:l.version,text:l.getText()}}}function u(l){let R=l;return!!R.document&&!!R.contentChanges}function c(l){let R=l;return!!R.uri&&!!R.version}function f(l){if(c(l))return{textDocument:{uri:r(l.uri),version:l.version},contentChanges:[{text:l.getText()}]};if(u(l)){let R=l.document;return{textDocument:{uri:r(R.uri),version:R.version},contentChanges:l.contentChanges.map(N=>{let Y=N.range;return{range:{start:{line:Y.start.line,character:Y.start.character},end:{line:Y.end.line,character:Y.end.character}},rangeLength:N.rangeLength,text:N.text}})}}else throw Error("Unsupported text document change parameter")}function g(l){return{textDocument:i(l)}}function m(l,R=!1){let x={textDocument:i(l)};return R&&(x.text=l.getText()),x}function y(l){switch(l){case xe.TextDocumentSaveReason.Manual:return ie.TextDocumentSaveReason.Manual;case xe.TextDocumentSaveReason.AfterDelay:return ie.TextDocumentSaveReason.AfterDelay;case xe.TextDocumentSaveReason.FocusOut:return ie.TextDocumentSaveReason.FocusOut}return ie.TextDocumentSaveReason.Manual}function v(l){return{textDocument:i(l.document),reason:y(l.reason)}}function D(l){return{files:l.files.map(R=>({uri:r(R)}))}}function q(l){return{files:l.files.map(R=>({oldUri:r(R.oldUri),newUri:r(R.newUri)}))}}function z(l){return{files:l.files.map(R=>({uri:r(R)}))}}function I(l){return{files:l.files.map(R=>({uri:r(R)}))}}function E(l){return{files:l.files.map(R=>({oldUri:r(R.oldUri),newUri:r(R.newUri)}))}}function O(l){return{files:l.files.map(R=>({uri:r(R)}))}}function T(l,R){return{textDocument:i(l),position:nt(R)}}function re(l){switch(l){case xe.CompletionTriggerKind.TriggerCharacter:return ie.CompletionTriggerKind.TriggerCharacter;case xe.CompletionTriggerKind.TriggerForIncompleteCompletions:return ie.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ie.CompletionTriggerKind.Invoked}}function tt(l,R,x){return{textDocument:i(l),position:nt(R),context:{triggerKind:re(x.triggerKind),triggerCharacter:x.triggerCharacter}}}function Me(l){switch(l){case xe.SignatureHelpTriggerKind.Invoke:return ie.SignatureHelpTriggerKind.Invoked;case xe.SignatureHelpTriggerKind.TriggerCharacter:return ie.SignatureHelpTriggerKind.TriggerCharacter;case xe.SignatureHelpTriggerKind.ContentChange:return ie.SignatureHelpTriggerKind.ContentChange}}function Ge(l){return{label:l.label}}function qe(l){return l.map(Ge)}function Ve(l){return{label:l.label,parameters:qe(l.parameters)}}function je(l){return l.map(Ve)}function Ot(l){return l===void 0?l:{signatures:je(l.signatures),activeSignature:l.activeSignature,activeParameter:l.activeParameter}}function rt(l,R,x){return{textDocument:i(l),position:nt(R),context:{isRetrigger:x.isRetrigger,triggerCharacter:x.triggerCharacter,triggerKind:Me(x.triggerKind),activeSignatureHelp:Ot(x.activeSignatureHelp)}}}function nt(l){return{line:l.line,character:l.character}}function Ye(l){return l==null?l:{line:l.line,character:l.character}}function kt(l){let R=[];for(let x of l)R.push(Ye(x));return R}function ge(l){return l==null?l:{start:Ye(l.start),end:Ye(l.end)}}function Nt(l){return l==null?l:ie.Location.create(n(l.uri),ge(l.range))}function $e(l){switch(l){case xe.DiagnosticSeverity.Error:return ie.DiagnosticSeverity.Error;case xe.DiagnosticSeverity.Warning:return ie.DiagnosticSeverity.Warning;case xe.DiagnosticSeverity.Information:return ie.DiagnosticSeverity.Information;case xe.DiagnosticSeverity.Hint:return ie.DiagnosticSeverity.Hint}}function Rt(l){if(!l)return;let R=[];for(let x of l){let N=Ct(x);N!==void 0&&R.push(N)}return R.length>0?R:void 0}function Ct(l){switch(l){case xe.DiagnosticTag.Unnecessary:return ie.DiagnosticTag.Unnecessary;case xe.DiagnosticTag.Deprecated:return ie.DiagnosticTag.Deprecated;default:return}}function It(l){return{message:l.message,location:Nt(l.location)}}function qr(l){return l.map(It)}function Or(l){if(l!=null)return Hn.number(l)||Hn.string(l)?l:{value:l.value,target:n(l.target)}}function ir(l){let R=ie.Diagnostic.create(ge(l.range),l.message),x=l instanceof pf.ProtocolDiagnostic?l:void 0;x!==void 0&&x.data!==void 0&&(R.data=x.data);let N=Or(l.code);return pf.DiagnosticCode.is(N)?x!==void 0&&x.hasDiagnosticCode?R.code=N:(R.code=N.value,R.codeDescription={href:N.target}):R.code=N,Hn.number(l.severity)&&(R.severity=$e(l.severity)),Array.isArray(l.tags)&&(R.tags=Rt(l.tags)),l.relatedInformation&&(R.relatedInformation=qr(l.relatedInformation)),l.source&&(R.source=l.source),R}function sr(l){return l==null?l:l.map(ir)}function Bt(l,R){switch(l){case"$string":return R;case ie.MarkupKind.PlainText:return{kind:l,value:R};case ie.MarkupKind.Markdown:return{kind:l,value:R.value};default:return`Unsupported Markup content received. Kind is: ${l}`}}function kr(l){switch(l){case xe.CompletionItemTag.Deprecated:return ie.CompletionItemTag.Deprecated}}function or(l){if(l===void 0)return l;let R=[];for(let x of l){let N=kr(x);N!==void 0&&R.push(N)}return R}function Nr(l,R){return R!==void 0?R:l+1}function dn(l){let R={label:l.label},x=l instanceof gR.default?l:void 0;l.detail&&(R.detail=l.detail),l.documentation&&(!x||x.documentationFormat==="$string"?R.documentation=l.documentation:R.documentation=Bt(x.documentationFormat,l.documentation)),l.filterText&&(R.filterText=l.filterText),_t(R,l),Hn.number(l.kind)&&(R.kind=Nr(l.kind,x&&x.originalItemKind)),l.sortText&&(R.sortText=l.sortText),l.additionalTextEdits&&(R.additionalTextEdits=fn(l.additionalTextEdits)),l.commitCharacters&&(R.commitCharacters=l.commitCharacters.slice()),l.command&&(R.command=bt(l.command)),(l.preselect===!0||l.preselect===!1)&&(R.preselect=l.preselect);let N=or(l.tags);if(x){if(x.data!==void 0&&(R.data=x.data),x.deprecated===!0||x.deprecated===!1){if(x.deprecated===!0&&N!==void 0&&N.length>0){let Y=N.indexOf(xe.CompletionItemTag.Deprecated);Y!==-1&&N.splice(Y,1)}R.deprecated=x.deprecated}x.insertTextMode!==void 0&&(R.insertTextMode=x.insertTextMode)}return N!==void 0&&N.length>0&&(R.tags=N),R.insertTextMode===void 0&&l.keepWhitespace===!0&&(R.insertTextMode=CR.InsertTextMode.adjustIndentation),R}function _t(l,R){let x=ie.InsertTextFormat.PlainText,N,Y;R.textEdit?(N=R.textEdit.newText,Y=R.textEdit.range):R.insertText instanceof xe.SnippetString?(x=ie.InsertTextFormat.Snippet,N=R.insertText.value):N=R.insertText,R.range&&(Y=R.range),l.insertTextFormat=x,R.fromEdit&&N!==void 0&&Y!==void 0?l.textEdit=Ir(N,Y):l.insertText=N}function Ir(l,R){return Aa.is(R)?ie.InsertReplaceEdit.create(l,ge(R.inserting),ge(R.replacing)):{newText:l,range:ge(R)}}function wt(l){return{range:ge(l.range),newText:l.newText}}function fn(l){return l==null?l:l.map(wt)}function Se(l){return l<=xe.SymbolKind.TypeParameter?l+1:ie.SymbolKind.Property}function it(l){return l}function Fr(l){return l.map(it)}function hn(l,R,x){return{textDocument:i(l),position:nt(R),context:{includeDeclaration:x.includeDeclaration}}}function St(l){let R=ie.CodeAction.create(l.title);if(l instanceof yR.default&&l.data!==void 0&&(R.data=l.data),l.kind!==void 0&&(R.kind=ar(l.kind)),l.diagnostics!==void 0&&(R.diagnostics=sr(l.diagnostics)),l.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return l.command!==void 0&&(R.command=bt(l.command)),l.isPreferred!==void 0&&(R.isPreferred=l.isPreferred),l.disabled!==void 0&&(R.disabled={reason:l.disabled.reason}),R}function Lr(l){if(l==null)return l;let R;return l.only&&Hn.string(l.only.value)&&(R=[l.only.value]),ie.CodeActionContext.create(sr(l.diagnostics),R)}function ar(l){if(l!=null)return l.value}function bt(l){let R=ie.Command.create(l.title,l.command);return l.arguments&&(R.arguments=l.arguments),R}function cr(l){let R=ie.CodeLens.create(ge(l.range));return l.command&&(R.command=bt(l.command)),l instanceof mR.default&&l.data&&(R.data=l.data),R}function Tt(l,R){let x={tabSize:l.tabSize,insertSpaces:l.insertSpaces};return R.trimTrailingWhitespace&&(x.trimTrailingWhitespace=!0),R.trimFinalNewlines&&(x.trimFinalNewlines=!0),R.insertFinalNewline&&(x.insertFinalNewline=!0),x}function p(l){return{textDocument:i(l)}}function S(l){return{textDocument:i(l)}}function P(l){let R=ie.DocumentLink.create(ge(l.range));l.target&&(R.target=n(l.target)),l.tooltip!==void 0&&(R.tooltip=l.tooltip);let x=l instanceof vR.default?l:void 0;return x&&x.data&&(R.data=x.data),R}function W(l){return{textDocument:i(l)}}function Q(l){let R={name:l.name,kind:Se(l.kind),uri:n(l.uri),range:ge(l.range),selectionRange:ge(l.selectionRange)};return l.detail!==void 0&&l.detail.length>0&&(R.detail=l.detail),l.tags!==void 0&&(R.tags=Fr(l.tags)),l instanceof RR.default&&l.data!==void 0&&(R.data=l.data),R}return{asUri:n,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:o,asChangeTextDocumentParams:f,asCloseTextDocumentParams:g,asSaveTextDocumentParams:m,asWillSaveTextDocumentParams:v,asDidCreateFilesParams:D,asDidRenameFilesParams:q,asDidDeleteFilesParams:z,asWillCreateFilesParams:I,asWillRenameFilesParams:E,asWillDeleteFilesParams:O,asTextDocumentPositionParams:T,asCompletionParams:tt,asSignatureHelpParams:rt,asWorkerPosition:nt,asRange:ge,asPosition:Ye,asPositions:kt,asLocation:Nt,asDiagnosticSeverity:$e,asDiagnosticTag:Ct,asDiagnostic:ir,asDiagnostics:sr,asCompletionItem:dn,asTextEdit:wt,asSymbolKind:Se,asSymbolTag:it,asSymbolTags:Fr,asReferenceParams:hn,asCodeAction:St,asCodeActionContext:Lr,asCommand:bt,asCodeLens:cr,asFormattingOptions:Tt,asDocumentSymbolParams:p,asCodeLensParams:S,asDocumentLink:P,asDocumentLinkParams:W,asCallHierarchyItem:Q}}Ni.createConverter=_R});var yf=w(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.createConverter=void 0;var j=require("vscode"),V=pe(),vt=Jt(),wR=_a(),SR=ba(),bR=Ea(),TR=qa(),mf=Na(),PR=La(),vf=pe(),Ii;(function(t){function e(r){let n=r;return n&&vt.string(n.language)&&vt.string(n.value)}t.is=e})(Ii||(Ii={}));function ER(t,e){let n=t||(a=>j.Uri.parse(a));function i(a){return n(a)}function s(a){return a.map(o)}function o(a){let _=new mf.ProtocolDiagnostic(y(a.range),a.message,D(a.severity),a.data);return a.code!==void 0&&(V.CodeDescription.is(a.codeDescription)?_.code={value:a.code,target:i(a.codeDescription.href)}:mf.DiagnosticCode.is(a.code)?(_.hasDiagnosticCode=!0,_.code={value:a.code.value,target:i(a.code.target)}):_.code=a.code),a.source&&(_.source=a.source),a.relatedInformation&&(_.relatedInformation=u(a.relatedInformation)),Array.isArray(a.tags)&&(_.tags=f(a.tags)),_}function u(a){return a.map(c)}function c(a){return new j.DiagnosticRelatedInformation(ge(a.location),a.message)}function f(a){if(!a)return;let _=[];for(let H of a){let ee=g(H);ee!==void 0&&_.push(ee)}return _.length>0?_:void 0}function g(a){switch(a){case V.DiagnosticTag.Unnecessary:return j.DiagnosticTag.Unnecessary;case V.DiagnosticTag.Deprecated:return j.DiagnosticTag.Deprecated;default:return}}function m(a){if(!!a)return new j.Position(a.line,a.character)}function y(a){if(!!a)return new j.Range(m(a.start),m(a.end))}function v(a){return a.map(_=>y(_))}function D(a){if(a==null)return j.DiagnosticSeverity.Error;switch(a){case V.DiagnosticSeverity.Error:return j.DiagnosticSeverity.Error;case V.DiagnosticSeverity.Warning:return j.DiagnosticSeverity.Warning;case V.DiagnosticSeverity.Information:return j.DiagnosticSeverity.Information;case V.DiagnosticSeverity.Hint:return j.DiagnosticSeverity.Hint}return j.DiagnosticSeverity.Error}function q(a){if(vt.string(a))return I(a);if(Ii.is(a))return I().appendCodeblock(a.value,a.language);if(Array.isArray(a)){let _=[];for(let H of a){let ee=I();Ii.is(H)?ee.appendCodeblock(H.value,H.language):ee.appendMarkdown(H),_.push(ee)}return _}else{let _;switch(a.kind){case V.MarkupKind.Markdown:return I(a.value);case V.MarkupKind.PlainText:return _=I(),_.appendText(a.value),_;default:return _=I(),_.appendText(`Unsupported Markup content received. Kind is: ${a.kind}`),_}}}function z(a){if(vt.string(a))return a;switch(a.kind){case V.MarkupKind.Markdown:return I(a.value);case V.MarkupKind.PlainText:return a.value;default:return`Unsupported Markup content received. Kind is: ${a.kind}`}}function I(a){let _=new j.MarkdownString(a);return e===!0&&(_.isTrusted=e),_}function E(a){if(!!a)return new j.Hover(q(a.contents),y(a.range))}function O(a){if(!a)return;if(Array.isArray(a))return a.map(Me);let _=a;return new j.CompletionList(_.items.map(Me),_.isIncomplete)}function T(a){return V.CompletionItemKind.Text<=a&&a<=V.CompletionItemKind.TypeParameter?[a-1,void 0]:[j.CompletionItemKind.Text,a]}function re(a){switch(a){case V.CompletionItemTag.Deprecated:return j.CompletionItemTag.Deprecated}}function tt(a){if(a==null)return[];let _=[];for(let H of a){let ee=re(H);ee!==void 0&&_.push(ee)}return _}function Me(a){let _=tt(a.tags),H=new wR.default(a.label);a.detail&&(H.detail=a.detail),a.documentation&&(H.documentation=z(a.documentation),H.documentationFormat=vt.string(a.documentation)?"$string":a.documentation.kind),a.filterText&&(H.filterText=a.filterText);let ee=Ge(a);if(ee&&(H.insertText=ee.text,H.range=ee.range,H.fromEdit=ee.fromEdit),vt.number(a.kind)){let[oe,ur]=T(a.kind);H.kind=oe,ur&&(H.originalItemKind=ur)}return a.sortText&&(H.sortText=a.sortText),a.additionalTextEdits&&(H.additionalTextEdits=je(a.additionalTextEdits)),vt.stringArray(a.commitCharacters)&&(H.commitCharacters=a.commitCharacters.slice()),a.command&&(H.command=wt(a.command)),(a.deprecated===!0||a.deprecated===!1)&&(H.deprecated=a.deprecated,a.deprecated===!0&&_.push(j.CompletionItemTag.Deprecated)),(a.preselect===!0||a.preselect===!1)&&(H.preselect=a.preselect),a.data!==void 0&&(H.data=a.data),_.length>0&&(H.tags=_),a.insertTextMode!==void 0&&(H.insertTextMode=a.insertTextMode,a.insertTextMode===vf.InsertTextMode.asIs&&(H.keepWhitespace=!0)),H}function Ge(a){return a.textEdit?a.insertTextFormat===V.InsertTextFormat.Snippet?{text:new j.SnippetString(a.textEdit.newText),range:qe(a.textEdit),fromEdit:!0}:{text:a.textEdit.newText,range:qe(a.textEdit),fromEdit:!0}:a.insertText?a.insertTextFormat===V.InsertTextFormat.Snippet?{text:new j.SnippetString(a.insertText),fromEdit:!1}:{text:a.insertText,fromEdit:!1}:void 0}function qe(a){return V.InsertReplaceEdit.is(a)?{inserting:y(a.insert),replacing:y(a.replace)}:y(a.range)}function Ve(a){if(!!a)return new j.TextEdit(y(a.range),a.newText)}function je(a){if(!!a)return a.map(Ve)}function Ot(a){if(!a)return;let _=new j.SignatureHelp;return vt.number(a.activeSignature)?_.activeSignature=a.activeSignature:_.activeSignature=0,vt.number(a.activeParameter)?_.activeParameter=a.activeParameter:_.activeParameter=0,a.signatures&&(_.signatures=rt(a.signatures)),_}function rt(a){return a.map(nt)}function nt(a){let _=new j.SignatureInformation(a.label);return a.documentation!==void 0&&(_.documentation=z(a.documentation)),a.parameters!==void 0&&(_.parameters=Ye(a.parameters)),a.activeParameter!==void 0&&(_.activeParameter=a.activeParameter),_}function Ye(a){return a.map(kt)}function kt(a){let _=new j.ParameterInformation(a.label);return a.documentation&&(_.documentation=z(a.documentation)),_}function ge(a){if(!!a)return new j.Location(n(a.uri),y(a.range))}function Nt(a){if(!!a)return Ct(a)}function $e(a){if(!!a)return Ct(a)}function Rt(a){if(!a)return;let _={targetUri:n(a.targetUri),targetRange:y(a.targetRange),originSelectionRange:y(a.originSelectionRange),targetSelectionRange:y(a.targetSelectionRange)};if(!_.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return _}function Ct(a){if(!!a)return vt.array(a)?a.length===0?[]:V.LocationLink.is(a[0])?a.map(H=>Rt(H)):a.map(H=>ge(H)):V.LocationLink.is(a)?[Rt(a)]:ge(a)}function It(a){if(!!a)return a.map(_=>ge(_))}function qr(a){if(!!a)return a.map(Or)}function Or(a){let _=new j.DocumentHighlight(y(a.range));return vt.number(a.kind)&&(_.kind=ir(a.kind)),_}function ir(a){switch(a){case V.DocumentHighlightKind.Text:return j.DocumentHighlightKind.Text;case V.DocumentHighlightKind.Read:return j.DocumentHighlightKind.Read;case V.DocumentHighlightKind.Write:return j.DocumentHighlightKind.Write}return j.DocumentHighlightKind.Text}function sr(a,_){if(!!a)return a.map(H=>Nr(H,_))}function Bt(a){return a<=V.SymbolKind.TypeParameter?a-1:j.SymbolKind.Property}function kr(a){switch(a){case V.SymbolTag.Deprecated:return j.SymbolTag.Deprecated;default:return}}function or(a){if(a==null)return;let _=[];for(let H of a){let ee=kr(H);ee!==void 0&&_.push(ee)}return _.length===0?void 0:_}function Nr(a,_){let H=new j.SymbolInformation(a.name,Bt(a.kind),y(a.location.range),a.location.uri?n(a.location.uri):_);return Ir(H,a),a.containerName&&(H.containerName=a.containerName),H}function dn(a){if(a!=null)return a.map(_t)}function _t(a){let _=new j.DocumentSymbol(a.name,a.detail||"",Bt(a.kind),y(a.range),y(a.selectionRange));if(Ir(_,a),a.children!==void 0&&a.children.length>0){let H=[];for(let ee of a.children)H.push(_t(ee));_.children=H}return _}function Ir(a,_){a.tags=or(_.tags),_.deprecated&&(a.tags?a.tags.includes(j.SymbolTag.Deprecated)||(a.tags=a.tags.concat(j.SymbolTag.Deprecated)):a.tags=[j.SymbolTag.Deprecated])}function wt(a){let _={title:a.title,command:a.command};return a.arguments&&(_.arguments=a.arguments),_}function fn(a){if(!!a)return a.map(wt)}let Se=new Map;Se.set(V.CodeActionKind.Empty,j.CodeActionKind.Empty),Se.set(V.CodeActionKind.QuickFix,j.CodeActionKind.QuickFix),Se.set(V.CodeActionKind.Refactor,j.CodeActionKind.Refactor),Se.set(V.CodeActionKind.RefactorExtract,j.CodeActionKind.RefactorExtract),Se.set(V.CodeActionKind.RefactorInline,j.CodeActionKind.RefactorInline),Se.set(V.CodeActionKind.RefactorRewrite,j.CodeActionKind.RefactorRewrite),Se.set(V.CodeActionKind.Source,j.CodeActionKind.Source),Se.set(V.CodeActionKind.SourceOrganizeImports,j.CodeActionKind.SourceOrganizeImports);function it(a){if(a==null)return;let _=Se.get(a);if(_)return _;let H=a.split(".");_=j.CodeActionKind.Empty;for(let ee of H)_=_.append(ee);return _}function Fr(a){if(a!=null)return a.map(_=>it(_))}function hn(a){if(a==null)return;let _=new TR.default(a.title,a.data);return a.kind!==void 0&&(_.kind=it(a.kind)),a.diagnostics!==void 0&&(_.diagnostics=s(a.diagnostics)),a.edit!==void 0&&(_.edit=ar(a.edit)),a.command!==void 0&&(_.command=wt(a.command)),a.isPreferred!==void 0&&(_.isPreferred=a.isPreferred),a.disabled!==void 0&&(_.disabled={reason:a.disabled.reason}),_}function St(a){if(!a)return;let _=new SR.default(y(a.range));return a.command&&(_.command=wt(a.command)),a.data!==void 0&&a.data!==null&&(_.data=a.data),_}function Lr(a){if(!!a)return a.map(_=>St(_))}function ar(a){if(!a)return;let _=new Map;if(a.changeAnnotations!==void 0)for(let oe of Object.keys(a.changeAnnotations)){let ur=bt(a.changeAnnotations[oe]);_.set(oe,ur)}let H=oe=>{if(oe!==void 0)return _.get(oe)},ee=new j.WorkspaceEdit;if(a.documentChanges)for(let oe of a.documentChanges)if(V.CreateFile.is(oe))ee.createFile(n(oe.uri),oe.options,H(oe.annotationId));else if(V.RenameFile.is(oe))ee.renameFile(n(oe.oldUri),n(oe.newUri),oe.options,H(oe.annotationId));else if(V.DeleteFile.is(oe))ee.deleteFile(n(oe.uri),oe.options,H(oe.annotationId));else if(V.TextDocumentEdit.is(oe)){let ur=n(oe.textDocument.uri);for(let Ar of oe.edits)vf.AnnotatedTextEdit.is(Ar)?ee.replace(ur,y(Ar.range),Ar.newText,H(Ar.annotationId)):ee.replace(ur,y(Ar.range),Ar.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(oe,void 0,4)}`);else a.changes&&Object.keys(a.changes).forEach(oe=>{ee.set(n(oe),je(a.changes[oe]))});return ee}function bt(a){if(a!==void 0)return{label:a.label,needsConfirmation:!!a.needsConfirmation,description:a.description}}function cr(a){let _=y(a.range),H=a.target?i(a.target):void 0,ee=new bR.default(_,H);return a.tooltip!==void 0&&(ee.tooltip=a.tooltip),a.data!==void 0&&a.data!==null&&(ee.data=a.data),ee}function Tt(a){if(!!a)return a.map(cr)}function p(a){return new j.Color(a.red,a.green,a.blue,a.alpha)}function S(a){return new j.ColorInformation(y(a.range),p(a.color))}function P(a){if(Array.isArray(a))return a.map(S)}function W(a){let _=new j.ColorPresentation(a.label);return _.additionalTextEdits=je(a.additionalTextEdits),a.textEdit&&(_.textEdit=Ve(a.textEdit)),_}function Q(a){if(Array.isArray(a))return a.map(W)}function l(a){if(a)switch(a){case V.FoldingRangeKind.Comment:return j.FoldingRangeKind.Comment;case V.FoldingRangeKind.Imports:return j.FoldingRangeKind.Imports;case V.FoldingRangeKind.Region:return j.FoldingRangeKind.Region}}function R(a){return new j.FoldingRange(a.startLine,a.endLine,l(a.kind))}function x(a){if(Array.isArray(a))return a.map(R)}function N(a){return new j.SelectionRange(y(a.range),a.parent?N(a.parent):void 0)}function Y(a){if(!Array.isArray(a))return[];let _=[];for(let H of a)_.push(N(H));return _}function Z(a){if(a===null)return;let _=new PR.default(Bt(a.kind),a.name,a.detail||"",i(a.uri),y(a.range),y(a.selectionRange),a.data);return a.tags!==void 0&&(_.tags=or(a.tags)),_}function ve(a){if(a!==null)return a.map(_=>Z(_))}function Oe(a){return new j.CallHierarchyIncomingCall(Z(a.from),v(a.fromRanges))}function Ft(a){if(a!==null)return a.map(_=>Oe(_))}function ut(a){return new j.CallHierarchyOutgoingCall(Z(a.to),v(a.fromRanges))}function Dh(a){if(a!==null)return a.map(_=>ut(_))}function xh(a){if(a!=null)return new j.SemanticTokens(new Uint32Array(a.data),a.resultId)}function su(a){return new j.SemanticTokensEdit(a.start,a.deleteCount,a.data!==void 0?new Uint32Array(a.data):void 0)}function qh(a){if(a!=null)return new j.SemanticTokensEdits(a.edits.map(su),a.resultId)}function Oh(a){return a}function kh(a){if(a!=null)return new j.LinkedEditingRanges(v(a.ranges),Nh(a.wordPattern))}function Nh(a){if(a!=null)return new RegExp(a)}return{asUri:i,asDiagnostics:s,asDiagnostic:o,asRange:y,asRanges:v,asPosition:m,asDiagnosticSeverity:D,asDiagnosticTag:g,asHover:E,asCompletionResult:O,asCompletionItem:Me,asTextEdit:Ve,asTextEdits:je,asSignatureHelp:Ot,asSignatureInformations:rt,asSignatureInformation:nt,asParameterInformations:Ye,asParameterInformation:kt,asDeclarationResult:Nt,asDefinitionResult:$e,asLocation:ge,asReferences:It,asDocumentHighlights:qr,asDocumentHighlight:Or,asDocumentHighlightKind:ir,asSymbolKind:Bt,asSymbolTag:kr,asSymbolTags:or,asSymbolInformations:sr,asSymbolInformation:Nr,asDocumentSymbols:dn,asDocumentSymbol:_t,asCommand:wt,asCommands:fn,asCodeAction:hn,asCodeActionKind:it,asCodeActionKinds:Fr,asCodeLens:St,asCodeLenses:Lr,asWorkspaceEdit:ar,asDocumentLink:cr,asDocumentLinks:Tt,asFoldingRangeKind:l,asFoldingRange:R,asFoldingRanges:x,asColor:p,asColorInformation:S,asColorInformations:P,asColorPresentation:W,asColorPresentations:Q,asSelectionRange:N,asSelectionRanges:Y,asSemanticTokensLegend:Oh,asSemanticTokens:xh,asSemanticTokensEdit:su,asSemanticTokensEdits:qh,asCallHierarchyItem:Z,asCallHierarchyItems:ve,asCallHierarchyIncomingCall:Oe,asCallHierarchyIncomingCalls:Ft,asCallHierarchyOutgoingCall:ut,asCallHierarchyOutgoingCalls:Dh,asLinkedEditingRanges:kh}}Fi.createConverter=ER});var Cf=w(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.Delayer=void 0;var Rf=pe(),Ma=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=Rf.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Rf.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};Li.Delayer=Ma});var Ai=w(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.generateUuid=ct.parse=ct.isUUID=ct.v4=ct.empty=void 0;var zn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},J=class extends zn{constructor(){super([J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),"-",J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),"-","4",J._randomHex(),J._randomHex(),J._randomHex(),"-",J._oneOf(J._timeHighBits),J._randomHex(),J._randomHex(),J._randomHex(),"-",J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex(),J._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return J._oneOf(J._chars)}};J._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];J._timeHighBits=["8","9","a","b"];ct.empty=new zn("00000000-0000-0000-0000-000000000000");function _f(){return new J}ct.v4=_f;var DR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function wf(t){return DR.test(t)}ct.isUUID=wf;function xR(t){if(!wf(t))throw new Error("invalid uuid");return new zn(t)}ct.parse=xR;function qR(){return _f().asHex()}ct.generateUuid=qR});var $a=w(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.ProgressPart=void 0;var Sf=require("vscode"),bf=pe(),Tf=Jt(),ja=class{constructor(e,r,n){this._client=e,this._token=r,this._reported=0,this._disposable=this._client.onProgress(bf.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){Sf.window.withProgress({location:Sf.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(r,n)=>(this._progress=r,this._infinite=e.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(bf.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&Tf.string(e.message))this._progress.report({message:e.message});else if(Tf.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Mi.ProgressPart=ja});var Ze=w(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.BaseLanguageClient=ye.MessageTransports=ye.TextDocumentFeature=ye.State=ye.RevealOutputChannelOn=ye.CloseAction=ye.ErrorAction=void 0;var F=require("vscode"),h=pe(),OR=ya(),kR=gf(),NR=yf(),ae=Jt(),Pf=Cf(),ce=Ai(),IR=$a(),Wa=class{error(e){h.RAL().console.error(e)}warn(e){h.RAL().console.warn(e)}info(e){h.RAL().console.info(e)}log(e){h.RAL().console.log(e)}};function FR(t,e,r,n,i){let s=new Wa,o=h.createProtocolConnection(t,e,s,i);return o.onError(c=>{r(c[0],c[1],c[2])}),o.onClose(n),{listen:()=>o.listen(),sendRequest:(c,...f)=>o.sendRequest(ae.string(c)?c:c.method,...f),onRequest:(c,f)=>o.onRequest(ae.string(c)?c:c.method,f),sendNotification:(c,f)=>o.sendNotification(ae.string(c)?c:c.method,f),onNotification:(c,f)=>o.onNotification(ae.string(c)?c:c.method,f),onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(c,f,g)=>{let m={sendNotification:!1,traceFormat:h.TraceFormat.Text};g===void 0?o.trace(c,f,m):(ae.boolean(g),o.trace(c,f,g))},initialize:c=>o.sendRequest(h.InitializeRequest.type,c),shutdown:()=>o.sendRequest(h.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(h.ExitNotification.type),onLogMessage:c=>o.onNotification(h.LogMessageNotification.type,c),onShowMessage:c=>o.onNotification(h.ShowMessageNotification.type,c),onTelemetry:c=>o.onNotification(h.TelemetryEventNotification.type,c),didChangeConfiguration:c=>o.sendNotification(h.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>o.sendNotification(h.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>o.sendNotification(h.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>o.sendNotification(h.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>o.sendNotification(h.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>o.sendNotification(h.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>o.onNotification(h.PublishDiagnosticsNotification.type,c),end:()=>o.end(),dispose:()=>o.dispose()}}var $i;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})($i=ye.ErrorAction||(ye.ErrorAction={}));var Tr;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(Tr=ye.CloseAction||(ye.CloseAction={}));var Ha=class{constructor(e,r){this.name=e,this.maxRestartCount=r,this.restarts=[]}error(e,r,n){return n&&n<=3?$i.Continue:$i.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?Tr.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(F.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),Tr.DoNotRestart):(this.restarts.shift(),Tr.Restart)}},Kn;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Kn=ye.RevealOutputChannelOn||(ye.RevealOutputChannelOn={}));var ji;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(ji=ye.State||(ye.State={}));var de;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(de||(de={}));var Ef=[h.SymbolKind.File,h.SymbolKind.Module,h.SymbolKind.Namespace,h.SymbolKind.Package,h.SymbolKind.Class,h.SymbolKind.Method,h.SymbolKind.Property,h.SymbolKind.Field,h.SymbolKind.Constructor,h.SymbolKind.Enum,h.SymbolKind.Interface,h.SymbolKind.Function,h.SymbolKind.Variable,h.SymbolKind.Constant,h.SymbolKind.String,h.SymbolKind.Number,h.SymbolKind.Boolean,h.SymbolKind.Array,h.SymbolKind.Object,h.SymbolKind.Key,h.SymbolKind.Null,h.SymbolKind.EnumMember,h.SymbolKind.Struct,h.SymbolKind.Event,h.SymbolKind.Operator,h.SymbolKind.TypeParameter],LR=[h.CompletionItemKind.Text,h.CompletionItemKind.Method,h.CompletionItemKind.Function,h.CompletionItemKind.Constructor,h.CompletionItemKind.Field,h.CompletionItemKind.Variable,h.CompletionItemKind.Class,h.CompletionItemKind.Interface,h.CompletionItemKind.Module,h.CompletionItemKind.Property,h.CompletionItemKind.Unit,h.CompletionItemKind.Value,h.CompletionItemKind.Enum,h.CompletionItemKind.Keyword,h.CompletionItemKind.Snippet,h.CompletionItemKind.Color,h.CompletionItemKind.File,h.CompletionItemKind.Reference,h.CompletionItemKind.Folder,h.CompletionItemKind.EnumMember,h.CompletionItemKind.Constant,h.CompletionItemKind.Struct,h.CompletionItemKind.Event,h.CompletionItemKind.Operator,h.CompletionItemKind.TypeParameter],Df=[h.SymbolTag.Deprecated];function $(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Un;(function(t){function e(r){let n=F.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}t.fromConfiguration=e})(Un||(Un={}));var za;(function(t){function e(r){let n=r;return n&&ae.func(n.register)&&ae.func(n.unregister)&&ae.func(n.dispose)&&n.registrationType!==void 0}t.is=e})(za||(za={}));var yt=class{constructor(e,r,n,i,s,o){this._client=e,this._event=r,this._type=n,this._middleware=i,this._createParams=s,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,r){for(let n of e)if(F.languages.match(n,r))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(F.languages.match(r,e))return{send:n=>{this.callback(n)}}}},Ka=class extends yt{constructor(e,r){super(e,F.workspace.onDidOpenTextDocument,h.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),yt.textDocumentFilter),this._syncedDocuments=r}fillClientCapabilities(e){$($(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return h.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let r=e.registerOptions.documentSelector;F.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&F.languages.match(r,n)){let s=this._client.clientOptions.middleware,o=u=>{this._client.sendNotification(this._type,this._createParams(u))};s.didOpen?s.didOpen(n,o):o(n),this._syncedDocuments.set(i,n)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},Ua=class extends yt{constructor(e,r){super(e,F.workspace.onDidCloseTextDocument,h.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),yt.textDocumentFilter),this._syncedDocuments=r}get registrationType(){return h.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){$($(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(F.languages.match(r,i)&&!this._selectorFilter(n,i)){let s=this._client.clientOptions.middleware,o=u=>{this._client.sendNotification(this._type,this._createParams(u))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,o):o(i)}})}},Ga=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return h.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){$($(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==h.TextDocumentSyncKind.None&&this.register({id:ce.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=F.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let r of this._changeData.values())if(F.languages.match(r.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===h.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(h.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(h.DidChangeTextDocumentNotification.type,i)}else if(r.syncKind===h.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(h.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new Pf.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(h.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};n.didChange?n.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let r of this._changeData.values())if(F.languages.match(r.documentSelector,e))return{send:n=>{this.callback(n)}}}},Ba=class extends yt{constructor(e){super(e,F.workspace.onWillSaveTextDocument,h.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>yt.textDocumentFilter(r,n.document))}get registrationType(){return h.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=$($(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:r}})}},Xa=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return h.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=$($(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:r}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=F.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(yt.textDocumentFilter(this._selectors.values(),e.document)){let r=this._client.clientOptions.middleware,n=i=>this._client.sendRequest(h.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let o=this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},Ja=class extends yt{constructor(e){super(e,F.workspace.onDidSaveTextDocument,h.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),yt.textDocumentFilter),this._includeText=!1}get registrationType(){return h.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){$($(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;if(r&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:ce.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},Va=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}get registrationType(){return h.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){$($(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,r){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let r=[];for(let n of e.registerOptions.watchers){if(!ae.string(n.globPattern))continue;let i=!0,s=!0,o=!0;n.kind!==void 0&&n.kind!==null&&(i=(n.kind&h.WatchKind.Create)!==0,s=(n.kind&h.WatchKind.Change)!==0,o=(n.kind&h.WatchKind.Delete)!==0);let u=F.workspace.createFileSystemWatcher(n.globPattern,!i,!s,!o);this.hookListeners(u,i,s,o),r.push(u)}this._watchers.set(e.id,r)}registerRaw(e,r){let n=[];for(let i of r)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,i,s){r&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:h.FileChangeType.Created}),null,s),n&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:h.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:h.FileChangeType.Deleted}),null,s)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}},Ne=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],data:e,provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(h.TextDocumentRegistrationOptions.is(r)){let n=h.StaticRegistrationOptions.hasId(r)?r.id:ce.generateUuid(),i=r.documentSelector||e;if(i)return[n,Object.assign({},r,{documentSelector:i})]}else if(ae.boolean(r)&&r===!0||h.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=ae.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[ce.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return ae.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&F.languages.match(n,e))return r.provider}}getAllProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}};ye.TextDocumentFeature=Ne;var Ya=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}},Qa=class extends Ne{constructor(e){super(e,h.CompletionRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[h.MarkupKind.Markdown,h.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[h.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[h.InsertTextMode.asIs,h.InsertTextMode.adjustIndentation]}},r.completionItemKind={valueSet:LR}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.triggerCharacters||[],n={provideCompletionItems:(i,s,o,u)=>{let c=this._client,f=this._client.clientOptions.middleware,g=(m,y,v,D)=>c.sendRequest(h.CompletionRequest.type,c.code2ProtocolConverter.asCompletionParams(m,y,v),D).then(c.protocol2CodeConverter.asCompletionResult,q=>c.handleFailedRequest(h.CompletionRequest.type,q,null));return f.provideCompletionItem?f.provideCompletionItem(i,s,u,o,g):g(i,s,u,o)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let o=this._client,u=this._client.clientOptions.middleware,c=(f,g)=>o.sendRequest(h.CompletionResolveRequest.type,o.code2ProtocolConverter.asCompletionItem(f),g).then(o.protocol2CodeConverter.asCompletionItem,m=>o.handleFailedRequest(h.CompletionResolveRequest.type,m,f));return u.resolveCompletionItem?u.resolveCompletionItem(i,s,c):c(i,s)}:void 0};return[F.languages.registerCompletionItemProvider(e.documentSelector,n,...r),n]}},Za=class extends Ne{constructor(e){super(e,h.HoverRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[h.MarkupKind.Markdown,h.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideHover:(n,i,s)=>{let o=this._client,u=(f,g,m)=>o.sendRequest(h.HoverRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(f,g),m).then(o.protocol2CodeConverter.asHover,y=>o.handleFailedRequest(h.HoverRequest.type,y,null)),c=o.clientOptions.middleware;return c.provideHover?c.provideHover(n,i,s,u):u(n,i,s)}};return[F.languages.registerHoverProvider(e.documentSelector,r),r]}},ec=class extends Ne{constructor(e){super(e,h.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[h.MarkupKind.Markdown,h.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(i,s,o,u)=>{let c=this._client,f=(m,y,v,D)=>c.sendRequest(h.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(m,y,v),D).then(c.protocol2CodeConverter.asSignatureHelp,q=>c.handleFailedRequest(h.SignatureHelpRequest.type,q,null)),g=c.clientOptions.middleware;return g.provideSignatureHelp?g.provideSignatureHelp(i,s,u,o,f):f(i,s,u,o)}},n;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];n=F.languages.registerSignatureHelpProvider(e.documentSelector,r,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=F.languages.registerSignatureHelpProvider(e.documentSelector,r,i)}return[n,r]}},tc=class extends Ne{constructor(e){super(e,h.DefinitionRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDefinition:(n,i,s)=>{let o=this._client,u=(f,g,m)=>o.sendRequest(h.DefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(f,g),m).then(o.protocol2CodeConverter.asDefinitionResult,y=>o.handleFailedRequest(h.DefinitionRequest.type,y,null)),c=o.clientOptions.middleware;return c.provideDefinition?c.provideDefinition(n,i,s,u):u(n,i,s)}};return[F.languages.registerDefinitionProvider(e.documentSelector,r),r]}},rc=class extends Ne{constructor(e){super(e,h.ReferencesRequest.type)}fillClientCapabilities(e){$($(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideReferences:(n,i,s,o)=>{let u=this._client,c=(g,m,y,v)=>u.sendRequest(h.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(g,m,y),v).then(u.protocol2CodeConverter.asReferences,D=>u.handleFailedRequest(h.ReferencesRequest.type,D,null)),f=u.clientOptions.middleware;return f.provideReferences?f.provideReferences(n,i,s,o,c):c(n,i,s,o)}};return[F.languages.registerReferenceProvider(e.documentSelector,r),r]}},nc=class extends Ne{constructor(e){super(e,h.DocumentHighlightRequest.type)}fillClientCapabilities(e){$($(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentHighlights:(n,i,s)=>{let o=this._client,u=(f,g,m)=>o.sendRequest(h.DocumentHighlightRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(f,g),m).then(o.protocol2CodeConverter.asDocumentHighlights,y=>o.handleFailedRequest(h.DocumentHighlightRequest.type,y,null)),c=o.clientOptions.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(n,i,s,u):u(n,i,s)}};return[F.languages.registerDocumentHighlightProvider(e.documentSelector,r),r]}},ic=class extends Ne{constructor(e){super(e,h.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Ef},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:Df},r.labelSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentSymbols:(i,s)=>{let o=this._client,u=(f,g)=>o.sendRequest(h.DocumentSymbolRequest.type,o.code2ProtocolConverter.asDocumentSymbolParams(f),g).then(m=>{if(m!==null){if(m.length===0)return[];{let y=m[0];return h.DocumentSymbol.is(y)?o.protocol2CodeConverter.asDocumentSymbols(m):o.protocol2CodeConverter.asSymbolInformations(m)}}},m=>o.handleFailedRequest(h.DocumentSymbolRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(i,s,u):u(i,s)}},n=e.label!==void 0?{label:e.label}:void 0;return[F.languages.registerDocumentSymbolProvider(e.documentSelector,r,n),r]}},sc=class extends Ya{constructor(e){super(e,h.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=$($(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Ef},r.tagSupport={valueSet:Df}}initialize(e){!e.workspaceSymbolProvider||this.register({id:ce.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,i)=>{let s=this._client,o=(c,f)=>s.sendRequest(h.WorkspaceSymbolRequest.type,{query:c},f).then(s.protocol2CodeConverter.asSymbolInformations,g=>s.handleFailedRequest(h.WorkspaceSymbolRequest.type,g,null)),u=s.clientOptions.middleware;return u.provideWorkspaceSymbols?u.provideWorkspaceSymbols(n,i,o):o(n,i)}};return[F.languages.registerWorkspaceSymbolProvider(r),r]}},oc=class extends Ne{constructor(e){super(e,h.CodeActionRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[h.CodeActionKind.Empty,h.CodeActionKind.QuickFix,h.CodeActionKind.Refactor,h.CodeActionKind.RefactorExtract,h.CodeActionKind.RefactorInline,h.CodeActionKind.RefactorRewrite,h.CodeActionKind.Source,h.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!1}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeActions:(n,i,s,o)=>{let u=this._client,c=(g,m,y,v)=>{let D={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(m),context:u.code2ProtocolConverter.asCodeActionContext(y)};return u.sendRequest(h.CodeActionRequest.type,D,v).then(q=>{if(q===null)return;let z=[];for(let I of q)h.Command.is(I)?z.push(u.protocol2CodeConverter.asCommand(I)):z.push(u.protocol2CodeConverter.asCodeAction(I));return z},q=>u.handleFailedRequest(h.CodeActionRequest.type,q,null))},f=u.clientOptions.middleware;return f.provideCodeActions?f.provideCodeActions(n,i,s,o,c):c(n,i,s,o)},resolveCodeAction:e.resolveProvider?(n,i)=>{let s=this._client,o=this._client.clientOptions.middleware,u=(c,f)=>s.sendRequest(h.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(c),f).then(s.protocol2CodeConverter.asCodeAction,g=>s.handleFailedRequest(h.CodeActionResolveRequest.type,g,c));return o.resolveCodeAction?o.resolveCodeAction(n,i,u):u(n,i)}:void 0};return[F.languages.registerCodeActionsProvider(e.documentSelector,r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}},ac=class extends Ne{constructor(e){super(e,h.CodeLensRequest.type)}fillClientCapabilities(e){$($(e,"textDocument"),"codeLens").dynamicRegistration=!0,$($(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,r){this._client.onRequest(h.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(r,e.codeLensProvider);!i||this.register({id:ce.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let r=new F.EventEmitter,n={onDidChangeCodeLenses:r.event,provideCodeLenses:(i,s)=>{let o=this._client,u=(f,g)=>o.sendRequest(h.CodeLensRequest.type,o.code2ProtocolConverter.asCodeLensParams(f),g).then(o.protocol2CodeConverter.asCodeLenses,m=>o.handleFailedRequest(h.CodeLensRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideCodeLenses?c.provideCodeLenses(i,s,u):u(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let o=this._client,u=(f,g)=>o.sendRequest(h.CodeLensResolveRequest.type,o.code2ProtocolConverter.asCodeLens(f),g).then(o.protocol2CodeConverter.asCodeLens,m=>o.handleFailedRequest(h.CodeLensResolveRequest.type,m,f)),c=o.clientOptions.middleware;return c.resolveCodeLens?c.resolveCodeLens(i,s,u):u(i,s)}:void 0};return[F.languages.registerCodeLensProvider(e.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:r}]}},cc=class extends Ne{constructor(e){super(e,h.DocumentFormattingRequest.type)}fillClientCapabilities(e){$($(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentFormattingEdits:(n,i,s)=>{let o=this._client,u=(f,g,m)=>{let y={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(f),options:o.code2ProtocolConverter.asFormattingOptions(g,Un.fromConfiguration(f))};return o.sendRequest(h.DocumentFormattingRequest.type,y,m).then(o.protocol2CodeConverter.asTextEdits,v=>o.handleFailedRequest(h.DocumentFormattingRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(n,i,s,u):u(n,i,s)}};return[F.languages.registerDocumentFormattingEditProvider(e.documentSelector,r),r]}},uc=class extends Ne{constructor(e){super(e,h.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){$($(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentRangeFormattingEdits:(n,i,s,o)=>{let u=this._client,c=(g,m,y,v)=>{let D={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(m),options:u.code2ProtocolConverter.asFormattingOptions(y,Un.fromConfiguration(g))};return u.sendRequest(h.DocumentRangeFormattingRequest.type,D,v).then(u.protocol2CodeConverter.asTextEdits,q=>u.handleFailedRequest(h.DocumentRangeFormattingRequest.type,q,null))},f=u.clientOptions.middleware;return f.provideDocumentRangeFormattingEdits?f.provideDocumentRangeFormattingEdits(n,i,s,o,c):c(n,i,s,o)}};return[F.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,r),r]}},lc=class extends Ne{constructor(e){super(e,h.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){$($(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideOnTypeFormattingEdits:(i,s,o,u,c)=>{let f=this._client,g=(y,v,D,q,z)=>{let I={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(y),position:f.code2ProtocolConverter.asPosition(v),ch:D,options:f.code2ProtocolConverter.asFormattingOptions(q,Un.fromConfiguration(y))};return f.sendRequest(h.DocumentOnTypeFormattingRequest.type,I,z).then(f.protocol2CodeConverter.asTextEdits,E=>f.handleFailedRequest(h.DocumentOnTypeFormattingRequest.type,E,null))},m=f.clientOptions.middleware;return m.provideOnTypeFormattingEdits?m.provideOnTypeFormattingEdits(i,s,o,u,c,g):g(i,s,o,u,c)}},n=e.moreTriggerCharacter||[];return[F.languages.registerOnTypeFormattingEditProvider(e.documentSelector,r,e.firstTriggerCharacter,...n),r]}},dc=class extends Ne{constructor(e){super(e,h.RenameRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=h.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);!n||(ae.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:ce.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r={provideRenameEdits:(n,i,s,o)=>{let u=this._client,c=(g,m,y,v)=>{let D={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),position:u.code2ProtocolConverter.asPosition(m),newName:y};return u.sendRequest(h.RenameRequest.type,D,v).then(u.protocol2CodeConverter.asWorkspaceEdit,q=>u.handleFailedRequest(h.RenameRequest.type,q,null))},f=u.clientOptions.middleware;return f.provideRenameEdits?f.provideRenameEdits(n,i,s,o,c):c(n,i,s,o)},prepareRename:e.prepareProvider?(n,i,s)=>{let o=this._client,u=(f,g,m)=>{let y={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(f),position:o.code2ProtocolConverter.asPosition(g)};return o.sendRequest(h.PrepareRenameRequest.type,y,m).then(v=>h.Range.is(v)?o.protocol2CodeConverter.asRange(v):this.isDefaultBehavior(v)?v.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):v&&h.Range.is(v.range)?{range:o.protocol2CodeConverter.asRange(v.range),placeholder:v.placeholder}:Promise.reject(new Error("The element can't be renamed.")),v=>o.handleFailedRequest(h.PrepareRenameRequest.type,v,void 0))},c=o.clientOptions.middleware;return c.prepareRename?c.prepareRename(n,i,s,u):u(n,i,s)}:void 0};return[F.languages.registerRenameProvider(e.documentSelector,r),r]}isDefaultBehavior(e){let r=e;return r&&ae.boolean(r.defaultBehavior)}},fc=class extends Ne{constructor(e){super(e,h.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=$($(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentLinks:(n,i)=>{let s=this._client,o=(c,f)=>s.sendRequest(h.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(c),f).then(s.protocol2CodeConverter.asDocumentLinks,g=>s.handleFailedRequest(h.DocumentLinkRequest.type,g,null)),u=s.clientOptions.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(n,i,o):o(n,i)},resolveDocumentLink:e.resolveProvider?(n,i)=>{let s=this._client,o=(c,f)=>s.sendRequest(h.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(c),f).then(s.protocol2CodeConverter.asDocumentLink,g=>s.handleFailedRequest(h.DocumentLinkResolveRequest.type,g,c)),u=s.clientOptions.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(n,i,o):o(n,i)}:void 0};return[F.languages.registerDocumentLinkProvider(e.documentSelector,r),r]}},hc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return h.DidChangeConfigurationNotification.type}fillClientCapabilities(e){$($(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:ce.generateUuid(),registerOptions:{section:e}})}register(e){let r=F.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,r),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,r){let n;if(ae.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(u=>r.affectsConfiguration(u)))return;let i=o=>{if(o===void 0){this._client.sendNotification(h.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(h.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)})},s=this.getMiddleware();s?s(n,i):i(n)}extractSettingsInformation(e){function r(s,o){let u=s;for(let c=0;c<o.length-1;c++){let f=u[o[c]];f||(f=Object.create(null),u[o[c]]=f),u=f}return u}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],u=o.indexOf("."),c=null;if(u>=0?c=F.workspace.getConfiguration(o.substr(0,u),n).get(o.substr(u+1)):c=F.workspace.getConfiguration(void 0,n).get(o),c){let f=e[s].split(".");r(i,f)[f[f.length-1]]=OR.toJSONObject(c)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},pc=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return h.ExecuteCommandRequest.type}fillClientCapabilities(e){$($(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:ce.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let r=this._client,n=r.clientOptions.middleware,i=(s,o)=>{let u={command:s,arguments:o};return r.sendRequest(h.ExecuteCommandRequest.type,u).then(void 0,c=>r.handleFailedRequest(h.ExecuteCommandRequest.type,c,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(F.commands.registerCommand(o,(...u)=>n.executeCommand?n.executeCommand(o,u,i):i(o,u)));this._commands.set(e.id,s)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}},AR;(function(t){function e(r){return r&&h.MessageReader.is(r.reader)&&h.MessageWriter.is(r.writer)}t.is=e})(AR=ye.MessageTransports||(ye.MessageTransports={}));var Wi=class{constructor(e,r){this._resolve=e,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Pr=class{constructor(e,r,n){var i;this._traceFormat=h.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=r,n=n||{};let s={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||Kn.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||this.createDefaultErrorHandler((i=n.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=de.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Pf.Delayer(250),this._onReady=new Promise((o,u)=>{this._onReadyCallbacks=new Wi(o,u)}),this._onStop=void 0,this._telemetryEmitter=new h.Emitter,this._stateChangeEmitter=new h.Emitter,this._trace=h.Trace.Off,this._tracer={log:(o,u)=>{ae.string(o)?this.logTrace(o,u):this.logObjectTrace(o)}},this._c2p=kR.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=NR.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===de.Running?ji.Running:this.state===de.Starting?ji.Starting:ji.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...r)}catch(n){throw this.error(`Sending request ${ae.string(e)?e:e.method} failed.`,n),n}}onRequest(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,r)}catch(n){throw this.error(`Registering request handler ${ae.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,r)}catch(n){throw this.error(`Sending notification ${ae.string(e)?e:e.method} failed.`,n),n}}onNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,r)}catch(n){throw this.error(`Registering notification handler ${ae.string(e)?e:e.method} failed.`,n),n}}onProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(h.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,r,s=>{i(r,s,()=>n(s))})}return this._resolvedConnection.onProgress(e,r,n)}catch(i){throw this.error(`Registering progress handler for token ${r} failed.`,i),i}}sendProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,r,n)}catch(i){throw this.error(`Sending progress for token ${r} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=F.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Ha(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof h.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?ae.string(e.stack)?e.stack:e.message:ae.string(e)?e:e.toString()}info(e,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Kn.Info&&this.showNotificationMessage()}warn(e,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Kn.Warn&&this.showNotificationMessage()}error(e,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Kn.Error&&this.showNotificationMessage()}showNotificationMessage(){F.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===de.Initial||this.state===de.Stopping||this.state===de.Stopped}needsStop(){return this.state===de.Starting||this.state===de.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===de.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,r)=>{this._onReadyCallbacks=new Wi(e,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?F.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):F.languages.createDiagnosticCollection()),this.state=de.Starting,this.resolveConnection().then(e=>(e.onLogMessage(r=>{switch(r.type){case h.MessageType.Error:this.error(r.message,void 0,!1);break;case h.MessageType.Warning:this.warn(r.message,void 0,!1);break;case h.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),e.onShowMessage(r=>{switch(r.type){case h.MessageType.Error:F.window.showErrorMessage(r.message);break;case h.MessageType.Warning:F.window.showWarningMessage(r.message);break;case h.MessageType.Info:F.window.showInformationMessage(r.message);break;default:F.window.showInformationMessage(r.message)}}),e.onRequest(h.ShowMessageRequest.type,r=>{let n;switch(r.type){case h.MessageType.Error:n=F.window.showErrorMessage;break;case h.MessageType.Warning:n=F.window.showWarningMessage;break;case h.MessageType.Info:n=F.window.showInformationMessage;break;default:n=F.window.showInformationMessage}let i=r.actions||[];return n(r.message,...i)}),e.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),e.onRequest(h.ShowDocumentRequest.type,async r=>{var n;let i=async o=>{let u=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await F.env.openExternal(u)};{let c={};return o.selection!==void 0&&(c.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?c.preserveFocus=!0:o.takeFocus===!0&&(c.preserveFocus=!1),await F.window.showTextDocument(u,c),{success:!0}}}catch{return{success:!0}}},s=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return s!==void 0?s(r,i):i(r)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=de.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),F.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new F.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:F.env.appName,version:F.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(F.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ae.func(r)?r():r,trace:h.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=ce.generateUuid(),o=new IR.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(u=>(o.done(),u),u=>{throw o.cancel(),u})}else return this.doInitialize(e,i)}doInitialize(e,r){return e.initialize(r).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=de.Running;let i;return ae.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===h.TextDocumentSyncKind.None?i={openClose:!1,change:h.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(h.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(h.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(h.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(h.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof h.ResponseError&&n.data&&n.data.retry?F.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&F.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=F.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===de.Stopping&&this._onStop?this._onStop:(this.state=de.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=de.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=de.Stopped,Promise.resolve())}cleanUp(e=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();e&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var r;let n=this;function i(o){n._fileEvents.push(o),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(u=>{n.isConnectionActive()&&(n.forceDocumentSync(),u.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},u=>{n.error("Notify file events failed.",u)})})}let s=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;s?.didChangeWatchedFile?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(h.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let r=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(r,n,(s,o)=>this.setDiagnostics(s,o)):this.setDiagnostics(r,n)}setDiagnostics(e,r){!this._diagnostics||this._diagnostics.set(e,r)}createConnection(){let e=(n,i,s)=>{this.handleConnectionError(n,i,s)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>FR(n.reader,n.writer,e,r,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===de.Stopping||this.state===de.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=Tr.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===Tr.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===de.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=de.StartFailed):this.state=de.Stopped,this.cleanUp(!1,!0)):e===Tr.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=de.Initial,this.start())}handleConnectionError(e,r,n){this._clientOptions.errorHandler.error(e,r,n)===$i.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){F.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,r=!1){let n=F.workspace.getConfiguration(this._id),i=h.Trace.Off,s=h.TraceFormat.Text;if(n){let o=n.get("trace.server","off");typeof o=="string"?i=h.Trace.fromString(o):(i=h.Trace.fromString(n.get("trace.server.verbosity","off")),s=h.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;ae.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(h.DidChangeWatchedFilesNotification.type.method).registerRaw(ce.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),za.is(e)){let r=e.registrationType;this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new hc(this)),this.registerFeature(new Ka(this,this._syncedDocuments)),this.registerFeature(new Ga(this)),this.registerFeature(new Ba(this)),this.registerFeature(new Xa(this)),this.registerFeature(new Ja(this)),this.registerFeature(new Ua(this,this._syncedDocuments)),this.registerFeature(new Va(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Qa(this)),this.registerFeature(new Za(this)),this.registerFeature(new ec(this)),this.registerFeature(new tc(this)),this.registerFeature(new rc(this)),this.registerFeature(new nc(this)),this.registerFeature(new ic(this)),this.registerFeature(new sc(this)),this.registerFeature(new oc(this)),this.registerFeature(new ac(this)),this.registerFeature(new cc(this)),this.registerFeature(new uc(this)),this.registerFeature(new lc(this)),this.registerFeature(new dc(this)),this.registerFeature(new fc(this)),this.registerFeature(new pc(this))}fillInitializeParams(e){for(let r of this._features)ae.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};$(e,"workspace").applyEdit=!0;let r=$($(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[h.ResourceOperationKind.Create,h.ResourceOperationKind.Rename,h.ResourceOperationKind.Delete],r.failureHandling=h.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=$($(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[h.DiagnosticTag.Unnecessary,h.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=$(e,"window"),s=$(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=$(i,"showDocument");o.support=!0;let u=$(e,"general");u.regularExpressions={engine:"ECMAScript",version:"ES2020"},u.markdown={parser:"marked",version:"1.1.0"};for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(e){return new Promise((r,n)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let o=i.registerOptions||{};o.documentSelector=o.documentSelector||this._clientOptions.documentSelector;let u={id:i.id,registerOptions:o};try{s.register(u)}catch(c){n(c);return}}r()})}handleUnregistrationRequest(e){return new Promise((r,n)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){n(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}r()})}handleApplyWorkspaceEdit(e){let r=e.edit,n=new Map;F.workspace.textDocuments.forEach(s=>n.set(s.uri.toString(),s));let i=!1;if(r.documentChanges){for(let s of r.documentChanges)if(h.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let o=n.get(s.textDocument.uri);if(o&&o.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):ae.asPromise(F.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,r,n){if(r instanceof h.ResponseError){if(r.code===h.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(r.code===h.LSPErrorCodes.ContentModified)return n}throw this.error(`Request ${e.method} failed.`,r),r}makeCancelError(){let e=new Error(Pr.Canceled);return e.name=Pr.Canceled,e}};ye.BaseLanguageClient=Pr;Pr.Canceled="Canceled"});var qf=w(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.ColorProviderFeature=void 0;var Hi=require("vscode"),Gn=pe(),MR=Ze();function xf(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var gc=class extends MR.TextDocumentFeature{constructor(e){super(e,Gn.DocumentColorRequest.type)}fillClientCapabilities(e){xf(xf(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideColorPresentations:(n,i,s)=>{let o=this._client,u=(f,g,m)=>{let y={color:f,textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(g.document),range:o.code2ProtocolConverter.asRange(g.range)};return o.sendRequest(Gn.ColorPresentationRequest.type,y,m).then(this.asColorPresentations.bind(this),v=>o.handleFailedRequest(Gn.ColorPresentationRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideColorPresentations?c.provideColorPresentations(n,i,s,u):u(n,i,s)},provideDocumentColors:(n,i)=>{let s=this._client,o=(c,f)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(c)};return s.sendRequest(Gn.DocumentColorRequest.type,g,f).then(this.asColorInformations.bind(this),m=>s.handleFailedRequest(Gn.ColorPresentationRequest.type,m,null))},u=s.clientOptions.middleware;return u.provideDocumentColors?u.provideDocumentColors(n,i,o):o(n,i)}};return[Hi.languages.registerColorProvider(e.documentSelector,r),r]}asColor(e){return new Hi.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(r=>new Hi.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(r=>{let n=new Hi.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};zi.ColorProviderFeature=gc});var kf=w(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ImplementationFeature=void 0;var jR=require("vscode"),mc=pe(),$R=Ze();function Of(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var vc=class extends $R.TextDocumentFeature{constructor(e){super(e,mc.ImplementationRequest.type)}fillClientCapabilities(e){let r=Of(Of(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideImplementation:(n,i,s)=>{let o=this._client,u=(f,g,m)=>o.sendRequest(mc.ImplementationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(f,g),m).then(o.protocol2CodeConverter.asDefinitionResult,y=>o.handleFailedRequest(mc.ImplementationRequest.type,y,null)),c=o.clientOptions.middleware;return c.provideImplementation?c.provideImplementation(n,i,s,u):u(n,i,s)}};return[jR.languages.registerImplementationProvider(e.documentSelector,r),r]}};Ki.ImplementationFeature=vc});var Nf=w(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.TypeDefinitionFeature=void 0;var WR=require("vscode"),yc=pe(),HR=Ze();function Ui(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Rc=class extends HR.TextDocumentFeature{constructor(e){super(e,yc.TypeDefinitionRequest.type)}fillClientCapabilities(e){Ui(Ui(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=Ui(Ui(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideTypeDefinition:(n,i,s)=>{let o=this._client,u=(f,g,m)=>o.sendRequest(yc.TypeDefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(f,g),m).then(o.protocol2CodeConverter.asDefinitionResult,y=>o.handleFailedRequest(yc.TypeDefinitionRequest.type,y,null)),c=o.clientOptions.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(n,i,s,u):u(n,i,s)}};return[WR.languages.registerTypeDefinitionProvider(e.documentSelector,r),r]}};Gi.TypeDefinitionFeature=Rc});var If=w(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.WorkspaceFoldersFeature=sn.arrayDiff=void 0;var zR=Ai(),Bi=require("vscode"),Cc=pe();function _c(t,e){if(t!==void 0)return t[e]}function wc(t,e){return t.filter(r=>e.indexOf(r)<0)}sn.arrayDiff=wc;var Sc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Cc.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=Bi.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(Cc.WorkspaceFoldersRequest.type,s=>{let o=()=>{let c=Bi.workspace.workspaceFolders;return c===void 0?null:c.map(g=>this.asProtocol(g))},u=r.clientOptions.middleware.workspace;return u&&u.workspaceFolders?u.workspaceFolders(s,o):o(s)});let n=_c(_c(_c(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=zR.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let r=wc(this._initialFolders,e),n=wc(e,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,r){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:r.map(i=>this.asProtocol(i))}};this._client.sendNotification(Cc.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let r=e.id,n=this._client,i=Bi.workspace.onDidChangeWorkspaceFolders(s=>{let o=c=>{this.doSendEvent(c.added,c.removed)},u=n.clientOptions.middleware.workspace;u&&u.didChangeWorkspaceFolders?u.didChangeWorkspaceFolders(s,o):o(s)});this._listeners.set(r,i),this.sendInitialEvent(Bi.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};sn.WorkspaceFoldersFeature=Sc});var Lf=w(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.FoldingRangeFeature=void 0;var Bn=require("vscode"),on=pe(),KR=Ze();function Ff(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var an=class extends KR.TextDocumentFeature{constructor(e){super(e,on.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=Ff(Ff(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideFoldingRanges:(n,i,s)=>{let o=this._client,u=(f,g,m)=>{let y={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(f)};return o.sendRequest(on.FoldingRangeRequest.type,y,m).then(an.asFoldingRanges,v=>o.handleFailedRequest(on.FoldingRangeRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(n,i,s,u):u(n,i,s)}};return[Bn.languages.registerFoldingRangeProvider(e.documentSelector,r),r]}static asFoldingRangeKind(e){if(e)switch(e){case on.FoldingRangeKind.Comment:return Bn.FoldingRangeKind.Comment;case on.FoldingRangeKind.Imports:return Bn.FoldingRangeKind.Imports;case on.FoldingRangeKind.Region:return Bn.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(r=>new Bn.FoldingRange(r.startLine,r.endLine,an.asFoldingRangeKind(r.kind))):[]}};Xi.FoldingRangeFeature=an});var Mf=w(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.DeclarationFeature=void 0;var UR=require("vscode"),bc=pe(),GR=Ze();function Af(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Tc=class extends GR.TextDocumentFeature{constructor(e){super(e,bc.DeclarationRequest.type)}fillClientCapabilities(e){let r=Af(Af(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideDeclaration:(n,i,s)=>{let o=this._client,u=(f,g,m)=>o.sendRequest(bc.DeclarationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(f,g),m).then(o.protocol2CodeConverter.asDeclarationResult,y=>o.handleFailedRequest(bc.DeclarationRequest.type,y,null)),c=o.clientOptions.middleware;return c.provideDeclaration?c.provideDeclaration(n,i,s,u):u(n,i,s)}};return[UR.languages.registerDeclarationProvider(e.documentSelector,r),r]}};Ji.DeclarationFeature=Tc});var $f=w(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.SelectionRangeFeature=void 0;var BR=require("vscode"),Pc=pe(),XR=Ze();function jf(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Ec=class extends XR.TextDocumentFeature{constructor(e){super(e,Pc.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=jf(jf(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideSelectionRanges:(n,i,s)=>{let o=this._client,u=(f,g,m)=>{let y={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(f),positions:o.code2ProtocolConverter.asPositions(g)};return o.sendRequest(Pc.SelectionRangeRequest.type,y,m).then(v=>o.protocol2CodeConverter.asSelectionRanges(v),v=>o.handleFailedRequest(Pc.SelectionRangeRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(n,i,s,u):u(n,i,s)}};return[BR.languages.registerSelectionRangeProvider(e.documentSelector,r),r]}};Vi.SelectionRangeFeature=Ec});var Wf=w(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.ProgressFeature=void 0;var JR=pe(),VR=$a();function YR(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Dc=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){YR(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new VR.ProgressPart(this._client,i.token,r))};e.onRequest(JR.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Yi.ProgressFeature=Dc});var zf=w(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.CallHierarchyFeature=void 0;var QR=require("vscode"),Er=pe(),ZR=Ze();function Hf(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var xc=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,r,n){let i=this.client,s=this.middleware,o=(u,c,f)=>{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(u,c);return i.sendRequest(Er.CallHierarchyPrepareRequest.type,g,f).then(m=>i.protocol2CodeConverter.asCallHierarchyItems(m),m=>i.handleFailedRequest(Er.CallHierarchyPrepareRequest.type,m,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,r,n,o):o(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,i=this.middleware,s=(o,u)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(Er.CallHierarchyIncomingCallsRequest.type,c,u).then(f=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(f),f=>n.handleFailedRequest(Er.CallHierarchyIncomingCallsRequest.type,f,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,r,s):s(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,i=this.middleware,s=(o,u)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(Er.CallHierarchyOutgoingCallsRequest.type,c,u).then(f=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(f),f=>n.handleFailedRequest(Er.CallHierarchyOutgoingCallsRequest.type,f,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,r,s):s(e,r)}},qc=class extends ZR.TextDocumentFeature{constructor(e){super(e,Er.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=Hf(Hf(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new xc(r);return[QR.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};Qi.CallHierarchyFeature=qc});var Kf=w(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.SemanticTokensFeature=void 0;var Zi=require("vscode"),eC=Ze(),B=pe(),tC=Jt();function es(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Oc=class extends eC.TextDocumentFeature{constructor(e){super(e,B.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let r=es(es(e,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[B.SemanticTokenTypes.namespace,B.SemanticTokenTypes.type,B.SemanticTokenTypes.class,B.SemanticTokenTypes.enum,B.SemanticTokenTypes.interface,B.SemanticTokenTypes.struct,B.SemanticTokenTypes.typeParameter,B.SemanticTokenTypes.parameter,B.SemanticTokenTypes.variable,B.SemanticTokenTypes.property,B.SemanticTokenTypes.enumMember,B.SemanticTokenTypes.event,B.SemanticTokenTypes.function,B.SemanticTokenTypes.method,B.SemanticTokenTypes.macro,B.SemanticTokenTypes.keyword,B.SemanticTokenTypes.modifier,B.SemanticTokenTypes.comment,B.SemanticTokenTypes.string,B.SemanticTokenTypes.number,B.SemanticTokenTypes.regexp,B.SemanticTokenTypes.operator],r.tokenModifiers=[B.SemanticTokenModifiers.declaration,B.SemanticTokenModifiers.definition,B.SemanticTokenModifiers.readonly,B.SemanticTokenModifiers.static,B.SemanticTokenModifiers.deprecated,B.SemanticTokenModifiers.abstract,B.SemanticTokenModifiers.async,B.SemanticTokenModifiers.modification,B.SemanticTokenModifiers.documentation,B.SemanticTokenModifiers.defaultLibrary],r.formats=[B.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,es(es(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,r){this._client.onRequest(B.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(r,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let r=tC.boolean(e.full)?e.full:e.full!==void 0,n=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new Zi.EventEmitter,s=r?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(m,y)=>{let v=this._client,D=v.clientOptions.middleware,q=(z,I)=>{let E={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(z)};return v.sendRequest(B.SemanticTokensRequest.type,E,I).then(O=>v.protocol2CodeConverter.asSemanticTokens(O),O=>v.handleFailedRequest(B.SemanticTokensRequest.type,O,null))};return D.provideDocumentSemanticTokens?D.provideDocumentSemanticTokens(m,y,q):q(m,y)},provideDocumentSemanticTokensEdits:n?(m,y,v)=>{let D=this._client,q=D.clientOptions.middleware,z=(I,E,O)=>{let T={textDocument:D.code2ProtocolConverter.asTextDocumentIdentifier(I),previousResultId:E};return D.sendRequest(B.SemanticTokensDeltaRequest.type,T,O).then(re=>B.SemanticTokens.is(re)?D.protocol2CodeConverter.asSemanticTokens(re):D.protocol2CodeConverter.asSemanticTokensEdits(re),re=>D.handleFailedRequest(B.SemanticTokensDeltaRequest.type,re,null))};return q.provideDocumentSemanticTokensEdits?q.provideDocumentSemanticTokensEdits(m,y,v,z):z(m,y,v)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(m,y,v)=>{let D=this._client,q=D.clientOptions.middleware,z=(I,E,O)=>{let T={textDocument:D.code2ProtocolConverter.asTextDocumentIdentifier(I),range:D.code2ProtocolConverter.asRange(E)};return D.sendRequest(B.SemanticTokensRangeRequest.type,T,O).then(re=>D.protocol2CodeConverter.asSemanticTokens(re),re=>D.handleFailedRequest(B.SemanticTokensRangeRequest.type,re,null))};return q.provideDocumentRangeSemanticTokens?q.provideDocumentRangeSemanticTokens(m,y,v,z):z(m,y,v)}}:void 0,c=[],g=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&c.push(Zi.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,g)),u!==void 0&&c.push(Zi.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,u,g)),[new Zi.Disposable(()=>c.forEach(m=>m.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:i}]}};ts.SemanticTokensFeature=Oc});var Gf=w((iS,Uf)=>{Uf.exports=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);rC(i)?r.push.apply(r,i):r.push(i)}return r};var rC=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var Yf=w((sS,Vf)=>{"use strict";Vf.exports=Xf;function Xf(t,e,r){t instanceof RegExp&&(t=Bf(t,r)),e instanceof RegExp&&(e=Bf(e,r));var n=Jf(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function Bf(t,e){var r=e.match(t);return r?r[0]:null}Xf.range=Jf;function Jf(t,e,r){var n,i,s,o,u,c=r.indexOf(t),f=r.indexOf(e,c+1),g=c;if(c>=0&&f>0){if(t===e)return[c,f];for(n=[],s=r.length;g>=0&&!u;)g==c?(n.push(g),c=r.indexOf(t,g+1)):n.length==1?u=[n.pop(),f]:(i=n.pop(),i<s&&(s=i,o=f),f=r.indexOf(e,g+1)),g=c<f&&c>=0?c:f;n.length&&(u=[s,o])}return u}});var sh=w((oS,ih)=>{var nC=Gf(),Qf=Yf();ih.exports=oC;var Zf="\0SLASH"+Math.random()+"\0",eh="\0OPEN"+Math.random()+"\0",Nc="\0CLOSE"+Math.random()+"\0",th="\0COMMA"+Math.random()+"\0",rh="\0PERIOD"+Math.random()+"\0";function kc(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function iC(t){return t.split("\\\\").join(Zf).split("\\{").join(eh).split("\\}").join(Nc).split("\\,").join(th).split("\\.").join(rh)}function sC(t){return t.split(Zf).join("\\").split(eh).join("{").split(Nc).join("}").split(th).join(",").split(rh).join(".")}function nh(t){if(!t)return[""];var e=[],r=Qf("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var u=nh(s);return s.length&&(o[o.length-1]+=u.shift(),o.push.apply(o,u)),e.push.apply(e,o),e}function oC(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),cn(iC(t),!0).map(sC)):[]}function aC(t){return"{"+t+"}"}function cC(t){return/^-?0\d/.test(t)}function uC(t,e){return t<=e}function lC(t,e){return t>=e}function cn(t,e){var r=[],n=Qf("{","}",t);if(!n||/\$$/.test(n.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),o=i||s,u=n.body.indexOf(",")>=0;if(!o&&!u)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Nc+n.post,cn(t)):[t];var c;if(o)c=n.body.split(/\.\./);else if(c=nh(n.body),c.length===1&&(c=cn(c[0],!1).map(aC),c.length===1)){var g=n.post.length?cn(n.post,!1):[""];return g.map(function(je){return n.pre+c[0]+je})}var f=n.pre,g=n.post.length?cn(n.post,!1):[""],m;if(o){var y=kc(c[0]),v=kc(c[1]),D=Math.max(c[0].length,c[1].length),q=c.length==3?Math.abs(kc(c[2])):1,z=uC,I=v<y;I&&(q*=-1,z=lC);var E=c.some(cC);m=[];for(var O=y;z(O,v);O+=q){var T;if(s)T=String.fromCharCode(O),T==="\\"&&(T="");else if(T=String(O),E){var re=D-T.length;if(re>0){var tt=new Array(re+1).join("0");O<0?T="-"+tt+T.slice(1):T=tt+T}}m.push(T)}}else m=nC(c,function(Ve){return cn(Ve,!1)});for(var Me=0;Me<m.length;Me++)for(var Ge=0;Ge<g.length;Ge++){var qe=f+m[Me]+g[Ge];(!e||o||qe)&&r.push(qe)}return r}});var dh=w((aS,lh)=>{lh.exports=et;et.Minimatch=Ie;var Xn=function(){try{return require("path")}catch{}}()||{sep:"/"};et.sep=Xn.sep;var Lc=et.GLOBSTAR=Ie.GLOBSTAR={},dC=sh(),oh={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ic="[^/]",Fc=Ic+"*?",fC="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",hC="(?:(?!(?:\\/|^)\\.).)*?",ah=pC("().*{}+?[]^$\\!");function pC(t){return t.split("").reduce(function(e,r){return e[r]=!0,e},{})}var ch=/\/+/;et.filter=gC;function gC(t,e){return e=e||{},function(r,n,i){return et(r,t,e)}}function tr(t,e){e=e||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}et.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return et;var e=et,r=function(i,s,o){return e(i,s,tr(t,o))};return r.Minimatch=function(i,s){return new e.Minimatch(i,tr(t,s))},r.Minimatch.defaults=function(i){return e.defaults(tr(t,i)).Minimatch},r.filter=function(i,s){return e.filter(i,tr(t,s))},r.defaults=function(i){return e.defaults(tr(t,i))},r.makeRe=function(i,s){return e.makeRe(i,tr(t,s))},r.braceExpand=function(i,s){return e.braceExpand(i,tr(t,s))},r.match=function(n,i,s){return e.match(n,i,tr(t,s))},r};Ie.defaults=function(t){return et.defaults(t).Minimatch};function et(t,e,r){return ns(e),r||(r={}),!r.nocomment&&e.charAt(0)==="#"?!1:new Ie(e,r).match(t)}function Ie(t,e){if(!(this instanceof Ie))return new Ie(t,e);ns(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Xn.sep!=="/"&&(t=t.split(Xn.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Ie.prototype.debug=function(){};Ie.prototype.make=mC;function mC(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(ch)}),this.debug(this.pattern,r),r=r.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Ie.prototype.parseNegate=vC;function vC(){var t=this.pattern,e=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}et.braceExpand=function(t,e){return uh(t,e)};Ie.prototype.braceExpand=uh;function uh(t,e){return e||(this instanceof Ie?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,ns(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:dC(t)}var yC=1024*64,ns=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>yC)throw new TypeError("pattern is too long")};Ie.prototype.parse=RC;var rs={};function RC(t,e){ns(t);var r=this.options;if(t==="**")if(r.noglobstar)t="*";else return Lc;if(t==="")return"";var n="",i=!!r.nocase,s=!1,o=[],u=[],c,f=!1,g=-1,m=-1,y=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function D(){if(c){switch(c){case"*":n+=Fc,i=!0;break;case"?":n+=Ic,i=!0;break;default:n+="\\"+c;break}v.debug("clearStateChar %j %j",c,n),c=!1}}for(var q=0,z=t.length,I;q<z&&(I=t.charAt(q));q++){if(this.debug("%s	%s %s %j",t,q,n,I),s&&ah[I]){n+="\\"+I,s=!1;continue}switch(I){case"/":return!1;case"\\":D(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,q,n,I),f){this.debug("  in class"),I==="!"&&q===m+1&&(I="^"),n+=I;continue}v.debug("call clearStateChar %j",c),D(),c=I,r.noext&&D();continue;case"(":if(f){n+="(";continue}if(!c){n+="\\(";continue}o.push({type:c,start:q-1,reStart:n.length,open:oh[c].open,close:oh[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(f||!o.length){n+="\\)";continue}D(),i=!0;var E=o.pop();n+=E.close,E.type==="!"&&u.push(E),E.reEnd=n.length;continue;case"|":if(f||!o.length||s){n+="\\|",s=!1;continue}D(),n+="|";continue;case"[":if(D(),f){n+="\\"+I;continue}f=!0,m=q,g=n.length,n+=I;continue;case"]":if(q===m+1||!f){n+="\\"+I,s=!1;continue}var O=t.substring(m+1,q);try{RegExp("["+O+"]")}catch{var T=this.parse(O,rs);n=n.substr(0,g)+"\\["+T[0]+"\\]",i=i||T[1],f=!1;continue}i=!0,f=!1,n+=I;continue;default:D(),s?s=!1:ah[I]&&!(I==="^"&&f)&&(n+="\\"),n+=I}}for(f&&(O=t.substr(m+1),T=this.parse(O,rs),n=n.substr(0,g)+"\\["+T[0],i=i||T[1]),E=o.pop();E;E=o.pop()){var re=n.slice(E.reStart+E.open.length);this.debug("setting tail",n,E),re=re.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Rt,Ct,It){return It||(It="\\"),Ct+Ct+It+"|"}),this.debug(`tail=%j
   %s`,re,re,E,n);var tt=E.type==="*"?Fc:E.type==="?"?Ic:"\\"+E.type;i=!0,n=n.slice(0,E.reStart)+tt+"\\("+re}D(),s&&(n+="\\\\");var Me=!1;switch(n.charAt(0)){case"[":case".":case"(":Me=!0}for(var Ge=u.length-1;Ge>-1;Ge--){var qe=u[Ge],Ve=n.slice(0,qe.reStart),je=n.slice(qe.reStart,qe.reEnd-8),Ot=n.slice(qe.reEnd-8,qe.reEnd),rt=n.slice(qe.reEnd);Ot+=rt;var nt=Ve.split("(").length-1,Ye=rt;for(q=0;q<nt;q++)Ye=Ye.replace(/\)[+*?]?/,"");rt=Ye;var kt="";rt===""&&e!==rs&&(kt="$");var ge=Ve+je+rt+kt+Ot;n=ge}if(n!==""&&i&&(n="(?=.)"+n),Me&&(n=y+n),e===rs)return[n,i];if(!i)return _C(t);var Nt=r.nocase?"i":"";try{var $e=new RegExp("^"+n+"$",Nt)}catch{return new RegExp("$.")}return $e._glob=t,$e._src=n,$e}et.makeRe=function(t,e){return new Ie(t,e||{}).makeRe()};Ie.prototype.makeRe=CC;function CC(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?Fc:e.dot?fC:hC,n=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===Lc?r:typeof o=="string"?wC(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}et.match=function(t,e,r){r=r||{};var n=new Ie(e,r);return t=t.filter(function(i){return n.match(i)}),n.options.nonull&&!t.length&&t.push(e),t};Ie.prototype.match=function(e,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var n=this.options;Xn.sep!=="/"&&(e=e.split(Xn.sep).join("/")),e=e.split(ch),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<i.length;o++){var u=i[o],c=e;n.matchBase&&u.length===1&&(c=[s]);var f=this.matchOne(c,u,r);if(f)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Ie.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,u=e.length;i<o&&s<u;i++,s++){this.debug("matchOne loop");var c=e[s],f=t[i];if(this.debug(e,c,f),c===!1)return!1;if(c===Lc){this.debug("GLOBSTAR",[e,c,f]);var g=i,m=s+1;if(m===u){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!n.dot&&t[i].charAt(0)===".")return!1;return!0}for(;g<o;){var y=t[g];if(this.debug(`
globstar while`,t,g,e,m,y),this.matchOne(t.slice(g),e.slice(m),r))return this.debug("globstar found match!",g,o,y),!0;if(y==="."||y===".."||!n.dot&&y.charAt(0)==="."){this.debug("dot detected!",t,g,e,m);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,g,e,m),g===o))}var v;if(typeof c=="string"?(v=f===c,this.debug("string match",c,f,v)):(v=f.match(c),this.debug("pattern match",c,f,v)),!v)return!1}if(i===o&&s===u)return!0;if(i===o)return r;if(s===u)return i===o-1&&t[i]==="";throw new Error("wtf?")};function _C(t){return t.replace(/\\(.)/g,"$1")}function wC(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var ph=w(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.WillDeleteFilesFeature=Je.WillRenameFilesFeature=Je.WillCreateFilesFeature=Je.DidDeleteFilesFeature=Je.DidRenameFilesFeature=Je.DidCreateFilesFeature=void 0;var Dt=require("vscode"),SC=dh(),Ut=pe(),bC=Ai();function fh(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function TC(t,e){return t[e]}function hh(t,e,r){t[e]=r}var rr=class{constructor(e,r,n,i,s){this._filters=new Map,this._client=e,this._event=r,this._registrationType=n,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let r=fh(fh(e,"workspace"),"fileOperations");hh(r,"dynamicRegistration",!0),hh(r,this._clientCapability,!0)}initialize(e){var r;let n=(r=e.workspace)===null||r===void 0?void 0:r.fileOperations,i=n!==void 0?TC(n,this._serverCapability):void 0;if(i?.filters!==void 0)try{this.register({id:bC.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let r=e.registerOptions.filters.map(n=>{let i=new SC.Minimatch(n.pattern.glob,rr.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,r)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,r){let n=await Promise.all(e.files.map(async s=>{let o=r(s),u=o.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let f of c)if(!(f.scheme!==void 0&&f.scheme!==o.scheme)){if(f.matcher.match(u)){if(f.kind===void 0)return!0;let g=await rr.getFileType(o);if(g===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(g===Dt.FileType.File&&f.kind===Ut.FileOperationPatternKind.file||g===Dt.FileType.Directory&&f.kind===Ut.FileOperationPatternKind.folder)return!0}else if(f.kind===Ut.FileOperationPatternKind.folder&&await rr.getFileType(o)===Dt.FileType.Directory&&f.matcher.match(`${u}/`))return!0}return!1})),i=e.files.filter((s,o)=>n[o]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await Dt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Jn=class extends rr{constructor(e,r,n,i,s,o,u){super(e,r,n,i,s),this._notificationType=n,this._accessUri=o,this._createParams=u}async send(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(r,n)}}},Ac=class extends Jn{constructor(e){super(e,Dt.workspace.onDidCreateFiles,Ut.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didCreateFiles?i.didCreateFiles(e,r):r(e)}};Je.DidCreateFilesFeature=Ac;var Mc=class extends Jn{constructor(e){super(e,Dt.workspace.onDidRenameFiles,Ut.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didRenameFiles?i.didRenameFiles(e,r):r(e)}};Je.DidRenameFilesFeature=Mc;var jc=class extends Jn{constructor(e){super(e,Dt.workspace.onDidDeleteFiles,Ut.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didDeleteFiles?i.didDeleteFiles(e,r):r(e)}};Je.DidDeleteFilesFeature=jc;var Vn=class extends rr{constructor(e,r,n,i,s,o,u){super(e,r,n,i,s),this._requestType=n,this._accessUri=o,this._createParams=u}async send(e){let r=this.waitUntil(e);e.waitUntil(r)}async waitUntil(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},$c=class extends Vn{constructor(e){super(e,Dt.workspace.onWillCreateFiles,Ut.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willCreateFiles?i.willCreateFiles(e,r):r(e)}};Je.WillCreateFilesFeature=$c;var Wc=class extends Vn{constructor(e){super(e,Dt.workspace.onWillRenameFiles,Ut.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willRenameFiles?i.willRenameFiles(e,r):r(e)}};Je.WillRenameFilesFeature=Wc;var Hc=class extends Vn{constructor(e){super(e,Dt.workspace.onWillDeleteFiles,Ut.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willDeleteFiles?i.willDeleteFiles(e,r):r(e)}};Je.WillDeleteFilesFeature=Hc});var mh=w(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.LinkedEditingFeature=void 0;var PC=require("vscode"),zc=pe(),EC=Ze();function gh(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Kc=class extends EC.TextDocumentFeature{constructor(e){super(e,zc.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let r=gh(gh(e,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideLinkedEditingRanges:(n,i,s)=>{let o=this._client,u=(f,g,m)=>o.sendRequest(zc.LinkedEditingRangeRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(f,g),m).then(o.protocol2CodeConverter.asLinkedEditingRanges,y=>o.handleFailedRequest(zc.LinkedEditingRangeRequest.type,y,null)),c=o.clientOptions.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(n,i,s,u):u(n,i,s)}};return[PC.languages.registerLinkedEditingRangeProvider(e.documentSelector,r),r]}};is.LinkedEditingFeature=Kc});var Gc=w(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ProposedFeatures=Dr.CommonLanguageClient=void 0;var DC=Ze(),xC=qf(),qC=ya(),OC=kf(),kC=Nf(),NC=If(),IC=Lf(),FC=Mf(),LC=$f(),AC=Wf(),MC=zf(),jC=Kf(),un=ph(),$C=mh(),Uc=class extends DC.BaseLanguageClient{constructor(e,r,n){super(e,r,n)}registerProposedFeatures(){this.registerFeatures(vh.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new qC.ConfigurationFeature(this)),this.registerFeature(new kC.TypeDefinitionFeature(this)),this.registerFeature(new OC.ImplementationFeature(this)),this.registerFeature(new xC.ColorProviderFeature(this)),this.registerFeature(new NC.WorkspaceFoldersFeature(this)),this.registerFeature(new IC.FoldingRangeFeature(this)),this.registerFeature(new FC.DeclarationFeature(this)),this.registerFeature(new LC.SelectionRangeFeature(this)),this.registerFeature(new AC.ProgressFeature(this)),this.registerFeature(new MC.CallHierarchyFeature(this)),this.registerFeature(new jC.SemanticTokensFeature(this)),this.registerFeature(new $C.LinkedEditingFeature(this)),this.registerFeature(new un.DidCreateFilesFeature(this)),this.registerFeature(new un.DidRenameFilesFeature(this)),this.registerFeature(new un.DidDeleteFilesFeature(this)),this.registerFeature(new un.WillCreateFilesFeature(this)),this.registerFeature(new un.WillRenameFilesFeature(this)),this.registerFeature(new un.WillDeleteFilesFeature(this))}};Dr.CommonLanguageClient=Uc;var vh;(function(t){function e(r){return[]}t.createAll=e})(vh=Dr.ProposedFeatures||(Dr.ProposedFeatures={}))});var Rh=w(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.terminate=void 0;var yh=require("child_process"),WC=require("path"),HC=process.platform==="win32",zC=process.platform==="darwin",KC=process.platform==="linux";function UC(t,e){if(HC)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),yh.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(KC||zC)try{var r=WC.join(__dirname,"terminateProcess.sh"),n=yh.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}ss.terminate=UC});var Bc=w((fS,Ch)=>{"use strict";Ch.exports=pe()});var _h=w(Gt=>{"use strict";var GC=Gt&&Gt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xc=Gt&&Gt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&GC(e,t,r)};Object.defineProperty(Gt,"__esModule",{value:!0});Xc(pe(),Gt);Xc(Ze(),Gt);Xc(Gc(),Gt)});var Th=w(Ue=>{"use strict";var BC=Ue&&Ue.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bh=Ue&&Ue.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&BC(e,t,r)};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.SettingMonitor=Ue.LanguageClient=Ue.TransportKind=void 0;var xr=require("child_process"),Jc=require("fs"),Vc=require("path"),wh=id(),nr=require("vscode"),we=Jt(),XC=Gc(),JC=Ze(),VC=Rh(),_e=Bc();bh(Bc(),Ue);bh(_h(),Ue);var Sh="^1.52.0",Yc;(function(t){function e(r){return we.string(r.command)}t.is=e})(Yc||(Yc={}));var Fe;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Fe=Ue.TransportKind||(Ue.TransportKind={}));var ln;(function(t){function e(r){let n=r;return n&&n.kind===Fe.socket&&we.number(n.port)}t.isSocket=e})(ln||(ln={}));var Qc;(function(t){function e(r){return we.string(r.module)}t.is=e})(Qc||(Qc={}));var Zc;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(Zc||(Zc={}));var eu;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(eu||(eu={}));var tu=class extends XC.CommonLanguageClient{constructor(e,r,n,i,s){let o,u,c,f,g;we.string(r)?(o=e,u=r,c=n,f=i,g=!!s):(o=e.toLowerCase(),u=e,c=r,f=n,g=i),g===void 0&&(g=!1),super(o,u,f),this._serverOptions=c,this._forceDebug=g;try{this.checkVersion()}catch(m){throw we.string(m.message)&&this.outputChannel.appendLine(m.message),m}}checkVersion(){let e=wh.parse(nr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${nr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!wh.satisfies(e,Sh))throw new Error(`The language client requires VS Code version ${Sh} but received version ${nr.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),VC.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function r(g,m){if(!g&&!m)return;let y=Object.create(null);return Object.keys(process.env).forEach(v=>y[v]=process.env[v]),m&&(y.ELECTRON_RUN_AS_NODE="1",y.ELECTRON_NO_ASAR="1"),g&&Object.keys(g).forEach(v=>y[v]=g[v]),y}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let g=process.execArgv;return g?g.some(m=>n.some(y=>m.startsWith(y))||i.some(y=>m===y)):!1}function o(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error("Process created without stdio streams")}let u=this._serverOptions;if(we.func(u))return u().then(g=>{if(JC.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Zc.is(g))return this._isDetached=!!g.detached,{reader:new _e.StreamMessageReader(g.reader),writer:new _e.StreamMessageWriter(g.writer)};{let m;return eu.is(g)?(m=g.process,this._isDetached=g.detached):(m=g,this._isDetached=!1),m.stderr.on("data",y=>this.outputChannel.append(we.string(y)?y:y.toString(e))),{reader:new _e.StreamMessageReader(m.stdout),writer:new _e.StreamMessageWriter(m.stdin)}}});let c,f=u;return f.run||f.debug?this._forceDebug||s()?c=f.debug:c=f.run:c=u,this._getServerWorkingDir(c.options).then(g=>{if(Qc.is(c)&&c.module){let m=c,y=m.transport||Fe.stdio;if(m.runtime){let v=[],D=m.options||Object.create(null);D.execArgv&&D.execArgv.forEach(E=>v.push(E)),v.push(m.module),m.args&&m.args.forEach(E=>v.push(E));let q=Object.create(null);q.cwd=g,q.env=r(D.env,!1);let z=this._getRuntimePath(m.runtime,g),I;if(y===Fe.ipc?(q.stdio=[null,null,null,"ipc"],v.push("--node-ipc")):y===Fe.stdio?v.push("--stdio"):y===Fe.pipe?(I=_e.generateRandomPipeName(),v.push(`--pipe=${I}`)):ln.isSocket(y)&&v.push(`--socket=${y.port}`),v.push(`--clientProcessId=${process.pid.toString()}`),y===Fe.ipc||y===Fe.stdio){let E=xr.spawn(z,v,q);return!E||!E.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=E,E.stderr.on("data",O=>this.outputChannel.append(we.string(O)?O:O.toString(e))),y===Fe.ipc?(E.stdout.on("data",O=>this.outputChannel.append(we.string(O)?O:O.toString(e))),Promise.resolve({reader:new _e.IPCMessageReader(E),writer:new _e.IPCMessageWriter(E)})):Promise.resolve({reader:new _e.StreamMessageReader(E.stdout),writer:new _e.StreamMessageWriter(E.stdin)}))}else{if(y===Fe.pipe)return _e.createClientPipeTransport(I).then(E=>{let O=xr.spawn(z,v,q);return!O||!O.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=O,O.stderr.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),O.stdout.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),E.onConnected().then(T=>({reader:T[0],writer:T[1]})))});if(ln.isSocket(y))return _e.createClientSocketTransport(y.port).then(E=>{let O=xr.spawn(z,v,q);return!O||!O.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=O,O.stderr.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),O.stdout.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),E.onConnected().then(T=>({reader:T[0],writer:T[1]})))})}}else{let v;return new Promise((D,q)=>{let z=m.args&&m.args.slice()||[];y===Fe.ipc?z.push("--node-ipc"):y===Fe.stdio?z.push("--stdio"):y===Fe.pipe?(v=_e.generateRandomPipeName(),z.push(`--pipe=${v}`)):ln.isSocket(y)&&z.push(`--socket=${y.port}`),z.push(`--clientProcessId=${process.pid.toString()}`);let I=m.options||Object.create(null);if(I.env=r(I.env,!0),I.execArgv=I.execArgv||[],I.cwd=g,I.silent=!0,y===Fe.ipc||y===Fe.stdio){let E=xr.fork(m.module,z||[],I);o(E),this._serverProcess=E,E.stderr.on("data",O=>this.outputChannel.append(we.string(O)?O:O.toString(e))),y===Fe.ipc?(E.stdout.on("data",O=>this.outputChannel.append(we.string(O)?O:O.toString(e))),D({reader:new _e.IPCMessageReader(this._serverProcess),writer:new _e.IPCMessageWriter(this._serverProcess)})):D({reader:new _e.StreamMessageReader(E.stdout),writer:new _e.StreamMessageWriter(E.stdin)})}else y===Fe.pipe?_e.createClientPipeTransport(v).then(E=>{let O=xr.fork(m.module,z||[],I);o(O),this._serverProcess=O,O.stderr.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),O.stdout.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),E.onConnected().then(T=>{D({reader:T[0],writer:T[1]})})}):ln.isSocket(y)&&_e.createClientSocketTransport(y.port).then(E=>{let O=xr.fork(m.module,z||[],I);o(O),this._serverProcess=O,O.stderr.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),O.stdout.on("data",T=>this.outputChannel.append(we.string(T)?T:T.toString(e))),E.onConnected().then(T=>{D({reader:T[0],writer:T[1]})})})})}}else if(Yc.is(c)&&c.command){let m=c,y=m.args||[],v=Object.assign({},m.options);v.cwd=v.cwd||g;let D=xr.spawn(m.command,y,v);return!D||!D.pid?Promise.reject(`Launching server using command ${m.command} failed.`):(D.stderr.on("data",q=>this.outputChannel.append(we.string(q)?q:q.toString(e))),this._serverProcess=D,this._isDetached=!!v.detached,Promise.resolve({reader:new _e.StreamMessageReader(D.stdout),writer:new _e.StreamMessageWriter(D.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(u,null,4)))})}_getRuntimePath(e,r){if(Vc.isAbsolute(e))return e;let n=this._mainGetRootPath();if(n!==void 0){let i=Vc.join(n,e);if(Jc.existsSync(i))return i}if(r!==void 0){let i=Vc.join(r,e);if(Jc.existsSync(i))return i}return e}_mainGetRootPath(){let e=nr.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{Jc.lstat(r,(i,s)=>{n(!i&&s.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let r;try{r=JSON.parse(e)}catch{}return r===void 0||typeof r.locale!="string"?"en":r.locale}};Ue.LanguageClient=tu;var ru=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return nr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new nr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?nr.workspace.getConfiguration(r).get(n,!1):nr.workspace.getConfiguration(r);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};Ue.SettingMonitor=ru});var Eh=w((gS,Ph)=>{"use strict";Ph.exports=Th()});var n_={};ou(n_,{activate:()=>r_});module.exports=cu(n_);var k=require("vscode");var Yn=$h(Eh(),1);function YC(t){return new Proxy({},{get(e,r){if(typeof r=="string")return r.startsWith("on")?n=>t.onNotification(`$/${r}`,n):async(...n)=>{try{return await t.sendRequest(`$/${r}`,n)}catch(i){throw i}}}})}var os=class extends Yn.LanguageClient{constructor(e,r){let n={...r,initializationOptions:{clientId:r.id,...r.initializationOptions}};super(r.id,r.name,QC(e),n),this.protocol=YC(this)}};function QC(t){return{run:{module:t,transport:Yn.TransportKind.ipc},debug:{module:t,transport:Yn.TransportKind.ipc,options:{execArgv:["--nolazy","--inspect=5512"]}}}}var nu=class{constructor(e){this.context=e,this.callbacks=new Set,this.isReady=!1,this.selectors=[]}onReady(e){return this.callbacks.add(e),this.isReady&&e(),new k.Disposable(()=>this.callbacks.delete(e))}matchesDocumentSelector(e){let r=k.workspace.getConfiguration("grammarly").get("files.exclude",[]).map(n=>({pattern:n}));return k.languages.match(this.selectors,e)>0&&k.languages.match(r,e)<=0}createClient(){var e;let r=k.workspace.getConfiguration("grammarly"),n=(e=k.workspace.workspaceFolders)===null||e===void 0?void 0:e[0];return this.selectors=[],r.get("patterns",[]).forEach(s=>{this.selectors.push({scheme:"file",pattern:n!=null?new k.RelativePattern(n,s):s})}),r.get("files.include",[]).forEach(s=>{this.selectors.push({pattern:s})}),r.get("selectors",[]).forEach(s=>{n!=null&&s.pattern!=null?this.selectors.push({...s,pattern:new k.RelativePattern(n,String(s.pattern))}):this.selectors.push(s)}),new os(ZC()?this.context.asAbsolutePath("dist/server/index.node.js"):k.Uri.joinPath(this.context.extensionUri,"dist/server/index.browser.js").toString(),{id:"client_BaDkMgx4X19X9UxxYRCXZo",name:"Grammarly",outputChannel:k.window.createOutputChannel("Grammarly"),documentSelector:this.selectors.map(s=>s.language!=null||s.pattern!=null||s.scheme!=null?s:null).filter(s=>s!=null),initializationOptions:{startTextCheckInPausedState:r.get("startTextCheckInPausedState")},revealOutputChannelOn:3,progressOnInitialization:!0,errorHandler:{error(s){return k.window.showErrorMessage(s.message),2},closed(){return 1}},markdown:{isTrusted:!0,supportHtml:!0},middleware:{didOpen:(s,o)=>{this.matchesDocumentSelector(s)&&o(s)},didChange:(s,o)=>{this.matchesDocumentSelector(s.document)&&o(s)},didSave:(s,o)=>{this.matchesDocumentSelector(s)&&o(s)}}})}register(){return k.Disposable.from(k.workspace.onDidChangeConfiguration(async e=>{(e.affectsConfiguration("grammarly.patterns")||e.affectsConfiguration("grammarly.files")||e.affectsConfiguration("grammarly.selectors"))&&await this.start()}),k.window.registerUriHandler({handleUri:async e=>{if(e.path==="/auth/callback"){try{await this.client.protocol.handleOAuthCallbackUri(e.toString(!0))}catch(r){await k.window.showErrorMessage(r.message);return}await this.client.protocol.isUserAccountConnected()&&await k.window.showInformationMessage("Account connected.")}else throw new Error(`Unexpected URI: ${e.toString()}`)}}),k.commands.registerCommand("grammarly.check",async()=>{var e;let r=(e=k.window.activeTextEditor)===null||e===void 0?void 0:e.document;if(r==null)return console.log("No active document");let n=await this.client.protocol.getDocumentStatus(r.uri.toString()),i=k.workspace.getConfiguration("grammarly").get("files.exclude",[]).map(s=>({pattern:s}));if(this.matchesDocumentSelector(r)&&n!=null)await k.window.showInformationMessage("Grammarly is already enabled for this file.");else if(k.languages.match(i,r)>0)await k.window.showInformationMessage("This file is explicitly excluded using Grammarly > Files > Exclude setting.");else{let s=await k.window.showInformationMessage("Grammarly is not enabled for this file. Enable now?",{modal:!0,detail:[`- Scheme: ${r.uri.scheme}`,`- Language: ${r.languageId}`,`- Path: ${k.workspace.asRelativePath(r.uri)}`].join(`
`)},"Current file",`All ${r.languageId} files`);if(s!=null){let o=k.workspace.getConfiguration("grammarly"),u=o.get("selectors",[]),c={language:r.languageId,scheme:r.uri.scheme,pattern:s==="Current file"?k.workspace.asRelativePath(r.uri):void 0},f=[...u,c];await o.update("selectors",f,!1),await this.start()}}}),k.commands.registerCommand("grammarly.dismiss",async e=>{await this.client.protocol.dismissSuggestion(e)}),k.commands.registerCommand("grammarly.login",async()=>{let e=k.Uri.parse(`${k.env.uriScheme}://znck.grammarly/auth/callback`,!0),r=await k.env.asExternalUri(e),i=e.toString(!0)===r.toString(!0)?e.toString(!0):"https://vscode-extension-grammarly.netlify.app/.netlify/functions/redirect",s=new URL(await this.client.protocol.getOAuthUrl(i));s.searchParams.set("state",e_(r.toString(!0))),await k.env.openExternal(k.Uri.parse(s.toString(),!0))||await k.window.showErrorMessage("Failed to open login page.")}),k.commands.registerCommand("grammarly.logout",async()=>{await this.client.protocol.logout(),await k.window.showInformationMessage("Logged out.")}),{dispose:()=>{var e;return(e=this.session)===null||e===void 0?void 0:e.dispose()}})}async start(){var e;let r=k.window.createStatusBarItem(k.StatusBarAlignment.Left,Number.MIN_SAFE_INTEGER);r.text=`$(sync~spin) ${this.session==null?"Starting":"Restarting"} Grammarly language server`,r.show();try{(e=this.session)===null||e===void 0||e.dispose(),this.client=this.createClient(),this.session=this.client.start(),await this.client.onReady(),await k.commands.executeCommand("setContext","grammarly.isRunning",!0),this.isReady=!0,this.callbacks.forEach(n=>{try{n()}catch(i){console.error(i)}})}catch{await k.commands.executeCommand("setContext","grammarly.isRunning",!1),await k.window.showErrorMessage("The extension couldn't be started. See the output channel for details.")}finally{r.dispose()}}};function ZC(){var t;return typeof process<"u"&&((t=process.versions)===null||t===void 0?void 0:t.node)!=null}function e_(t){return typeof Buffer<"u"?Buffer.from(t,"utf-8").toString("base64url"):btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function t_(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var Qn,qt,iu=class{constructor(e){this.grammarly=e,Qn.set(this,null),qt.set(this,k.window.createStatusBarItem(k.StatusBarAlignment.Right,Number.MIN_SAFE_INTEGER)),e.onReady(()=>{e.client.protocol.onDocumentStatus(({uri:r,status:n})=>{var i;r===((i=xt(this,Qn,"f"))===null||i===void 0?void 0:i.uri)&&(xt(this,Qn,"f").status=n,this.update())}),e.client.protocol.onUserAccountConnectedChange(()=>this.update())})}register(){this.update();let e=!1;return k.Disposable.from(xt(this,qt,"f"),k.workspace.onDidCloseTextDocument(()=>this.update()),k.window.onDidChangeActiveTextEditor(()=>this.update()),k.commands.registerCommand("grammarly.restartServer",async()=>{if(!e)try{e=!0,await this.grammarly.start()}finally{e=!1}}),k.commands.registerCommand("grammarly.pauseCheck",async r=>{var n;let i=r??((n=k.window.activeTextEditor)===null||n===void 0?void 0:n.document.uri);i!=null&&(await this.grammarly.client.protocol.pause(i.toString()),await this.update())}),k.commands.registerCommand("grammarly.resumeCheck",async r=>{var n;let i=r??((n=k.window.activeTextEditor)===null||n===void 0?void 0:n.document.uri);i!=null&&(await this.grammarly.client.protocol.resume(i.toString()),await this.update())}))}async getStatus(e){let r=e.uri.toString();return await this.grammarly.client.protocol.getDocumentStatus(r)}async update(){var e;await Promise.resolve();let r=(e=k.window.activeTextEditor)===null||e===void 0?void 0:e.document,n=await this.grammarly.client.protocol.isUserAccountConnected();if(await k.commands.executeCommand("setContext","grammarly.isUserAccountConnected",n),r==null)return this.hide();let i=await this.getStatus(r);if(t_(this,Qn,{uri:r.uri.toString(),status:i},"f"),i==null&&!this.grammarly.matchesDocumentSelector(r))return this.hide();let s=n?"$(account)":"",o=i==null?"$(sync)":i==="connecting"?"$(sync~spin)":i==="error"?s+"$(warning)":i==="idle"?s+"$(pass-filled)":i==="paused"?"$(debug-start)":"$(loading~spin)";xt(this,qt,"f").text=o,xt(this,qt,"f").color=i==="error"?"red":"",xt(this,qt,"f").accessibilityInformation={label:i??"",role:"button"},xt(this,qt,"f").tooltip=[`Your Grammarly account is ${n?"":"not "}used for this file.`,`Connection status: ${i}`,i==="error"?"Restart now?":null,i==="paused"?"Resume text checking?":null].filter(Boolean).join(`
`),xt(this,qt,"f").command=i==="error"?{title:"Restart",command:"grammarly.restartServer"}:i==="paused"?{title:"Resume",command:"grammarly.resumeCheck",arguments:[r.uri]}:{title:"Pause",command:"grammarly.pauseCheck",arguments:[r.uri]},xt(this,qt,"f").show(),await k.commands.executeCommand("setContext","grammarly.isActive",!0),await k.commands.executeCommand("setContext","grammarly.isPaused",i==="paused")}async hide(){xt(this,qt,"f").hide(),await k.commands.executeCommand("setContext","grammarly.isActive",!1)}};Qn=new WeakMap,qt=new WeakMap;async function r_(t){let e=new nu(t);return await e.start(),k.Disposable.from(e.register(),new iu(e).register())}0&&(module.exports={activate});
//# sourceMappingURL=index.node.js.map
